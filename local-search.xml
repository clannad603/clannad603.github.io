<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>jdbc_study</title>
    <link href="/2022/04/08/jdbc-study/"/>
    <url>/2022/04/08/jdbc-study/</url>
    
    <content type="html"><![CDATA[<h2 id="jdbc"><a href="#jdbc" class="headerlink" title="jdbc"></a>jdbc</h2><p>java database connectivity(java è¯­è¨€è¿æ¥æ•°æ®åº“)</p><p>jdbcæœ¬è´¨ä¸ºæ¥å£ï¼Œåœ¨å…·ä½“çš„å®ç°ä¸Šç”±å„å¤§æ•°æ®åº“å®Œæˆï¼Œé¢å‘æ¥å£ç¼–ç¨‹ï¼Œç¡®ä¿è§„èŒƒä¸€è‡´</p><h3 id="Jdbcç¼–ç¨‹æ­¥éª¤"><a href="#Jdbcç¼–ç¨‹æ­¥éª¤" class="headerlink" title="Jdbcç¼–ç¨‹æ­¥éª¤"></a>Jdbcç¼–ç¨‹æ­¥éª¤</h3><ol><li>æ³¨å†Œé©±åŠ¨(å‘Šè¯‰javaç¨‹åºï¼Œå³å°†æ‰§è¡Œçš„æ˜¯é‚£ä¸ªå“ç‰Œçš„æ•°æ®åº“)</li><li>è·å–è¿æ¥</li><li>è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡(ä¸“é—¨æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡)</li><li>æ‰§è¡Œsqlè¯­å¥</li><li>å¤„ç†æŸ¥è¯¢ç»“æœé›†</li><li>é‡Šæ”¾èµ„æº</li></ol><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs sql">import java.sql.<span class="hljs-operator">*</span>;<br><br>public class TestConnect &#123;<br>    public <span class="hljs-keyword">static</span> void main(String[] args) throws <span class="hljs-keyword">SQLException</span> &#123;<br>            Connection conn <span class="hljs-operator">=</span> <span class="hljs-keyword">null</span>;<br>            Statement stmt <span class="hljs-operator">=</span> <span class="hljs-keyword">null</span>;<br>            try&#123;<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">1.</span>æ³¨å†Œé©±åŠ¨<br>                Driver driver <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> com.mysql.cj.jdbc.Driver();<br>                DriverManager.registerDriver(driver);<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">2.</span>è·å–è¿æ¥,é«˜ç‰ˆæœ¬éœ€è¦æ·»åŠ æ—¶åŒº<br>                String url <span class="hljs-operator">=</span> &quot;jdbc:mysql://127.0.0.1:3306/test&quot; <span class="hljs-operator">+</span><br>                        &quot;?autoReconnect=true&amp;&quot; <span class="hljs-operator">+</span><br>                        &quot;zeroDateTimeBehavior=convertToNull&quot; <span class="hljs-operator">+</span><br>                        &quot;&amp;useUnicode=true&amp;serverTimezone=UTC&quot; <span class="hljs-operator">+</span><br>                        &quot;&amp;characterEncoding=UTF-8&amp;allowMultiQueries=true&amp;useSSL=false&quot;;<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span>jdbc:mysql:<span class="hljs-operator">/</span><span class="hljs-operator">/</span>åè®®ï¼Œè€Œoracleä½¿ç”¨çš„åè®®ä¸ºjdbc:oracle:hin:<span class="hljs-variable">@localhost</span>:<span class="hljs-number">1521</span>:orcl<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>æ˜¯ipåœ°å€ï¼Œ<span class="hljs-number">3306</span>æ˜¯æœåŠ¡å™¨ä¸Šè½¯ä»¶çš„ç«¯å£åé¢æ¥çš„æ˜¯èµ„æºå<br>                String <span class="hljs-keyword">user</span> <span class="hljs-operator">=</span> &quot;root&quot;;<br>                String password <span class="hljs-operator">=</span> &quot;å¯†ç &quot;;<br>                 conn <span class="hljs-operator">=</span> DriverManager.getConnection(url,<span class="hljs-keyword">user</span>,password);<br>                System.out.println(&quot;æ•°æ®åº“è¿æ¥å¯¹è±¡ = &quot;<span class="hljs-operator">+</span>conn);<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">3.</span>è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡<br>                stmt <span class="hljs-operator">=</span> conn.createStatement();<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">4.</span>æ‰§è¡Œ<span class="hljs-keyword">SQL</span><br>                String <span class="hljs-keyword">sql</span> <span class="hljs-operator">=</span> &quot;insert into account (id, name, money) values (4,&#x27;èµµå››&#x27;,2000)&quot;;<br>                <span class="hljs-type">int</span> count  <span class="hljs-operator">=</span> stmt.executeUpdate(<span class="hljs-keyword">sql</span>);<br>                System.out.println(count <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>?&quot;ä¿å­˜æˆåŠŸ&quot;:&quot;ä¿å­˜å¤±è´¥&quot;);<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">5.</span>.å¤„ç†æŸ¥è¯¢ç»“æœé›†<br><br>            &#125;catch (<span class="hljs-keyword">SQLException</span> e)&#123;<br>                e.printStackTrace();<br>            &#125;finally &#123;<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">6.</span>é‡Šæ”¾èµ„æº<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span>ä¸ºäº†ä¿è¯èµ„æºä¸€å®šé‡Šæ”¾,åœ¨finnallyè¯­å¥å—ä¸­å…³é—­èµ„æº<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span>å¹¶ä¸”è¦éµå¾ªä»å°åˆ°å¤§ä¾æ¬¡å…³é—­<br>                <span class="hljs-operator">/</span><span class="hljs-operator">/</span>åˆ†åˆ«å¯¹å…¶try..catch<br>                try&#123;<br>                    if (stmt<span class="hljs-operator">!=</span><span class="hljs-keyword">null</span>)&#123;<br>                        stmt.close();<br>                    &#125;<br>                &#125;catch (<span class="hljs-keyword">SQLException</span> e)&#123;<br>                    e.printStackTrace();<br>                &#125;<br><br>                try&#123;<br>                    if (conn<span class="hljs-operator">!=</span><span class="hljs-keyword">null</span>)&#123;<br>                        conn.close();<br>                    &#125;<br>                &#125;catch (<span class="hljs-keyword">SQLException</span> e)&#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ³¨å†Œé©±åŠ¨æ–¹å¼2ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br></code></pre></td></tr></table></figure><p>ç±»åŠ è½½ä¼šæ‰§è¡Œé™æ€ä»£ç å—</p><p>sqlè¯­å¥åœ¨æ­¤å¤„ä¸éœ€è¦å†™<code>;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">executeUpdate</span><span class="hljs-params">(insert/delete/update)</span>ç­‰DMLè¯­å¥</span><br><span class="hljs-function">ResultSet <span class="hljs-title">executeQuery</span><span class="hljs-params">(selete)</span>DQLè¯­å¥</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æŸ¥è¯¢è¯­å¥çš„æ–¹æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">rs <span class="hljs-operator">=</span> stmt.executeQuery(<span class="hljs-keyword">sql</span>);<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">5.</span>.å¤„ç†æŸ¥è¯¢ç»“æœé›†<br>while (rs.next())&#123;<br>    String id <span class="hljs-operator">=</span> rs.getString(&quot;id&quot;);<br>    String name <span class="hljs-operator">=</span> rs.getString(&quot;name&quot;);<br>    String money <span class="hljs-operator">=</span> rs.getString(&quot;money&quot;);<br>    System.out.println(id<span class="hljs-operator">+</span>&quot; &quot;<span class="hljs-operator">+</span>name<span class="hljs-operator">+</span>&quot; &quot;<span class="hljs-operator">+</span>money);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨rs.getString(1)æ¥å–åˆ—ä½†è¿™æ ·ä¸å®‰å…¨ ä¸”mysqlåˆ—å·ä»¥1å¼€å¤´</p><h3 id="SQLæ³¨å…¥é—®é¢˜"><a href="#SQLæ³¨å…¥é—®é¢˜" class="headerlink" title="SQLæ³¨å…¥é—®é¢˜"></a>SQLæ³¨å…¥é—®é¢˜</h3><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestDemo2</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>       Map&lt;String ,String&gt; userLoginInfo =  initUI();<br>       <span class="hljs-keyword">boolean</span> loginSuccess = login(userLoginInfo);<br>        System.out.println(loginSuccess?<span class="hljs-string">&quot;ç™»é™†æˆåŠŸ&quot;</span>:<span class="hljs-string">&quot;ç™»é™†å¤±è´¥&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">login</span><span class="hljs-params">(Map&lt;String, String&gt; userLoginInfo)</span> </span>&#123;<br>        Connection conn = <span class="hljs-keyword">null</span>;<br>        Statement stmt = <span class="hljs-keyword">null</span>;<br>        ResultSet rs =<span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">boolean</span> loginSuccess= <span class="hljs-keyword">false</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>            conn = DriverManager.getConnection(<br>                    <span class="hljs-string">&quot;jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;serverTimezone=UTC&quot;</span>,<br>                    <span class="hljs-string">&quot;root&quot;</span>,<br>                    <span class="hljs-string">&quot;&quot;</span>);<br>            stmt = conn.createStatement();<br>            String sql = <span class="hljs-string">&quot;select * from user_login where loginName = &#x27;&quot;</span>+userLoginInfo.get(<span class="hljs-string">&quot;loginName&quot;</span>)+<span class="hljs-string">&quot;&#x27; &quot;</span> +<br>                    <span class="hljs-string">&quot;and loginPwd = &#x27;&quot;</span>+userLoginInfo.get(<span class="hljs-string">&quot;loginPwd&quot;</span>)+<span class="hljs-string">&quot;&#x27;&quot;</span>;<br>            rs = stmt.executeQuery(sql);<br>            <span class="hljs-keyword">if</span> (rs.next())&#123;<br>                loginSuccess = <span class="hljs-keyword">true</span>;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span> (stmt!=<span class="hljs-keyword">null</span>)&#123;<br>                    stmt.close();<br>                &#125;<br>            &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span> (rs!=<span class="hljs-keyword">null</span>)&#123;<br>                   rs.close();<br>                &#125;<br>            &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span> (conn!=<span class="hljs-keyword">null</span>)&#123;<br>                    conn.close();<br>                &#125;<br>            &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> loginSuccess;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, String&gt; <span class="hljs-title">initUI</span><span class="hljs-params">()</span> </span>&#123;<br>        Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);<br>        System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·å&quot;</span>);<br>        String loginName = scanner.nextLine();<br>        System.out.println(<span class="hljs-string">&quot;å¯†ç &quot;</span>);<br>        String loginPwd = scanner.nextLine();<br>        Map&lt;String ,String&gt; userinfo = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        userinfo.put(<span class="hljs-string">&quot;loginName&quot;</span>,loginName);<br>        userinfo.put(<span class="hljs-string">&quot;loginPwd&quot;</span>,loginPwd);<br>        <span class="hljs-keyword">return</span> userinfo;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ­¤ä»£ç ä¸­å­˜åœ¨sqlæ³¨å…¥é—®é¢˜ï¼Œå³è¾“å…¥å¯†ç ä¸º</p><p><img src="/2022/04/08/jdbc-study/image-20220409103851452.png" alt="image-20220409103851452"></p><p>æ—¶åŒæ ·å¯ä»¥ç™»å½•æˆåŠŸï¼ŒåŸå› åœ¨äºç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯å‚ä¸äº†sqlè¯­å¥çš„ç¼–è¯‘ï¼Œå¯¼è‡´äº†ç¼–è¯‘å‡ºçš„sqlè¯­å¥æ’ä¸ºçœŸã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>å³éœ€è¦ç”¨æˆ·æä¾›çš„ä¿¡æ¯ä¸å‚ä¸SQLè¯­å¥çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œè¦æƒ³ç”¨æˆ·ä¿¡æ¯ä¸å‚ä¸SQLè¯­å¥çš„ç¼–è¯‘ï¼Œå¿…é¡»ä½¿ç”¨java.sql.preparedStatement</strong></p><p>preparedstatementçš„åŸç†æ˜¯<strong>é¢„å…ˆå¯¹SQLè¯­å¥çš„æ¡†æ¶è¿›è¡Œç¼–è¯‘ï¼Œç„¶ååœ¨å¯¹SQLè¯­å¥ä¼ å€¼</strong></p><p>æ¡ˆä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestDemo2</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>       Map&lt;String ,String&gt; userLoginInfo =  initUI();<br>       <span class="hljs-keyword">boolean</span> loginSuccess = login(userLoginInfo);<br>        System.out.println(loginSuccess?<span class="hljs-string">&quot;ç™»é™†æˆåŠŸ&quot;</span>:<span class="hljs-string">&quot;ç™»é™†å¤±è´¥&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">login</span><span class="hljs-params">(Map&lt;String, String&gt; userLoginInfo)</span> </span>&#123;<br>        Connection conn = <span class="hljs-keyword">null</span>;<br>        PreparedStatement ps = <span class="hljs-keyword">null</span>;<br>        ResultSet rs =<span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">boolean</span> loginSuccess= <span class="hljs-keyword">false</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>            conn = DriverManager.getConnection(<br>                    <span class="hljs-string">&quot;jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;serverTimezone=UTC&quot;</span>,<br>                    <span class="hljs-string">&quot;root&quot;</span>,<br>                    <span class="hljs-string">&quot;clannadhr01&quot;</span>);<br>            <span class="hljs-comment">//ä¸€ä¸ªé—®å·ä»£è¡¨ä¸€ä¸ªå ä½ç¬¦</span><br>            String sql = <span class="hljs-string">&quot;select * from user_login where loginName = ? and loginPwd = ?&quot;</span>;<br>            <span class="hljs-comment">//æ‰§è¡Œåˆ°æ­¤å¤„ï¼Œå‘é€SQLè¯­å¥æ¡†å­ç»™DBMSï¼Œç„¶åDBMSè¿›è¡Œé¢„ç¼–è¯‘</span><br>            ps = conn.prepareStatement(sql);<br>            ps.setString(<span class="hljs-number">1</span>,userLoginInfo.get(<span class="hljs-string">&quot;loginName&quot;</span>));<br>            ps.setString(<span class="hljs-number">2</span>,userLoginInfo.get(<span class="hljs-string">&quot;loginPwd&quot;</span>));<br>            rs = ps.executeQuery();<br>            <span class="hljs-keyword">if</span> (rs.next())&#123;<br>                loginSuccess = <span class="hljs-keyword">true</span>;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span> (ps!=<span class="hljs-keyword">null</span>)&#123;<br>                    ps.close();<br>                &#125;<br>            &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span> (rs!=<span class="hljs-keyword">null</span>)&#123;<br>                   rs.close();<br>                &#125;<br>            &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span> (conn!=<span class="hljs-keyword">null</span>)&#123;<br>                    conn.close();<br>                &#125;<br>            &#125;<span class="hljs-keyword">catch</span> (SQLException e)&#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> loginSuccess;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, String&gt; <span class="hljs-title">initUI</span><span class="hljs-params">()</span> </span>&#123;<br>        Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);<br>        System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·å&quot;</span>);<br>        String loginName = scanner.nextLine();<br>        System.out.println(<span class="hljs-string">&quot;å¯†ç &quot;</span>);<br>        String loginPwd = scanner.nextLine();<br>        Map&lt;String ,String&gt; userinfo = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        userinfo.put(<span class="hljs-string">&quot;loginName&quot;</span>,loginName);<br>        userinfo.put(<span class="hljs-string">&quot;loginPwd&quot;</span>,loginPwd);<br>        <span class="hljs-keyword">return</span> userinfo;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>mysqlä¸­è¿ç»­æ‰§è¡Œç›¸åŒè¯­å¥åªä¼šç¼–è¯‘ç¬¬ä¸€æ¬¡</p><h3 id="Statementä¸PrepareStatementåŒºåˆ«"><a href="#Statementä¸PrepareStatementåŒºåˆ«" class="headerlink" title="Statementä¸PrepareStatementåŒºåˆ«"></a>Statementä¸PrepareStatementåŒºåˆ«</h3><ol><li>Statement å­˜åœ¨SQLæ³¨å…¥é—®é¢˜ï¼ŒPreparedStatementè§£å†³SQLæ³¨å…¥é—®é¢˜ã€‚</li><li>Statementæ˜¯ç¼–è¯‘ä¸€æ¬¡æ‰§è¡Œä¸€æ¬¡ï¼ŒPreparedStatementæ˜¯ç¼–è¯‘ä¸€æ¬¡ï¼Œå¯æ‰§è¡Œnæ¬¡,PreparedStatementæ•ˆç‡æ›´é«˜ä¸€äº›</li><li>PreparedStatementä¼šåœ¨ç¼–è¯‘é˜¶æ®µåšç±»å‹çš„å®‰å…¨æ£€æŸ¥</li></ol><p>åœ¨éœ€è¦è¿›è¡ŒSQLæ³¨å…¥æ—¶å¿…é¡»ä½¿ç”¨Statement,æ¯”å¦‚å‡åºæ”¹é™åºçš„æƒ…å†µ order by xxx desc</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">conn.setAutoCommit(<span class="hljs-literal">false</span>);                  <br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>æ‰§è¡Œæ­¤è¯­å¥å°†jdbcæ”¹ä¸ºæ‰‹åŠ¨æäº¤<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>æœ€ååœ¨æ‰§è¡Œ<br>conn.commit();<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>åœ¨å¼‚å¸¸å¤„ç†ä¸­ä½¿ç”¨<br>if(conn<span class="hljs-operator">!=</span><span class="hljs-keyword">null</span>)&#123;<br>conn.rollback();<br>&#125;<br></code></pre></td></tr></table></figure><p>sqlè¯­å¥æœ«å°¾æ·»åŠ <code>for update</code>å°†ğŸ”’ä½èµ„æºï¼Œæ‚²è§‚é”</p><ol><li>æ‚²è§‚é”ï¼šäº‹åŠ¡å¿…é¡»æ’é˜Ÿæ‰§è¡Œï¼Œæ•°æ®é”ä½äº†ï¼Œä¸å…è®¸å¹¶å‘(è¡Œçº§é”ï¼šselectåé¢æ·»åŠ for update)</li><li>ä¹è§‚é”ï¼šæ”¯æŒå¹¶å‘ï¼Œäº‹åŠ¡ä¹Ÿä¸éœ€è¦æ’é˜Ÿï¼Œåªä¸è¿‡éœ€è¦ä¸€ä¸ªç‰ˆæœ¬å·</li></ol><p>æ¡ˆä¾‹ï¼š</p><p>äº‹åŠ¡1â€“&gt;è¯»å–åˆ°ç‰ˆæœ¬å·1.1</p><p>äº‹åŠ¡2è¯»å–åˆ°ç‰ˆæœ¬å·1.1</p><p>äº‹åŠ¡1å…ˆè¿›è¡Œäº†ä¿®æ”¹ï¼Œä¿®æ”¹åç‰ˆæœ¬å·ä¸º1.1ï¼Œäºæ˜¯æäº¤ä¿®æ”¹åçš„æ•°æ®ï¼Œå°†ç‰ˆæœ¬å·ä¿®æ”¹ä¸º1.2</p><p>å…¶ä¸­äº‹åŠ¡2åè¿›è¡Œä¿®æ”¹Â·ï¼Œä¿®æ”¹åå‡†å¤‡æäº¤çš„æ—¶å€™ï¼Œå‘ç°ç‰ˆæœ¬å·ä¸º1.2ï¼Œå’Œæœ€åˆè¯»çš„ç‰ˆæœ¬å·ä¸ä¸€è‡´ï¼Œå›æ»š</p><h3 id="æ•°æ®åº“è¿æ¥æ± "><a href="#æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="æ•°æ®åº“è¿æ¥æ± "></a>æ•°æ®åº“è¿æ¥æ± </h3><ol><li>æ•°æ®åº“è¿æ¥æ± æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œè´Ÿè´£åˆ†é…ï¼Œç®¡ç†æ•°æ®åº“è¿æ¥</li><li>å…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æˆçš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯é‡æ–°å»ºç«‹ä¸€ä¸ª</li><li>é‡Šæ”¾ç©ºé—²æ—¶é—´è¶…è¿‡æœ€å¤§ç©ºé—²æ—¶é—´çš„æ•°æ®åº“è¿æ¥æ¥é¿å…å› ä¸ºæ²¡æœ‰é‡Šæ”¾æ•°æ®åº“è¿æ¥è€Œå¼•å‘çš„æ•°æ®åº“è¿æ¥æ³„éœ²</li><li>èµ„æºå¤ç”¨ï¼Œæå‡ç³»ç»Ÿå“åº”é€Ÿåº¦ï¼Œé¿å…æ•°æ®åº“è¿æ¥æ³„éœ²</li></ol><p>ä¸ªäººç†è§£ä¸ºç±»ä¼¼äºçº¿ç¨‹æ± </p><h4 id="Druid"><a href="#Druid" class="headerlink" title="Druid"></a>Druid</h4><p>æ¡ˆä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Properties prop = <span class="hljs-keyword">new</span> Properties();<br>prop.load(<span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;src/jdbc.properties&quot;</span>));<br>DataSource dataSource = DruidDataSourceFactory.createDataSource(prop);<br>conn = dataSource.getConnection();<br></code></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">driverClassName= com.mysql.cj.jdbc.Driver<br>url = jdbc:mysql:<span class="hljs-comment">//127.0.0.1:3306/test?useUnicode=true&amp;serverTimezone=UTC</span><br>username=root<br>password = <br>initialSize = <span class="hljs-number">5</span><br>maxActive = <span class="hljs-number">10</span><br>maxWait = <span class="hljs-number">3000</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>jdbc</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>jdbc</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_study_function</title>
    <link href="/2022/04/05/mysql-study-function/"/>
    <url>/2022/04/05/mysql-study-function/</url>
    
    <content type="html"><![CDATA[<h3 id><a href="#" class="headerlink" title></a></h3><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>å‡½æ•°æŒ‡ä¸€æ®µå¯ä»¥ç›´æ¥è¢«å¦ä¸€æ®µç¨‹åºè°ƒç”¨çš„ç¨‹åºæˆ–ä»£ç </p><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h3><p><img src="/2022/04/05/mysql-study-function/20859616491707912.png"></p><p>ä½¿ç”¨ï¼š</p><p><img src="/2022/04/05/mysql-study-function/31421316492035742.png"></p><h3 id="æ•°å€¼å‡½æ•°"><a href="#æ•°å€¼å‡½æ•°" class="headerlink" title="æ•°å€¼å‡½æ•°"></a>æ•°å€¼å‡½æ•°</h3><p><img src="/2022/04/05/mysql-study-function/image-20220407093902561.png" alt="image-20220407093902561"></p><p>ä½¿ç”¨ï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220407093957815.png" alt="image-20220407093957815"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407094009537.png" alt="image-20220407094009537"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407094026082.png" alt="image-20220407094026082"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407094041123.png" alt="image-20220407094041123"></p><h3 id="æµç¨‹å‡½æ•°"><a href="#æµç¨‹å‡½æ•°" class="headerlink" title="æµç¨‹å‡½æ•°"></a>æµç¨‹å‡½æ•°</h3><p><img src="/2022/04/05/mysql-study-function/2365716492037132.png"></p><p>ä½¿ç”¨ï¼š</p><p><img src="/2022/04/05/mysql-study-function/42463416492039232.png"></p><h2 id="çº¦æŸ"><a href="#çº¦æŸ" class="headerlink" title="çº¦æŸ"></a>çº¦æŸ</h2><p><img src="/2022/04/05/mysql-study-function/image-20220407094129416.png" alt="image-20220407094129416"></p><p>çº¦æŸä½œç”¨äºè¡¨ä¸­å­—æ®µï¼Œå¯åœ¨åˆ›å»ºæˆ–ä¿®æ”¹è¡¨æ—¶æ·»åŠ çº¦æŸ</p><p>eg:</p><p><img src="/2022/04/05/mysql-study-function/image-20220407094247582.png" alt="image-20220407094247582"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">user</span><br>(<br>    id     <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment comment <span class="hljs-string">&#x27;ä¸»é”®&#x27;</span>,<br>    name   <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">unique</span> comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    age    <span class="hljs-type">int</span> <span class="hljs-keyword">check</span> ( age <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-operator">&amp;&amp;</span> age <span class="hljs-operator">&lt;=</span> <span class="hljs-number">120</span> ) comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>    status <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;1&#x27;</span> comment <span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>,<br>    gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) comment <span class="hljs-string">&#x27;æ€§åˆ«&#x27;</span><br>) comment <span class="hljs-string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;<br><br></code></pre></td></tr></table></figure><p>æ‰§è¡Œæ­¤è¯­å¥å</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">user</span>(name, age, status, gender) <span class="hljs-keyword">values</span> (<span class="hljs-string">&#x27;TOM1&#x27;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>),(<span class="hljs-string">&#x27;TOM2&#x27;</span>,<span class="hljs-number">25</span>,<span class="hljs-string">&#x27;0&#x27;</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>);<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220407095125203.png" alt="image-20220407095125203"></p><p>åœ¨æ‰§è¡Œæ­¤è¯­å¥åï¼Œï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">user</span>(name, age, status, gender) <span class="hljs-keyword">values</span> (<span class="hljs-keyword">null</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ç”±äºnameå­—æ®µä¸èƒ½ä¸ºç©ºï¼Œå°†äº§ç”ŸæŠ¥é”™</p><p><img src="/2022/04/05/mysql-study-function/image-20220407095305663.png" alt="image-20220407095305663"></p><p>æ‰§è¡Œæ­¤è¯­å¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">user</span>(name, age, status, gender) <span class="hljs-keyword">values</span> (<span class="hljs-string">&#x27;TOM2&#x27;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ç”±äºè®¾ç½®äº†uniqueçº¦æŸï¼Œæ‰€ä»¥ä»ç„¶å°†äº§ç”ŸæŠ¥é”™</p><p><img src="/2022/04/05/mysql-study-function/image-20220407095757409.png" alt="image-20220407095757409"></p><h3 id="å¤–é”®çº¦æŸ"><a href="#å¤–é”®çº¦æŸ" class="headerlink" title="å¤–é”®çº¦æŸ"></a>å¤–é”®çº¦æŸ</h3><p>å¤–é”®æ˜¯ç”¨æ¥è®©ä¸¤å¼ è¡¨çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä»è€Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</p><p><img src="/2022/04/05/mysql-study-function/image-20220407100225430.png" alt="image-20220407100225430"></p><p>æ­¤ä¾‹ä¸­çš„dept_idå³ä¸ºå‘˜å·¥è¡¨çš„å¤–é”®ï¼Œç”¨äºè¿æ¥éƒ¨é—¨è¡¨ï¼Œä¸”å‘˜å·¥è¡¨è¢«ç§°ä¸ºå­è¡¨ï¼Œéƒ¨é—¨è¡¨è¢«ç§°ä¸ºçˆ¶è¡¨ï¼Œä½†ä»…ä»…å¦‚æ­¤åœ¨æ•°æ®åº“å±‚æ¬¡ä¸Šæ˜¯æ²¡æœ‰ä»»ä½•è”ç³»çš„ï¼Œå› æ­¤éœ€è¦æ‰§è¡Œsqlè¯­å¥æ¥å»ºç«‹è”ç³»ï¼Œ</p><p>æ¼”ç¤ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> dept(<br>    id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;id&#x27;</span> <span class="hljs-keyword">primary</span> key ,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span><br>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> dept(id, name) <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;å¸‚åœºéƒ¨&#x27;</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>),(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;é”€å”®éƒ¨&#x27;</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;æ€»ç»åŠ&#x27;</span>);<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp(<br><br>    id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;id&#x27;</span> <span class="hljs-keyword">primary</span> key,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    age <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>    job <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) comment <span class="hljs-string">&#x27;èŒä½&#x27;</span>,<br>    salary <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;è–ªèµ„&#x27;</span>,<br>    entrydate <span class="hljs-type">date</span> comment <span class="hljs-string">&#x27;å…¥èŒæ—¶é—´&#x27;</span>,<br>    managerid <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ç›´å±é¢†å¯¼äººid&#x27;</span>,<br>    dept_id <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨id&#x27;</span><br> )comment <span class="hljs-string">&#x27;å‘˜å·¥è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> emp (id, name, age, job, salary, entrydate, managerid, dept_id)<br><span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;é‡‘åº¸&#x27;</span>,<span class="hljs-number">66</span>,<span class="hljs-string">&#x27;æ€»è£&#x27;</span>,<span class="hljs-number">20000</span>,<span class="hljs-string">&#x27;2000-01-01&#x27;</span>,<span class="hljs-keyword">null</span>,<span class="hljs-number">5</span>),<br>       (<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;å¼ æ— å¿Œ&#x27;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&#x27;é¡¹ç›®ç»ç†&#x27;</span>,<span class="hljs-number">12500</span>,<span class="hljs-string">&#x27;2005-12-05&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;æ¨è¿‡&#x27;</span>,<span class="hljs-number">33</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">8400</span>,<span class="hljs-string">&#x27;2000-11-03&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;éŸ¦ä¸€ç¬‘&#x27;</span>,<span class="hljs-number">48</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">11000</span>,<span class="hljs-string">&#x27;2002-02-05&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;å¸¸é‡æ˜¥&#x27;</span>,<span class="hljs-number">43</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">10500</span>,<span class="hljs-string">&#x27;2004-09-07&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;å°æ˜­&#x27;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&#x27;ç¨‹åºå‘˜é¼“åŠ±å¸ˆ&#x27;</span>,<span class="hljs-number">6600</span>,<span class="hljs-string">&#x27;2004-10-12&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);<br><br></code></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•åå°†å»ºç«‹ä¸¤å¼ è¡¨ï¼Œç„¶é¹…æ­¤æ—¶æ— å…³è”</p><p>æ·»åŠ å¤–é”®çš„è¯­æ³•ä¸ºï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220407101807703.png" alt="image-20220407101807703"></p><p>æ‰§è¡Œæ­¤è¯­å¥åå°†äº§ç”Ÿå¤–é”®å…³è”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span>  fk_emp_dept_id <span class="hljs-keyword">foreign</span> key (dept_id) <span class="hljs-keyword">references</span> dept(id);<br></code></pre></td></tr></table></figure><p><img src="/2022/04/05/mysql-study-function/image-20220407102104800.png" alt="image-20220407102104800"></p><p>ä½¿ç”¨datagripæŸ¥çœ‹æ—¶å°†å‘ç°å¤–é”®å›¾æ ‡å‘ç”Ÿäº†å˜åŒ–</p><p>æ‰§è¡Œæ­¤è¯­å¥å°†åˆ é™¤å¤–é”®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp <span class="hljs-keyword">drop</span> <span class="hljs-keyword">foreign</span> key fk_emp_dept_id;<br></code></pre></td></tr></table></figure><h3 id="å¤–é”®ç›¸å…³æ“ä½œ"><a href="#å¤–é”®ç›¸å…³æ“ä½œ" class="headerlink" title="å¤–é”®ç›¸å…³æ“ä½œ"></a>å¤–é”®ç›¸å…³æ“ä½œ</h3><p><img src="/2022/04/05/mysql-study-function/image-20220407103207125.png" alt="image-20220407103207125"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407103317347.png" alt="image-20220407103317347"></p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span>  fk_emp_dept_id <span class="hljs-keyword">foreign</span> key (dept_id) <span class="hljs-keyword">references</span> dept(id) <span class="hljs-keyword">on</span> update cascade  <span class="hljs-keyword">on</span> <span class="hljs-keyword">delete</span> cascade ;<br></code></pre></td></tr></table></figure><p>åˆ é™¤çˆ¶è¡¨çš„å±æ€§åï¼Œå­è¡¨å…³è”å±æ€§ä¹Ÿä¼šè¢«åˆ é™¤</p><h2 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h2><h3 id="å¤šè¡¨å…³ç³»"><a href="#å¤šè¡¨å…³ç³»" class="headerlink" title="å¤šè¡¨å…³ç³»"></a>å¤šè¡¨å…³ç³»</h3><p><img src="/2022/04/05/mysql-study-function/image-20220407105627008.png" alt="image-20220407105627008"></p><h4 id="ä¸€å¯¹å¤šï¼š"><a href="#ä¸€å¯¹å¤šï¼š" class="headerlink" title="ä¸€å¯¹å¤šï¼š"></a>ä¸€å¯¹å¤šï¼š</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407105723501.png" alt="image-20220407105723501"></p><h4 id="å¤šå¯¹å¤šï¼š"><a href="#å¤šå¯¹å¤šï¼š" class="headerlink" title="å¤šå¯¹å¤šï¼š"></a>å¤šå¯¹å¤šï¼š</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407105837045.png" alt="image-20220407105837045"></p><h4 id="ä¸€å¯¹ä¸€å…³ç³»ï¼š"><a href="#ä¸€å¯¹ä¸€å…³ç³»ï¼š" class="headerlink" title="ä¸€å¯¹ä¸€å…³ç³»ï¼š"></a>ä¸€å¯¹ä¸€å…³ç³»ï¼š</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407110115241.png" alt="image-20220407110115241"></p><h3 id="å¤šè¡¨æŸ¥è¯¢-1"><a href="#å¤šè¡¨æŸ¥è¯¢-1" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h3><p><img src="/2022/04/05/mysql-study-function/image-20220407111301952.png" alt="image-20220407111301952"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp,dept <span class="hljs-keyword">where</span> dept.id <span class="hljs-operator">=</span> emp.dept_id<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220407111741983.png" alt="image-20220407111741983"></p><h4 id="å¤šè¡¨æŸ¥è¯¢åˆ†ç±»"><a href="#å¤šè¡¨æŸ¥è¯¢åˆ†ç±»" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢åˆ†ç±»"></a>å¤šè¡¨æŸ¥è¯¢åˆ†ç±»</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407111847767.png" alt="image-20220407111847767"></p><h4 id="å†…è¿æ¥æŸ¥è¯¢"><a href="#å†…è¿æ¥æŸ¥è¯¢" class="headerlink" title="å†…è¿æ¥æŸ¥è¯¢"></a>å†…è¿æ¥æŸ¥è¯¢</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407112008331.png" alt="image-20220407112008331"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1.</span>éšå¼å†…è¿æ¥<br><span class="hljs-keyword">select</span> emp.name,dept.name <span class="hljs-keyword">from</span> emp,dept <span class="hljs-keyword">where</span> dept.id <span class="hljs-operator">=</span> emp.dept_id;<br><span class="hljs-number">2.</span>æ˜¾å¼å†…è¿æ¥<br><span class="hljs-keyword">select</span> e.name ,d.name <span class="hljs-keyword">from</span> emp e <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> dept d <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220407112221280.png" alt="image-20220407112221280"></p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åæ“ä½œï¼Œæ•ˆæœç›¸åŒ</p><p><img src="/2022/04/05/mysql-study-function/image-20220407112252031.png" alt="image-20220407112252031"></p><h4 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407112835991.png" alt="image-20220407112835991"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> e.<span class="hljs-operator">*</span> ,d.name <span class="hljs-keyword">from</span> emp e <span class="hljs-keyword">left</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> dept d <span class="hljs-keyword">on</span> d.id <span class="hljs-operator">=</span> e.dept_id;<br></code></pre></td></tr></table></figure><p><img src="/2022/04/05/mysql-study-function/image-20220407113019187.png" alt="image-20220407113019187"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> e.name ,d.<span class="hljs-operator">*</span><span class="hljs-keyword">from</span> emp e <span class="hljs-keyword">right</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> dept d <span class="hljs-keyword">on</span> d.id <span class="hljs-operator">=</span> e.dept_id;<br></code></pre></td></tr></table></figure><p><img src="/2022/04/05/mysql-study-function/image-20220407113228764.png" alt="image-20220407113228764"></p><h4 id="è‡ªè”æ¥"><a href="#è‡ªè”æ¥" class="headerlink" title="è‡ªè”æ¥"></a>è‡ªè”æ¥</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407113503202.png" alt="image-20220407113503202"></p><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a.name,b.name <span class="hljs-keyword">from</span> emp a ,emp b <span class="hljs-keyword">where</span> a.managerid <span class="hljs-operator">=</span> b.id;<br></code></pre></td></tr></table></figure><p><img src="/2022/04/05/mysql-study-function/image-20220407113836773.png" alt="image-20220407113836773"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a.name <span class="hljs-string">&#x27;å‘˜å·¥&#x27;</span>,b.name <span class="hljs-string">&#x27;é¢†å¯¼&#x27;</span> <span class="hljs-keyword">from</span> emp a <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> emp b <span class="hljs-keyword">on</span> a.managerid <span class="hljs-operator">=</span> b.id;<br></code></pre></td></tr></table></figure><p><img src="/2022/04/05/mysql-study-function/image-20220407114131861.png" alt="image-20220407114131861"></p><h4 id="è”åˆæŸ¥è¯¢"><a href="#è”åˆæŸ¥è¯¢" class="headerlink" title="è”åˆæŸ¥è¯¢"></a>è”åˆæŸ¥è¯¢</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407114325595.png" alt="image-20220407114325595"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> salary<span class="hljs-operator">&lt;</span><span class="hljs-number">5000</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age<span class="hljs-operator">&lt;</span><span class="hljs-number">50</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> salary<span class="hljs-operator">&lt;</span><span class="hljs-number">5000</span> <span class="hljs-keyword">union</span>  <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age<span class="hljs-operator">&lt;</span><span class="hljs-number">50</span>;<br><span class="hljs-comment">--åˆå¹¶åå»é‡</span><br></code></pre></td></tr></table></figure><p><img src="/2022/04/05/mysql-study-function/image-20220407114746685.png" alt="image-20220407114746685"></p><p>union å¤šå¼ è¡¨çš„åˆ—æ•°å¿…é¡»ä¿æŒä¸€è‡´ï¼Œå­—æ®µç±»å‹ä¹Ÿå¿…é¡»ä¸€è‡´</p><h4 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h4><p><img src="/2022/04/05/mysql-study-function/image-20220407114953974.png" alt="image-20220407114953974"></p><h5 id="æ ‡é‡å­æŸ¥è¯¢"><a href="#æ ‡é‡å­æŸ¥è¯¢" class="headerlink" title="æ ‡é‡å­æŸ¥è¯¢"></a>æ ‡é‡å­æŸ¥è¯¢</h5><p><img src="/2022/04/05/mysql-study-function/image-20220407121703318.png" alt="image-20220407121703318"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407121942968.png" alt="image-20220407121942968"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407121954813.png" alt="image-20220407121954813"></p><h5 id="åˆ—å­æŸ¥è¯¢"><a href="#åˆ—å­æŸ¥è¯¢" class="headerlink" title="åˆ—å­æŸ¥è¯¢"></a>åˆ—å­æŸ¥è¯¢</h5><p><img src="/2022/04/05/mysql-study-function/image-20220407122143210.png" alt="image-20220407122143210"></p><p>ä¾‹å­ï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220407122314560.png" alt="image-20220407122314560"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407122526521.png" alt="image-20220407122526521"></p><p>ä¸ªäººç†è§£ä¸ºå°†å¾…æ¯”è¾ƒæ•°æ®ä½¿ç”¨æŸ¥è¯¢å¾—åˆ°çš„æ›¿æ¢æ¥å®Œæˆä¸€çº§ä¸€çº§çš„åµŒå¥—</p><p><img src="/2022/04/05/mysql-study-function/image-20220407122726837.png" alt="image-20220407122726837"></p><p>anyç”¨æ³•ä¸someç±»ä¼¼</p><h5 id="è¡Œå­—æŸ¥è¯¢"><a href="#è¡Œå­—æŸ¥è¯¢" class="headerlink" title="è¡Œå­—æŸ¥è¯¢"></a>è¡Œå­—æŸ¥è¯¢</h5><p><img src="/2022/04/05/mysql-study-function/image-20220407122928495.png" alt="image-20220407122928495"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407123121021.png" alt="image-20220407123121021"></p><h5 id="è¡¨å­æŸ¥è¯¢"><a href="#è¡¨å­æŸ¥è¯¢" class="headerlink" title="è¡¨å­æŸ¥è¯¢"></a>è¡¨å­æŸ¥è¯¢</h5><p><img src="/2022/04/05/mysql-study-function/image-20220407123258682.png" alt="image-20220407123258682"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407123433712.png" alt="image-20220407123433712"></p><p><img src="/2022/04/05/mysql-study-function/image-20220407123635693.png" alt="image-20220407123635693"></p><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><p><img src="/2022/04/05/mysql-study-function/image-20220408092931073.png" alt="image-20220408092931073"></p><p>æ¡ˆä¾‹è¡¨ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> account(<br>  id <span class="hljs-type">int</span> auto_increment <span class="hljs-keyword">primary</span> key comment <span class="hljs-string">&#x27;ä¸»é”®&#x27;</span>,<br>  name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>  money <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ä½™é¢&#x27;</span><br>)comment <span class="hljs-string">&#x27;è´¦æˆ·è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="äº‹åŠ¡æ“ä½œ"><a href="#äº‹åŠ¡æ“ä½œ" class="headerlink" title="äº‹åŠ¡æ“ä½œ"></a>äº‹åŠ¡æ“ä½œ</h4><p><img src="/2022/04/05/mysql-study-function/image-20220408093815776.png" alt="image-20220408093815776"></p><p>datagrip é»˜è®¤äº‹åŠ¡ä¸ºè‡ªåŠ¨æäº¤ï¼Œä¸ªäººç†è§£ä¸ºï¼Œä¸éœ€è¦æ‰‹åŠ¨æäº¤ï¼Œåœ¨æ‰§è¡Œsqlè¯­å¥åè‡ªåŠ¨å¯¹æ•°æ®åº“è¿›è¡Œå˜æ›´ï¼Œå¦‚æœè‡ªåŠ¨æäº¤åˆ™æ‰§è¡Œå®Œsqlè¯­å¥å°±ä¼šè‡ªåŠ¨æ›´æ”¹æ•°æ®åº“</p><p><img src="/2022/04/05/mysql-study-function/image-20220408094323641.png" alt="image-20220408094323641"></p><p>åœ¨æ‰§è¡Œäº†æ­¤è¯­å¥åäº‹åŠ¡éœ€è¦æ‰‹åŠ¨æäº¤è€Œä¸è€ƒè™‘é»˜è®¤çš„è‡ªåŠ¨æäº¤å±æ€§</p><h4 id="äº‹åŠ¡å››å¤§ç‰¹æ€§"><a href="#äº‹åŠ¡å››å¤§ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡å››å¤§ç‰¹æ€§"></a>äº‹åŠ¡å››å¤§ç‰¹æ€§</h4><p><img src="/2022/04/05/mysql-study-function/image-20220408094720179.png" alt="image-20220408094720179"></p><h4 id="å¹¶å‘äº‹åŠ¡é—®é¢˜"><a href="#å¹¶å‘äº‹åŠ¡é—®é¢˜" class="headerlink" title="å¹¶å‘äº‹åŠ¡é—®é¢˜"></a>å¹¶å‘äº‹åŠ¡é—®é¢˜</h4><p><img src="/2022/04/05/mysql-study-function/image-20220408094913592.png" alt="image-20220408094913592"></p><ol><li>è„è¯»é—®é¢˜æˆ‘è®¤ä¸ºæ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡è¿˜æœªç»“æŸæ—¶ï¼Œå¹¶å‘çš„äº‹åŠ¡è¿›è¡Œäº†æ›´æ”¹æ“ä½œå¯¼è‡´åŸäº‹åŠ¡è¯»å–åˆ°äº†ç¬¬äºŒä¸ªäº‹åŠ¡è¿˜æœªæäº¤çš„æ•°æ®</li><li>ä¸å¯é‡å¤è¯»æˆ‘è®¤ä¸ºæ˜¯åŸäº‹åŠ¡åœ¨æ‰§è¡Œäº†ç›¸åŒæŸ¥è¯¢è¯­å¥æ—¶ï¼Œç”±äºå¦å¤–çš„äº‹åŠ¡è¿›è¡Œäº†æ›´æ–°æ•°æ®çš„æäº¤å¯¼è‡´æŸ¥è¯¢ç»“æœä¸åŒ</li><li>å¹»è¯»æˆ‘è®¤ä¸ºæ˜¯åœ¨äº‹åŠ¡ä¸€æŸ¥è¯¢æ—¶ä¸å­˜åœ¨ï¼Œç„¶é¹…äº‹åŠ¡2è¿›è¡Œäº†æ’å…¥æ•°æ®å¹¶æäº¤ï¼Œäº‹åŠ¡1è¿›è¡Œæ’å…¥å‘ç°å·²å­˜åœ¨ã€‚</li></ol><h4 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h4><p><img src="/2022/04/05/mysql-study-function/image-20220408095400986.png" alt="image-20220408095400986"></p><p>æ“ä½œä»£ç ï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220408095422276.png" alt="image-20220408095422276"></p><p>æ¡ˆä¾‹ä»£ç ï¼š</p><p><img src="/2022/04/05/mysql-study-function/image-20220408095710524.png" alt="image-20220408095710524"></p>]]></content>
    
    
    <categories>
      
      <category>MySql</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mysql</tag>
      
      <tag>function</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_study_content</title>
    <link href="/2022/04/04/mysql-study-content/"/>
    <url>/2022/04/04/mysql-study-content/</url>
    
    <content type="html"><![CDATA[<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><h3 id="SQLé€šç”¨è¯­æ³•"><a href="#SQLé€šç”¨è¯­æ³•" class="headerlink" title="SQLé€šç”¨è¯­æ³•"></a>SQLé€šç”¨è¯­æ³•</h3><ol><li>å¯ä»¥å•è¡Œæˆ–å¤šè¡Œä¹¦å†™ï¼Œåˆ†å·ç»“å°¾</li><li>å¯ä»¥ä½¿ç”¨ç©ºæ ¼ç¼©è¿›</li><li>ä¸åˆ†å¤§å°å†™</li><li>â€“è¡¨ç¤ºå•è¡Œæ³¨é‡Šï¼Œ/**/å¤šè¡Œæ³¨é‡Š</li></ol><h3 id="SQLè¯­å¥åˆ†ç±»"><a href="#SQLè¯­å¥åˆ†ç±»" class="headerlink" title="SQLè¯­å¥åˆ†ç±»"></a>SQLè¯­å¥åˆ†ç±»</h3><p>â€‹    </p><table><thead><tr><th>åˆ†ç±»</th><th>å…¨ç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DDL</td><td>Data Definition Language</td><td>æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ï¼Œè¡¨ï¼Œå­—æ®µï¼‰</td></tr><tr><td>DML</td><td>Data Manipulation Language</td><td>æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹</td></tr><tr><td>DQL</td><td>Data Query Language</td><td>æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•</td></tr><tr><td>DCL</td><td>Data Control Language</td><td>æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼Œæ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™</td></tr></tbody></table><p>DDL å®šä¹‰æ•°æ® ç±»ä¼¼id name ..</p><h3 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h3><h4 id="æ•°æ®åº“æ“ä½œï¼š"><a href="#æ•°æ®åº“æ“ä½œï¼š" class="headerlink" title="æ•°æ®åº“æ“ä½œï¼š"></a>æ•°æ®åº“æ“ä½œï¼š</h4><h5 id="æŸ¥è¯¢ï¼š"><a href="#æŸ¥è¯¢ï¼š" class="headerlink" title="æŸ¥è¯¢ï¼š"></a>æŸ¥è¯¢ï¼š</h5><ol><li>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼š<code>SHOW DATABASES;</code></li><li>æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼š<code>SELECT DATABASE();</code></li></ol><p><img src="/2022/04/04/mysql-study-content/image-20220404154226262.png" alt="image-20220404154226262"></p><h5 id="åˆ›å»ºï¼š"><a href="#åˆ›å»ºï¼š" class="headerlink" title="åˆ›å»ºï¼š"></a>åˆ›å»ºï¼š</h5><p><code>CREATE DATABASES [IF NOT EXISTS] æ•°æ®åº“å [DEFAULT CHARSET å­—ç¬¦é›†] [COLLATE æ’åºè§„åˆ™];</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404154319963.png" alt="image-20220404154319963"></p><p>é‡å¤åˆ›å»ºç›¸åŒåæ•°æ®åº“ä¼šæŠ¥é”™ï¼›</p><p><img src="/2022/04/04/mysql-study-content/image-20220404154416482.png" alt="image-20220404154416482"></p><p>å¯ä½¿ç”¨ <code>if not exists</code>æ¥æ·»åŠ çº¦æŸ</p><p><img src="/2022/04/04/mysql-study-content/image-20220404154615053.png" alt="image-20220404154615053"></p><p>å¯¹äºæ•°æ®åº“ä¸­utf8å 3ä¸ªå­—èŠ‚ï¼Œè€Œæœ‰æ—¶æœ‰çš„å­—ç¬¦å ç”¨4ä¸ªå­—èŠ‚ï¼Œå› æ­¤å¯é€‰ç”¨utf8mb4æ¥è®¾ç½®å­—ç¬¦é›†</p><p><img src="/2022/04/04/mysql-study-content/image-20220404154846286.png" alt="image-20220404154846286"></p><h5 id="åˆ é™¤ï¼š"><a href="#åˆ é™¤ï¼š" class="headerlink" title="åˆ é™¤ï¼š"></a>åˆ é™¤ï¼š</h5><p><code>DROP DATABASE [IF EXITS] æ•°æ®åº“å;</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404155050354.png" alt="image-20220404155050354"></p><h5 id="ä½¿ç”¨ï¼š"><a href="#ä½¿ç”¨ï¼š" class="headerlink" title="ä½¿ç”¨ï¼š"></a>ä½¿ç”¨ï¼š</h5><p><code>USE æ•°æ®åº“å;</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404155216722.png" alt="image-20220404155216722"></p><p>åœ¨ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„ä½¿ç”¨åˆ†å· ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œè¯­å¥</p><h4 id="è¡¨æ“ä½œï¼š"><a href="#è¡¨æ“ä½œï¼š" class="headerlink" title="è¡¨æ“ä½œï¼š"></a>è¡¨æ“ä½œï¼š</h4><h5 id="æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š"><a href="#æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š" class="headerlink" title="æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š"></a>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š</h5><p><code>SHOW TABLES;</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404155735884.png" alt="image-20220404155735884"></p><h5 id="æŸ¥è¯¢è¡¨ç»“æ„ï¼š"><a href="#æŸ¥è¯¢è¡¨ç»“æ„ï¼š" class="headerlink" title="æŸ¥è¯¢è¡¨ç»“æ„ï¼š"></a>æŸ¥è¯¢è¡¨ç»“æ„ï¼š</h5><p><code>DESC è¡¨åï¼›</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404160607809.png" alt="image-20220404160607809"></p><h5 id="æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥"><a href="#æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥"></a>æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥</h5><p><code>SHOW CREATE TABLE è¡¨åï¼›</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404160656783.png" alt="image-20220404160656783"></p><h5 id="åˆ›å»ºï¼š-1"><a href="#åˆ›å»ºï¼š-1" class="headerlink" title="åˆ›å»ºï¼š"></a>åˆ›å»ºï¼š</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> è¡¨å(<br>å­—æ®µ<span class="hljs-number">1</span> å­—æ®µ<span class="hljs-number">1</span>ç±»å‹[COMMENT å­—æ®µ<span class="hljs-number">1</span>æ³¨é‡Š],<br>    å­—æ®µ<span class="hljs-number">2</span> å­—æ®µ<span class="hljs-number">2</span>ç±»å‹[COMMENT å­—æ®µ<span class="hljs-number">1</span>æ³¨é‡Š],<br>    å­—æ®µ<span class="hljs-number">3</span> å­—æ®µ<span class="hljs-number">3</span>ç±»å‹[COMMENT å­—æ®µ<span class="hljs-number">1</span>æ³¨é‡Š],<br>)[COMMENT è¡¨æ³¨é‡Š];<br></code></pre></td></tr></table></figure><p><img src="/2022/04/04/mysql-study-content/image-20220404160432218.png" alt="image-20220404160432218"></p><p>æ³¨æ„ï¼Œå€’æ•°ç¬¬äºŒè¡Œæœ«å°¾ä¸èƒ½æ·»åŠ <code>,</code>å·ï¼Œå¦åˆ™ä¼šå¯¼è‡´æŠ¥é”™</p><h5 id="æ•°æ®ç±»å‹ï¼š"><a href="#æ•°æ®ç±»å‹ï¼š" class="headerlink" title="æ•°æ®ç±»å‹ï¼š"></a>æ•°æ®ç±»å‹ï¼š</h5><p>ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šæ•°å€¼ç±»å‹ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼Œæ—¥æœŸæ—¶é—´ç±»å‹</p><h5 id="ä¿®æ”¹ï¼š"><a href="#ä¿®æ”¹ï¼š" class="headerlink" title="ä¿®æ”¹ï¼š"></a>ä¿®æ”¹ï¼š</h5><h6 id="æ·»åŠ å­—æ®µï¼š"><a href="#æ·»åŠ å­—æ®µï¼š" class="headerlink" title="æ·»åŠ å­—æ®µï¼š"></a>æ·»åŠ å­—æ®µï¼š</h6><p><code>ALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹ï¼ˆé•¿åº¦ï¼‰[comment æ³¨é‡Š] [çº¦æŸ]ï¼›</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404171005626.png" alt="image-20220404171005626"></p><h6 id="ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š"><a href="#ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š" class="headerlink" title="ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š"></a>ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š</h6><p><code>ALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];</code></p><h6 id="ä¿®æ”¹æ•°æ®ç±»å‹ï¼š"><a href="#ä¿®æ”¹æ•°æ®ç±»å‹ï¼š" class="headerlink" title="ä¿®æ”¹æ•°æ®ç±»å‹ï¼š"></a>ä¿®æ”¹æ•°æ®ç±»å‹ï¼š</h6><p><code>ALTER TABLE è¡¨å MODIFY å­—æ®µå æ–°æ•°æ®ç±»å‹(é•¿åº¦);</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404171730016.png" alt="image-20220404171730016"></p><h6 id="åˆ é™¤å­—æ®µ"><a href="#åˆ é™¤å­—æ®µ" class="headerlink" title="åˆ é™¤å­—æ®µ"></a>åˆ é™¤å­—æ®µ</h6><p><code>ALTER TABLE è¡¨å DROP å­—æ®µå;</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220404172025533.png" alt="image-20220404172025533"></p><h6 id="ä¿®æ”¹è¡¨åï¼š"><a href="#ä¿®æ”¹è¡¨åï¼š" class="headerlink" title="ä¿®æ”¹è¡¨åï¼š"></a>ä¿®æ”¹è¡¨åï¼š</h6><p><code>ALTER TABLE è¡¨å RENAME TO æ–°è¡¨å</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220405184804426.png" alt="image-20220405184804426"></p><h6 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h6><p><code>DROP TABLE [IF EXISTS]è¡¨å;</code></p><h6 id="åˆ é™¤æŒ‡å®šè¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨"><a href="#åˆ é™¤æŒ‡å®šè¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨" class="headerlink" title="åˆ é™¤æŒ‡å®šè¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨"></a>åˆ é™¤æŒ‡å®šè¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨</h6><p><code>TRUNCATE TABLE è¡¨å;</code></p><h3 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h3><h4 id="DMLæ·»åŠ æ•°æ®"><a href="#DMLæ·»åŠ æ•°æ®" class="headerlink" title="DMLæ·»åŠ æ•°æ®"></a>DMLæ·»åŠ æ•°æ®</h4><h5 id="1-ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®ï¼š"><a href="#1-ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®ï¼š" class="headerlink" title="1.ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®ï¼š"></a>1.ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®ï¼š</h5><p><code>INSERT INTO è¡¨å(å­—æ®µ1ï¼Œå­—æ®µ2ï¼Œ...) VALUES(å€¼1ï¼Œå€¼2,...);</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220405192848308.png" alt="image-20220405192848308"></p><p><img src="/2022/04/04/mysql-study-content/image-20220405192857376.png" alt="image-20220405192857376"></p><h5 id="2-ç»™å…¨éƒ¨å­—æ®µæ·»åŠ æ•°æ®"><a href="#2-ç»™å…¨éƒ¨å­—æ®µæ·»åŠ æ•°æ®" class="headerlink" title="2.ç»™å…¨éƒ¨å­—æ®µæ·»åŠ æ•°æ®"></a>2.ç»™å…¨éƒ¨å­—æ®µæ·»åŠ æ•°æ®</h5><p><code>INSERT INTO è¡¨åVALUES (å€¼1ï¼Œå€¼2);</code></p><h5 id="3-æ‰¹é‡æ·»åŠ æ•°æ®"><a href="#3-æ‰¹é‡æ·»åŠ æ•°æ®" class="headerlink" title="3.æ‰¹é‡æ·»åŠ æ•°æ®"></a>3.æ‰¹é‡æ·»åŠ æ•°æ®</h5><p><code>INSERT INTO è¡¨å(å­—æ®µ1,å­—æ®µ2)VALUES (å€¼1ï¼Œå€¼2),(å€¼1ï¼Œå€¼2);</code></p><p><code>INSERT INTOè¡¨åVALUES(å€¼1ï¼Œå€¼2),(å€¼1ï¼Œå€¼2)ï¼›</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220405193307038.png" alt="image-20220405193307038"></p><p><img src="/2022/04/04/mysql-study-content/image-20220405193321941.png" alt="image-20220405193321941"></p><h4 id="DMLä¿®æ”¹æ•°æ®"><a href="#DMLä¿®æ”¹æ•°æ®" class="headerlink" title="DMLä¿®æ”¹æ•°æ®"></a>DMLä¿®æ”¹æ•°æ®</h4><p><code>UPDATE è¡¨å SET å­—æ®µ1 = å€¼1 ï¼Œå­—æ®µ2 = å€¼2 ï¼Œ[WHERE æ¡ä»¶];</code></p><p>æµ‹è¯•1ï¼š</p><p><img src="/2022/04/04/mysql-study-content/image-20220405193646224.png" alt="image-20220405193646224"></p><p><img src="/2022/04/04/mysql-study-content/image-20220405193656394.png" alt="image-20220405193656394"></p><p>æµ‹è¯•2ï¼š</p><p><img src="/2022/04/04/mysql-study-content/image-20220405193736966.png" alt="image-20220405193736966"></p><p><img src="/2022/04/04/mysql-study-content/image-20220405193746746.png" alt="image-20220405193746746"></p><h4 id="DMLåˆ é™¤æ•°æ®"><a href="#DMLåˆ é™¤æ•°æ®" class="headerlink" title="DMLåˆ é™¤æ•°æ®"></a>DMLåˆ é™¤æ•°æ®</h4><p><code>DELETE FROM è¡¨å[WHERE æ¡ä»¶];</code></p><p><img src="/2022/04/04/mysql-study-content/image-20220405194505918.png" alt="image-20220405194505918"></p><p><img src="/2022/04/04/mysql-study-content/image-20220405194515090.png" alt="image-20220405194515090"></p><h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br>å­—æ®µåˆ—è¡¨<br><span class="hljs-keyword">FROM</span> <br>è¡¨ååˆ—è¡¨<br><span class="hljs-keyword">WHERE</span> <br>    æ¡ä»¶åˆ—è¡¨<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><br>åˆ†ç»„å­—æ®µåˆ—è¡¨<br><span class="hljs-keyword">HAVING</span> <br>åˆ†ç»„åæ¡ä»¶åˆ—è¡¨<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>æ’åºå­—æ®µåˆ—è¡¨<br>LIMIT<br>    åˆ†é¡µå‚æ•°<br></code></pre></td></tr></table></figure><h4 id="DQL-åŸºæœ¬æŸ¥è¯¢"><a href="#DQL-åŸºæœ¬æŸ¥è¯¢" class="headerlink" title="DQL åŸºæœ¬æŸ¥è¯¢"></a>DQL åŸºæœ¬æŸ¥è¯¢</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1.</span>æŸ¥è¯¢å¤šä¸ªå­—æ®µ<br><span class="hljs-keyword">SELECT</span> å­—æ®µ<span class="hljs-number">1</span> ,å­—æ®µ<span class="hljs-number">2</span>, ...<span class="hljs-keyword">FROM</span> è¡¨å;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> è¡¨å;<br><span class="hljs-number">2.</span>è®¾ç½®åˆ«å<br><span class="hljs-keyword">SELECT</span> å­—æ®µ<span class="hljs-number">1</span> [<span class="hljs-keyword">AS</span>  åˆ«å<span class="hljs-number">1</span>] ,å­—æ®µ<span class="hljs-number">2</span> [<span class="hljs-keyword">AS</span> åˆ«å<span class="hljs-number">2</span>]...<span class="hljs-keyword">FROM</span>è¡¨å;<br><span class="hljs-number">3.</span>å»é™¤é‡å¤è®°å½•<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span>è¡¨å;<br></code></pre></td></tr></table></figure><h4 id="DQL-æ¡ä»¶æŸ¥è¯¢"><a href="#DQL-æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="DQL æ¡ä»¶æŸ¥è¯¢"></a>DQL æ¡ä»¶æŸ¥è¯¢</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å <span class="hljs-keyword">WHERE</span> æ¡ä»¶åˆ—è¡¨<br></code></pre></td></tr></table></figure><p><img src="/2022/04/04/mysql-study-content/Screenshot_20220405-201322.png"></p><h4 id="DQLèšåˆå‡½æ•°"><a href="#DQLèšåˆå‡½æ•°" class="headerlink" title="DQLèšåˆå‡½æ•°"></a>DQLèšåˆå‡½æ•°</h4><p>å°†ä¸€åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¿›è¡Œçºµå‘è®¡ç®—</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>count</td><td>ç»Ÿè®¡æ•°é‡</td></tr><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr><tr><td>sum</td><td>æ±‚å’Œ</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) <span class="hljs-keyword">FROM</span> è¡¨å<br></code></pre></td></tr></table></figure><h4 id="DQLåˆ†ç»„æŸ¥è¯¢"><a href="#DQLåˆ†ç»„æŸ¥è¯¢" class="headerlink" title="DQLåˆ†ç»„æŸ¥è¯¢"></a>DQLåˆ†ç»„æŸ¥è¯¢</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å [<span class="hljs-keyword">WHERE</span> æ¡ä»¶]<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>åˆ†ç»„å­—æ®µå [<span class="hljs-keyword">HAVING</span> åˆ†ç»„åè¿‡æ»¤æ¡ä»¶];<br></code></pre></td></tr></table></figure><ol><li>where åˆ†ç»„å‰è¿‡æ»¤ having åˆ†ç»„åè¿‡æ»¤</li><li>whereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ having å¯ä»¥</li></ol><p><img src="/2022/04/04/mysql-study-content/QQ%E5%9B%BE%E7%89%8720220405213907.png"></p><h4 id="DQLæ’åºæŸ¥è¯¢"><a href="#DQLæ’åºæŸ¥è¯¢" class="headerlink" title="DQLæ’åºæŸ¥è¯¢"></a>DQLæ’åºæŸ¥è¯¢</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> å­—æ®µ<span class="hljs-number">1</span> æ’åºæ–¹å¼<span class="hljs-number">1</span> ï¼Œå­—æ®µ<span class="hljs-number">2</span> æ’åºæ–¹æ³•<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p>ASC:å‡åº å¯çœç•¥</p><p>DESCï¼šé™åº</p><p>å…ˆå¯¹å­—æ®µä¸€æ’åºååœ¨æ’å­—æ®µ2</p><h4 id="DQLåˆ†é¡µæŸ¥è¯¢"><a href="#DQLåˆ†é¡µæŸ¥è¯¢" class="headerlink" title="DQLåˆ†é¡µæŸ¥è¯¢"></a>DQLåˆ†é¡µæŸ¥è¯¢</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å LIMIT èµ·å§‹ç´¢å¼• ï¼ŒæŸ¥è¯¢è®°å½•æ•°;<br></code></pre></td></tr></table></figure><p>èµ·å§‹ç´¢å¼•ç”±0å¼€å§‹ï¼ŒæŸ¥ç¬¬å‡ é¡µå°±ç”¨ ï¼ˆé¡µç -1ï¼‰*é¡µå±•ç¤ºè®°å½•æ•°</p><h4 id="DQLæ‰§è¡Œé¡ºåº"><a href="#DQLæ‰§è¡Œé¡ºåº" class="headerlink" title="DQLæ‰§è¡Œé¡ºåº"></a>DQLæ‰§è¡Œé¡ºåº</h4><p><img src="/2022/04/04/mysql-study-content/QQ%E5%9B%BE%E7%89%8720220405222556.png" alt="QQå›¾ç‰‡20220405222556"></p><h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1.</span>æŸ¥è¯¢ç”¨æˆ·<br>USE mysql;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span>;<br><span class="hljs-number">2.</span>åˆ›å»ºç”¨æˆ·<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;å¯†ç &#x27;</span>;<br><span class="hljs-number">3.</span>ä¿®æ”¹ç”¨æˆ·å¯†ç <br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span> IDENTIFIED <span class="hljs-keyword">WITH</span> mysql_native_passwoed <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;æ–°å¯†ç &#x27;</span>;<br><span class="hljs-number">4.</span>åˆ é™¤ç”¨æˆ·<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br><br></code></pre></td></tr></table></figure><h4 id="DCLæƒé™æ§åˆ¶"><a href="#DCLæƒé™æ§åˆ¶" class="headerlink" title="DCLæƒé™æ§åˆ¶"></a>DCLæƒé™æ§åˆ¶</h4><p><img src="/2022/04/04/mysql-study-content/QQ%E5%9B%BE%E7%89%8720220405223848.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1.</span>æŸ¥è¯¢æƒé™<br><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br><span class="hljs-number">2.</span>æˆäºˆæƒé™<br><span class="hljs-keyword">GRANT</span> æƒé™åˆ—è¡¨ <span class="hljs-keyword">ON</span> æ•°æ®åº“å.è¡¨å <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br><span class="hljs-number">3.</span>æ’¤é”€æƒé™<br><span class="hljs-keyword">REVOKE</span> æƒé™åˆ—è¡¨ <span class="hljs-keyword">ON</span> æ•°æ®åº“å.è¡¨å <span class="hljs-keyword">FROM</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å…¨éƒ¨æƒé™å¯ä»¥ä½¿ç”¨ all</p>]]></content>
    
    
    <categories>
      
      <category>MySql</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mysql</tag>
      
      <tag>content</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mysql_study_prepare</title>
    <link href="/2022/04/02/mysql-study-prepare/"/>
    <url>/2022/04/02/mysql-study-prepare/</url>
    
    <content type="html"><![CDATA[<h2 id="MySql-å®‰è£…åŠå¯åŠ¨"><a href="#MySql-å®‰è£…åŠå¯åŠ¨" class="headerlink" title="MySql å®‰è£…åŠå¯åŠ¨"></a>MySql å®‰è£…åŠå¯åŠ¨</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>1<a href="https://dev.mysql.com/downloads/installer/">.ä¸‹è½½è¿æ¥</a></p><p>2.ä¹‹åç›´æ¥ä¸€è·¯nextå³å¯</p><img src="/2022/04/02/mysql-study-prepare/image-20220402222527326.png" alt="image-20220402222527326" style="zoom:50%;"><p>3.ç„¶åä¼šåœ¨è¿™é‡Œç­‰å¾…è®¸ä¹…</p><img src="/2022/04/02/mysql-study-prepare/image-20220402223347852.png" alt="image-20220402223347852" style="zoom:50%;"><p>4.æ³¨æ„æ­¤å¤„çš„ç«¯å£ä¸º3306ï¼Œ</p><img src="/2022/04/02/mysql-study-prepare/image-20220402223456779.png" alt="image-20220402223456779" style="zoom:50%;"><p>5.æ¥ä¸‹æ¥å¡«å†™rootç”¨æˆ·å¯†ç </p><p>6.æ¥ä¸‹æ¥ç›´æ¥ä¸€è·¯nextï¼Œfinishå³å¯</p><p>7.Windows ä¸‹éœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨</p><p>è·¯å¾„é»˜è®¤æ˜¯åœ¨C:\Program Files\MySQL\MySQL Server 8.0ä¸‹çš„ ï¼Œå› æ­¤åœ¨pathä¸­ç›´æ¥æ·»åŠ C:\Program Files\MySQL\MySQL Server 8.0\binå³å¯</p><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><h4 id="function-1"><a href="#function-1" class="headerlink" title="function_1:"></a>function_1:</h4><p>ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡windowså‘½ä»¤è¡Œå¯åŠ¨ï¼Œä½¿ç”¨win+ræ‰“å¼€çª—å£ï¼Œ</p><p>ç„¶åè¾“å…¥services.msc</p><p><img src="/2022/04/02/mysql-study-prepare/image-20220402224029463.png" alt="image-20220402224029463"></p><p>æ‰“å¼€å¦‚ä¸‹</p><img src="/2022/04/02/mysql-study-prepare/image-20220402224049040.png" alt="image-20220402224049040" style="zoom:50%;"><p><img src="/2022/04/02/mysql-study-prepare/image-20220402224132046.png" alt="image-20220402224132046"></p><h4 id="function-2"><a href="#function-2" class="headerlink" title="function_2:"></a>function_2:</h4><p>ä½¿ç”¨å‘½ä»¤è¡Œç®¡ç†å‘˜æ¨¡å¼</p><p>è¾“å…¥  <code>net start mysql80</code> å¯åŠ¨</p><p>â€‹         <code>net stop mysql80</code> å…³é—­</p><h3 id="å®¢æˆ·ç«¯è¿æ¥"><a href="#å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="å®¢æˆ·ç«¯è¿æ¥"></a>å®¢æˆ·ç«¯è¿æ¥</h3><h4 id="function-1-1"><a href="#function-1-1" class="headerlink" title="function_1:"></a>function_1:</h4><p><img src="/2022/04/02/mysql-study-prepare/image-20220402224759316.png" alt="image-20220402224759316"></p><p><img src="/2022/04/02/mysql-study-prepare/image-20220402224905815.png" alt="image-20220402224905815"></p><h4 id="function-2-1"><a href="#function-2-1" class="headerlink" title="function_2:"></a>function_2:</h4><p>åœ¨æ·»åŠ pathåï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨<code>mysql -h 127.0.0.1 -P 3306 -u root -p</code>è¿›è¡Œå¯åŠ¨ ï¼Œå…¶ä¸­ - p æŒ‡å®šç«¯å£</p><p>é»˜è®¤ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨-h -p</p><p><code>mysql -u root -p</code></p><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="1-å…³ç³»å‹æ•°æ®åº“-RDBMS"><a href="#1-å…³ç³»å‹æ•°æ®åº“-RDBMS" class="headerlink" title="1.å…³ç³»å‹æ•°æ®åº“(RDBMS)"></a>1.å…³ç³»å‹æ•°æ®åº“(RDBMS)</h4><p>æ¦‚å¿µï¼š å»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”±å¤šå¼ ç›¸äº’è¿æ¥çš„äºŒç»´è¡¨ç»„æˆçš„æ•°æ®åº“</p><p>ç‰¹ç‚¹ï¼š</p><ol><li>ä½¿ç”¨è¡¨å­˜å‚¨æ•°æ®ï¼Œæ ¼å¼ç»Ÿä¸€ï¼Œä¾¿äºç»´æŠ¤</li><li>ä½¿ç”¨SQLè¯­è¨€æ“ä½œï¼Œæ ‡å‡†ç»Ÿä¸€ï¼Œä½¿ç”¨æ–¹ä¾¿</li></ol><h4 id="2-æ•°æ®æ¨¡å‹"><a href="#2-æ•°æ®æ¨¡å‹" class="headerlink" title="2.æ•°æ®æ¨¡å‹"></a>2.æ•°æ®æ¨¡å‹</h4><p>å®¢æˆ·ç«¯ -&gt; DBMS- &gt;æ•°æ®åº“ -&gt;è¡¨</p><p>å…¶ä¸­DBMS(æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)å¯ä»¥ç®¡ç†å¤šä¸ªæ•°æ®åº“ ,æ¯ä¸ªæ•°æ®åº“ä¸­å¯ä»¥ç®¡ç†å¤šä¸ªè¡¨</p>]]></content>
    
    
    <categories>
      
      <category>MySql</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mysql</tag>
      
      <tag>prepare</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jetbackCompose_study</title>
    <link href="/2022/03/19/jetbackCompose-study/"/>
    <url>/2022/03/19/jetbackCompose-study/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>gradleå­¦ä¹ ç¬”è®°</title>
    <link href="/2022/01/29/gradle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/01/29/gradle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰å“ä¸­çš„jniå¼€å‘</title>
    <link href="/2021/10/22/%E5%AE%89%E5%8D%93%E4%B8%AD%E7%9A%84jni%E5%BC%80%E5%8F%91/"/>
    <url>/2021/10/22/%E5%AE%89%E5%8D%93%E4%B8%AD%E7%9A%84jni%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h2 id><a href="#" class="headerlink" title></a></h2><h2 id="å®‰å“ä¸­ä½¿ç”¨JNI"><a href="#å®‰å“ä¸­ä½¿ç”¨JNI" class="headerlink" title="å®‰å“ä¸­ä½¿ç”¨JNI"></a>å®‰å“ä¸­ä½¿ç”¨JNI</h2><h3 id="1-jniæ¦‚å¿µ"><a href="#1-jniæ¦‚å¿µ" class="headerlink" title="1.jniæ¦‚å¿µ"></a>1.jniæ¦‚å¿µ</h3><p>JNI æ˜¯æŒ‡ Java åŸç”Ÿæ¥å£ã€‚å®ƒå®šä¹‰äº† Android ä»å—ç®¡ç†ä»£ç ï¼ˆä½¿ç”¨ Java æˆ– Kotlin ç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼‰ç¼–è¯‘çš„å­—èŠ‚ç ä¸åŸç”Ÿä»£ç ï¼ˆä½¿ç”¨ C/C++ ç¼–å†™ï¼‰äº’åŠ¨çš„æ–¹å¼ã€‚</p><p>ä» JVM è§’åº¦ï¼Œå­˜åœ¨ä¸¤ç§ç±»å‹çš„ä»£ç ï¼šâ€œJavaâ€å’Œâ€œnativeâ€, native ä¸€èˆ¬æŒ‡çš„æ˜¯ c/c++ï¼Œä¸ºäº†ä½¿ java å’Œ native ç«¯èƒ½å¤Ÿè¿›è¡Œäº¤äº’ï¼Œjava è®¾è®¡äº† JNIï¼ˆjava native interfaceï¼‰ã€‚</p><p><code>JNI</code> å…è®¸<code>java</code>è™šæ‹Ÿæœºå†…è¿è¡Œçš„javaä»£ç ä¸C++ã€C++å’Œæ±‡ç¼–ç­‰å…¶ä»–ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åºå’Œåº“è¿›è¡Œäº’æ“ä½œã€‚</p><p>ä½¿ç”¨ native ä»£ç çš„ä¸»è¦åœºæ™¯ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ä»£ç æ•ˆç‡ï¼šä½¿ç”¨ native ä»£ç çš„æ€§èƒ½æ›´é«˜</li><li>è·¨å¹³å°ç‰¹æ€§ï¼šæ ‡å‡†Javaç±»åº“ä¸æ”¯æŒåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¾èµ–äºå¹³å°çš„ç‰¹æ€§ï¼Œæˆ–è€…å¸Œæœ›ç”¨è¾ƒä½çº§åˆ«çš„è¯­è¨€ï¼ˆå¦‚æ±‡ç¼–è¯­è¨€ï¼‰å®ç°ä¸€å°éƒ¨åˆ†æ—¶é—´å…³é”®å‹ä»£ç ã€‚</li></ul><p>native å±‚ä½¿ç”¨ <code>JNI</code> ä¸»è¦å¯ä»¥åšåˆ°ï¼š</p><ul><li>åˆ›å»ºã€æ£€æŸ¥å’Œæ›´æ–°Javaå¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼‰ã€‚</li><li>è°ƒç”¨Javaæ–¹æ³•ã€‚</li><li>åŠ è½½ç±»å¹¶è·å–ç±»ä¿¡æ¯ã€‚</li></ul><p>ç®€å•æ¥è¯´å°±æ˜¯<code>java/kotlin</code> å¼€å‘ä¸<code>c/c++</code>å¼€å‘ä¹‹é—´çš„æ¡¥æ¢</p><h3 id="2-android-studioä¸­é…ç½®ndk"><a href="#2-android-studioä¸­é…ç½®ndk" class="headerlink" title="2.android studioä¸­é…ç½®ndk"></a>2.<code>android studio</code>ä¸­é…ç½®<code>ndk</code></h3><p><code>ndk</code>:åŸç”Ÿå¼€å‘å¥—ä»¶ (<code>NDK</code>) æ˜¯Android Studioæä¾›çš„ä¸€å¥—å·¥å…·ï¼Œä½¿æ‚¨èƒ½å¤Ÿåœ¨ Android åº”ç”¨ä¸­ä½¿ç”¨ C å’Œ C++ ä»£ç ã€‚Android Studio ç¼–è¯‘åŸç”Ÿåº“çš„é»˜è®¤æ„å»ºå·¥å…·æ˜¯<code>CMake</code>ã€‚</p><h3 id="3-abi"><a href="#3-abi" class="headerlink" title="3.abi"></a>3.<code>abi</code></h3><p><code>abi</code>æ˜¯åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£ï¼ˆApplication Binary Interfaceï¼‰,ç”±äºä¼—å¤šå®‰å“æ‰‹æœºä½¿ç”¨çš„<code>cpu</code>ä¸åŒï¼Œä½¿å¾—å…¶æ”¯æŒçš„æŒ‡ä»¤é›†ä¸åŒï¼Œç›®å‰å®‰å“ä¸­ä¸»è¦ä½¿ç”¨<code>armeabiã€armeabi-v7aã€x86ã€mipsã€arm64-v8aã€mips64ã€x86_64ï¼š</code></p><p>åœ¨ä½¿ç”¨ndkæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨build.gradleæ–‡ä»¶ä¸­å¯¹å…¶è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy">android &#123;     <br>    ...     <br>        defaultConfig &#123;                <br>            ...         <br>            ndk &#123;            <br>                    <span class="hljs-comment">//è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„ï¼ˆå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦ï¼Œé€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªå¹³å°çš„soï¼‰            </span><br>                    abiFilters <span class="hljs-string">&quot;armeabi-v7a&quot;</span>, <span class="hljs-string">&quot;arm64-v8a&quot;</span>        <br>                &#125;    <br>        &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="4-åœ¨android-studioä¸­åˆ›å»º"><a href="#4-åœ¨android-studioä¸­åˆ›å»º" class="headerlink" title="4.åœ¨android studioä¸­åˆ›å»º"></a>4.åœ¨android studioä¸­åˆ›å»º</h3><h4 id="1-ç›´æ¥ä½¿ç”¨æ¨¡æ¿åˆ›å»º"><a href="#1-ç›´æ¥ä½¿ç”¨æ¨¡æ¿åˆ›å»º" class="headerlink" title="1.ç›´æ¥ä½¿ç”¨æ¨¡æ¿åˆ›å»º"></a>1.ç›´æ¥ä½¿ç”¨æ¨¡æ¿åˆ›å»º</h4><p><img src="/2021/10/22/%E5%AE%89%E5%8D%93%E4%B8%AD%E7%9A%84jni%E5%BC%80%E5%8F%91/image-20211022152313549.png" alt="image-20211022152313549"></p><p><img src="/2021/10/22/%E5%AE%89%E5%8D%93%E4%B8%AD%E7%9A%84jni%E5%BC%80%E5%8F%91/image-20211022152406911.png" alt="image-20211022152406911"></p><p>å¯é€‰æ‹©c++æ ‡å‡†</p><p>æ–‡ä»¶ç»“æ„ï¼š</p><p><img src="/2021/10/22/%E5%AE%89%E5%8D%93%E4%B8%AD%E7%9A%84jni%E5%BC%80%E5%8F%91/image-20211022152536256.png" alt="image-20211022152536256"></p><p>åœ¨activityä¸­ä½¿ç”¨</p><p>kotlin:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> &#123;<br>    <span class="hljs-comment">// Used to load the &#x27;jnibytemplete&#x27; library on application startup.</span><br>    <span class="hljs-keyword">init</span> &#123;<br>        System.loadLibrary(<span class="hljs-string">&quot;jnibytemplete&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> &#123;<br>   System.loadLibrary(<span class="hljs-string">&quot;jnibytemplete&quot;</span>);<span class="hljs-comment">//å¯¹åº”CMakeListsæ–‡ä»¶ä¸­çš„å†…å®¹</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥è¿›è¡Œå¼•å…¥</p><p>CMakeListsæ–‡ä»¶ï¼›</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">target_link_libraries</span>( <span class="hljs-comment"># Specifies the target library.</span><br>        jnibytemplete<br><br>        <span class="hljs-comment"># Links the target library to the log library</span><br>        <span class="hljs-comment"># included in the NDK.</span><br>        <span class="hljs-variable">$&#123;log-lib&#125;</span>)<br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦åˆ›å»ºæ–°çš„c++æ–‡ä»¶ï¼Œåˆ™åœ¨åˆ›å»ºåï¼Œå¯ä»¥åœ¨ cmakeä¸­æ·»åŠ </p><p>æ¯”å¦‚ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">project</span>(<span class="hljs-string">&quot;native_lib&quot;</span>)<br><span class="hljs-keyword">add_library</span>( <span class="hljs-comment"># Sets the name of the library.</span><br>        native_lib<br><br>        <span class="hljs-comment"># Sets the library as a shared library.</span><br>        SHARED<br><br>        <span class="hljs-comment"># Provides a relative path to your source file(s).</span><br>        native_lib.cpp )<br>        <br>        ............<br>        <span class="hljs-keyword">target_link_libraries</span>( <span class="hljs-comment"># Specifies the target library.</span><br>                       jnitest<br>                        native_lib//æ­¤å¤„æ·»åŠ <span class="hljs-keyword">project</span>åå³å¯<br>                       <span class="hljs-comment"># Links the target library to the log library</span><br>                       <span class="hljs-comment"># included in the NDK.</span><br>                       <span class="hljs-variable">$&#123;log-lib&#125;</span> )<br>        <br></code></pre></td></tr></table></figure><h4 id="2-å·²æœ‰å·¥ç¨‹ä¸­åˆ›å»º"><a href="#2-å·²æœ‰å·¥ç¨‹ä¸­åˆ›å»º" class="headerlink" title="2.å·²æœ‰å·¥ç¨‹ä¸­åˆ›å»º"></a>2.å·²æœ‰å·¥ç¨‹ä¸­åˆ›å»º</h4><p>åœ¨app/src/mainæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºCMakeLists.txtæ–‡ä»¶å’Œnative-lib.cppï¼ˆåå­—éšæ„ï¼‰</p><p>é…ç½®ä¸ä½¿ç”¨æ¨¡æ¿åˆ›å»ºä¸€è‡´å³å¯</p><p>å¦å¤–éœ€è¦åœ¨åœ¨ app/build.gradle ä¸­æŒ‡å®šcmake ç¼–è¯‘æ–‡ä»¶è·¯å¾„</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cmake">android &#123;<br> <br>    .......<br> <br>    externalNativeBuild &#123;<br>        cmake &#123;<br>            path <span class="hljs-string">&quot;src/main/cpp/CMakeLists.txt&quot;</span><br>            version <span class="hljs-string">&quot;3.10.2&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å®‰å“å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>android</tag>
      
      <tag>jni</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javaè®¾è®¡æ¨¡å¼ã€Š3ã€‹-åˆ›å»ºå‹æ¨¡å¼</title>
    <link href="/2021/10/18/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A3%E3%80%8B-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
    <url>/2021/10/18/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A3%E3%80%8B-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="javaè®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºè€…æ¨¡å¼"><a href="#javaè®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºè€…æ¨¡å¼" class="headerlink" title="javaè®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºè€…æ¨¡å¼"></a>javaè®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºè€…æ¨¡å¼</h2><p>åˆ›å»ºè€…æ¨¡å¼ä¸»è¦å…³æ³¨ç‚¹åœ¨äºå¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä¸»è¦ç‰¹ç‚¹æ˜¯â€œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»â€ï¼Œç›®çš„åœ¨äºé™ä½ç³»ç»Ÿè€¦åˆåº¦ï¼Œä½¿ç”¨è€…ä¸éœ€è¦å…³æ³¨å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç›¸å…³çš„å·¥å‚æ¥å®Œæˆã€‚</p><p>23ç§è®¾è®¡æ¨¡å¼ä¸­å±äºåˆ›å»ºè€…æ¨¡å¼çš„æœ‰ä»¥ä¸‹æ¨¡å¼ï¼š</p><ul><li>å•ä¾‹ï¼ˆSingletonï¼‰æ¨¡å¼ï¼šæŸä¸ªç±»åªèƒ½ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œè¯¥ç±»æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ä¾›å¤–éƒ¨è·å–è¯¥å®ä¾‹ï¼Œå…¶æ‹“å±•æ˜¯æœ‰é™å¤šä¾‹æ¨¡å¼ã€‚</li><li>åŸå‹ï¼ˆPrototypeï¼‰æ¨¡å¼ï¼šå°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¯¹å…¶è¿›è¡Œå¤åˆ¶è€Œå…‹éš†å‡ºå¤šä¸ªå’ŒåŸå‹ç±»ä¼¼çš„æ–°å®ä¾‹ã€‚</li><li>å·¥å‚æ–¹æ³•ï¼ˆFactoryMethodï¼‰æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºäº§å“çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šç”Ÿäº§ä»€ä¹ˆäº§å“ã€‚</li><li>æŠ½è±¡å·¥å‚ï¼ˆAbstractFactoryï¼‰æ¨¡å¼ï¼šæä¾›ä¸€ä¸ªåˆ›å»ºäº§å“æ—çš„æ¥å£ï¼Œå…¶æ¯ä¸ªå­ç±»å¯ä»¥ç”Ÿäº§ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ã€‚</li><li>å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡åˆ†è§£æˆå¤šä¸ªç›¸å¯¹ç®€å•çš„éƒ¨åˆ†ï¼Œç„¶åæ ¹æ®ä¸åŒéœ€è¦åˆ†åˆ«åˆ›å»ºå®ƒä»¬ï¼Œæœ€åæ„å»ºæˆè¯¥å¤æ‚å¯¹è±¡ã€‚</li></ul><p>å…¶ä¸­å·¥å‚æ–¹æ³•æ¨¡å¼å±äºç±»åˆ›å»ºï¼Œå…¶ä»–çš„å±äºå¯¹è±¡åˆ›å»º</p><h3 id="1-å•ä¾‹æ¨¡å¼"><a href="#1-å•ä¾‹æ¨¡å¼" class="headerlink" title="1.å•ä¾‹æ¨¡å¼"></a>1.å•ä¾‹æ¨¡å¼</h3><p>å•ä¾‹ï¼ˆSingletonï¼‰æ¨¡å¼çš„å®šä¹‰ï¼šæŒ‡ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¸”è¯¥ç±»èƒ½è‡ªè¡Œåˆ›å»ºè¿™ä¸ªå®ä¾‹çš„ä¸€ç§æ¨¡å¼ã€‚</p><p>ä½¿å¾—é™ä½é¢‘ç¹åˆ›å»ºåŒä¸€ç±»çš„å¯¹è±¡çš„å†…å­˜æ¶ˆè€—ï¼Œä»¥åŠå¯¹èµ„æºçš„å•ä¸€ç®¡ç†</p><h4 id="å•ä¾‹æ¨¡å¼çš„ç‰¹ç‚¹ï¼š"><a href="#å•ä¾‹æ¨¡å¼çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„ç‰¹ç‚¹ï¼š"></a>å•ä¾‹æ¨¡å¼çš„ç‰¹ç‚¹ï¼š</h4><ol><li>å•ä¾‹ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼›</li><li>è¯¥å•ä¾‹å¯¹è±¡å¿…é¡»ç”±å•ä¾‹ç±»è‡ªè¡Œåˆ›å»ºï¼›</li><li>å•ä¾‹ç±»å¯¹å¤–æä¾›ä¸€ä¸ªè®¿é—®è¯¥å•ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</li></ol><h4 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h4><ul><li>å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯å†…å­˜é‡Œåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜çš„å¼€é”€ã€‚</li><li>å¯ä»¥é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ã€‚</li><li>å•ä¾‹æ¨¡å¼è®¾ç½®å…¨å±€è®¿é—®ç‚¹ï¼Œå¯ä»¥ä¼˜åŒ–å’Œå…±äº«èµ„æºçš„è®¿é—®ã€‚</li></ul><h4 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ul><li>å•ä¾‹æ¨¡å¼ä¸€èˆ¬æ²¡æœ‰æ¥å£ï¼Œæ‰©å±•å›°éš¾ã€‚å¦‚æœè¦æ‰©å±•ï¼Œåˆ™é™¤äº†ä¿®æ”¹åŸæ¥çš„ä»£ç ï¼Œæ²¡æœ‰ç¬¬äºŒç§é€”å¾„ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ã€‚</li><li>åœ¨å¹¶å‘æµ‹è¯•ä¸­ï¼Œå•ä¾‹æ¨¡å¼ä¸åˆ©äºä»£ç è°ƒè¯•ã€‚åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå•ä¾‹ä¸­çš„ä»£ç æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä¹Ÿä¸èƒ½æ¨¡æ‹Ÿç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</li><li>å•ä¾‹æ¨¡å¼çš„åŠŸèƒ½ä»£ç é€šå¸¸å†™åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œå¦‚æœåŠŸèƒ½è®¾è®¡ä¸åˆç†ï¼Œåˆ™å¾ˆå®¹æ˜“è¿èƒŒå•ä¸€èŒè´£åŸåˆ™ã€‚</li></ul><h4 id="åº”ç”¨åœºæ™¯ï¼š"><a href="#åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a>åº”ç”¨åœºæ™¯ï¼š</h4><ul><li>éœ€è¦é¢‘ç¹åˆ›å»ºçš„ä¸€äº›ç±»ï¼Œä½¿ç”¨å•ä¾‹å¯ä»¥é™ä½ç³»ç»Ÿçš„å†…å­˜å‹åŠ›ï¼Œå‡å°‘ GCã€‚</li><li>æŸç±»åªè¦æ±‚ç”Ÿæˆä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚ä¸€ä¸ªç­ä¸­çš„ç­é•¿ã€æ¯ä¸ªäººçš„èº«ä»½è¯å·ç­‰ã€‚</li><li>æŸäº›ç±»åˆ›å»ºå®ä¾‹æ—¶å ç”¨èµ„æºè¾ƒå¤šï¼Œæˆ–å®ä¾‹åŒ–è€—æ—¶è¾ƒé•¿ï¼Œä¸”ç»å¸¸ä½¿ç”¨ã€‚</li><li>æŸç±»éœ€è¦é¢‘ç¹å®ä¾‹åŒ–ï¼Œè€Œåˆ›å»ºçš„å¯¹è±¡åˆé¢‘ç¹è¢«é”€æ¯çš„æ—¶å€™ï¼Œå¦‚å¤šçº¿ç¨‹çš„çº¿ç¨‹æ± ã€ç½‘ç»œè¿æ¥æ± ç­‰ã€‚</li><li>é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡ã€‚</li><li>å¯¹äºä¸€äº›æ§åˆ¶ç¡¬ä»¶çº§åˆ«çš„æ“ä½œï¼Œæˆ–è€…ä»ç³»ç»Ÿä¸Šæ¥è®²åº”å½“æ˜¯å•ä¸€æ§åˆ¶é€»è¾‘çš„æ“ä½œï¼Œå¦‚æœæœ‰å¤šä¸ªå®ä¾‹ï¼Œåˆ™ç³»ç»Ÿä¼šå®Œå…¨ä¹±å¥—ã€‚</li><li>å½“å¯¹è±¡éœ€è¦è¢«å…±äº«çš„åœºåˆã€‚ç”±äºå•ä¾‹æ¨¡å¼åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå…±äº«è¯¥å¯¹è±¡å¯ä»¥èŠ‚çœå†…å­˜ï¼Œå¹¶åŠ å¿«å¯¹è±¡è®¿é—®é€Ÿåº¦ã€‚å¦‚ Web ä¸­çš„é…ç½®å¯¹è±¡ã€æ•°æ®åº“çš„è¿æ¥æ± ç­‰ã€‚</li></ul><p>åœ¨å®‰å“å¼€å‘ä¸­æ¯”è¾ƒå¸¸è§ä½¿ç”¨å•ä¾‹æœ‰retrofitä¸æ•°æ®åº“</p><h4 id="å•ä¾‹æ¨¡å¼çš„ç»“æ„ï¼š"><a href="#å•ä¾‹æ¨¡å¼çš„ç»“æ„ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„ç»“æ„ï¼š"></a>å•ä¾‹æ¨¡å¼çš„ç»“æ„ï¼š</h4><ul><li>å•ä¾‹ç±»ï¼šåŒ…å«ä¸€ä¸ªå®ä¾‹ä¸”èƒ½è‡ªè¡Œåˆ›å»ºè¿™ä¸ªå®ä¾‹çš„ç±»ã€‚</li><li>è®¿é—®ç±»ï¼šä½¿ç”¨å•ä¾‹çš„ç±»ã€‚</li></ul><p>ç®€å•çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨å•ä¾‹å°è£…çš„retrofitä¸ä½¿ç”¨å®ƒçš„repository</p><h4 id="å•ä¾‹æ¨¡å¼çš„å®ç°ï¼š"><a href="#å•ä¾‹æ¨¡å¼çš„å®ç°ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„å®ç°ï¼š"></a>å•ä¾‹æ¨¡å¼çš„å®ç°ï¼š</h4><h5 id="1-é¥¿æ±‰å¼"><a href="#1-é¥¿æ±‰å¼" class="headerlink" title="1.é¥¿æ±‰å¼"></a>1.é¥¿æ±‰å¼</h5><p>è¯¥æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯ç±»ä¸€æ—¦åŠ è½½å°±åˆ›å»ºä¸€ä¸ªå•ä¾‹ï¼Œä¿è¯åœ¨è°ƒç”¨ getInstance æ–¹æ³•ä¹‹å‰å•ä¾‹å·²ç»å­˜åœ¨äº†ã€‚</p><p>è¿™é‡Œä¸Kotlinä¸­çš„objectè¿›è¡Œå¯¹æ¯”ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Javaå®ç°</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SingletonDemo instance=<span class="hljs-keyword">new</span> SingletonDemo();<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SingletonDemo</span><span class="hljs-params">()</span></span>&#123;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SingletonDemo <span class="hljs-title">getInstance</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//Kotlinå®ç°</span><br><span class="hljs-keyword">object</span> SingletonDemo<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œä»–ä»¬æ˜¯ç­‰æ•ˆçš„</p><h5 id="2-æ‡’æ±‰å¼"><a href="#2-æ‡’æ±‰å¼" class="headerlink" title="2.æ‡’æ±‰å¼"></a>2.æ‡’æ±‰å¼</h5><p>ç‰¹ç‚¹æ˜¯ç±»åŠ è½½æ—¶æ²¡æœ‰ç”Ÿæˆå•ä¾‹ï¼Œåªæœ‰å½“ç¬¬ä¸€æ¬¡è°ƒç”¨ getlnstance æ–¹æ³•æ—¶æ‰å»åˆ›å»ºè¿™ä¸ªå•ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SingletonDemo instance;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SingletonDemo</span><span class="hljs-params">()</span></span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SingletonDemo <span class="hljs-title">getInstance</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(instance==<span class="hljs-keyword">null</span>)&#123;<br>            instance=<span class="hljs-keyword">new</span> SingletonDemo();<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨kotlinè¿›è¡Œæ‡’æ±‰å¼</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span></span>() &#123;<br>    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> &#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> instance: SingletonDemo? = <span class="hljs-literal">null</span><br>            <span class="hljs-keyword">get</span>() &#123;<br>                <span class="hljs-keyword">if</span> (field == <span class="hljs-literal">null</span>) &#123;<br>                    field = SingletonDemo()<br>                &#125;<br>                <span class="hljs-keyword">return</span> field<br>            &#125;<br>        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>: SingletonDemo&#123;<br>        <span class="hljs-comment">//è¿™é‡Œä¸ç”¨getInstanceä½œä¸ºä¸ºæ–¹æ³•åï¼Œæ˜¯å› ä¸ºåœ¨ä¼´ç”Ÿå¯¹è±¡å£°æ˜æ—¶ï¼Œå†…éƒ¨å·²æœ‰getInstanceæ–¹æ³•ï¼Œæ‰€ä»¥åªèƒ½å–å…¶ä»–åå­—</span><br>         <span class="hljs-keyword">return</span> instance!!<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼"><a href="#3-çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼" class="headerlink" title="3.çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼"></a>3.çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼</h5><p>ç”±äºä½¿ç”¨æ‡’æ±‰å¼ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åŒæ­¥é” synchronized</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SingletonDemo instance;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SingletonDemo</span><span class="hljs-params">()</span></span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> SingletonDemo <span class="hljs-title">getInstance</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-comment">//ä½¿ç”¨åŒæ­¥é”</span><br>        <span class="hljs-keyword">if</span>(instance==<span class="hljs-keyword">null</span>)&#123;<br>            instance=<span class="hljs-keyword">new</span> SingletonDemo();<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„æ­¤å¤„çš„å•ä¾‹ä»ç„¶æ˜¯ä¸èƒ½çº¿ç¨‹å…±äº«çš„ï¼Œæ˜¯çº¿ç¨‹éš”ç¦»çš„ï¼Œå¯ä»¥æ·»åŠ <code>volatile</code>æ¥ä½¿å¾—çº¿ç¨‹å¯è§</p><p>kotlinå®ç°</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span></span>() &#123;<br>    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> &#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> instance: SingletonDemo? = <span class="hljs-literal">null</span><br>            <span class="hljs-keyword">get</span>() &#123;<br>                <span class="hljs-keyword">if</span> (field == <span class="hljs-literal">null</span>) &#123;<br>                    field = SingletonDemo()<br>                &#125;<br>                <span class="hljs-keyword">return</span> field<br>            &#125;<br>        <span class="hljs-meta">@Synchronized</span><br>        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>: SingletonDemo&#123;<br>            <span class="hljs-keyword">return</span> instance!!<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šä¸€ä¸ªæ™®é€šæ‡’æ±‰å¼åŸºç¡€ä¸Šæ·»åŠ @Synchonizedå…³é”®å­—ï¼Œä½¿å¾—è·å–å•ä¾‹æ˜¯åŒæ­¥çš„</p><h5 id="4-åŒé‡æ ¡éªŒé”å¼"><a href="#4-åŒé‡æ ¡éªŒé”å¼" class="headerlink" title="4.åŒé‡æ ¡éªŒé”å¼"></a>4.åŒé‡æ ¡éªŒé”å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">static</span> SingletonDemo instance;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SingletonDemo</span><span class="hljs-params">()</span></span>&#123;&#125; <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SingletonDemo <span class="hljs-title">getInstance</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(instance==<span class="hljs-keyword">null</span>)&#123;<br>            <span class="hljs-keyword">synchronized</span> (SingletonDemo.class)&#123;<br>                <span class="hljs-keyword">if</span>(instance==<span class="hljs-keyword">null</span>)&#123;<br>                    instance=<span class="hljs-keyword">new</span> SingletonDemo();<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>kotlin:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span></span>() &#123;<br>    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> &#123;<br>        <span class="hljs-keyword">val</span> instance: SingletonDemo <span class="hljs-keyword">by</span> lazy(mode = LazyThreadSafetyMode.SYNCHRONIZED) &#123;<br>        SingletonDemo() &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span></span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> property: <span class="hljs-built_in">Int</span>) &#123;<span class="hljs-comment">//è¿™é‡Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚å‘ç”Ÿæ”¹å˜</span><br>  <br>    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> &#123;<br>        <span class="hljs-meta">@Volatile</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> instance: SingletonDemo? = <span class="hljs-literal">null</span><br>        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getInstance</span><span class="hljs-params">(property: <span class="hljs-type">Int</span>)</span></span> =<br>                instance ?: synchronized(<span class="hljs-keyword">this</span>) &#123;<br>                    instance ?: SingletonDemo(property).also &#123; instance = it &#125;<br>                &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»™double checkæ·»åŠ å±æ€§ï¼Œæ­¤å¤„çš„?:è¡¨è¾¾å¼è¡¨ç¤ºä¸ºå·¦ä¾§ä¸ä¸ºç©ºè¿”å›å·¦ä¾§ï¼Œå¦åˆ™æ‰§è¡Œå³ä¾§ï¼Œç®€å•ç‚¹è¯´å°±æ˜¯å³ä¾§æ˜¯é»˜è®¤å€¼çš„æ„æ€</p><h5 id="5-é™æ€å†…éƒ¨ç±»å¼"><a href="#5-é™æ€å†…éƒ¨ç±»å¼" class="headerlink" title="5.é™æ€å†…éƒ¨ç±»å¼"></a>5.é™æ€å†…éƒ¨ç±»å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Javaå®ç°</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonDemo</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingletonHolder</span></span>&#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SingletonDemo instance=<span class="hljs-keyword">new</span> SingletonDemo();<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SingletonDemo</span><span class="hljs-params">()</span></span>&#123;<br>        <br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SingletonDemo <span class="hljs-title">getInstance</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> SingletonHolder.instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p> staticä¿®é¥°è¡¨ç¤ºé™æ€çš„ï¼Œåœ¨ç±»åŠ è½½æ—¶JVMä¼šæŠŠå®ƒæ”¾åˆ°æ–¹æ³•åŒºï¼Œè¢«æœ¬ç±»ä»¥åŠæœ¬ç±»ä¸­æ‰€æœ‰å®ä¾‹æ‰€å…¬ç”¨ã€‚</p><p>æ‰€ä»¥æ­¤æ—¶çš„é™æ€å†…éƒ¨ç±»æ‰€åŒ…è£¹çš„instanceå°†ä¼šåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¿æŒå”¯ä¸€æ€§ï¼Œå¾—åˆ°çš„å®ä¾‹ä¹Ÿå°†æ˜¯å”¯ä¸€çš„</p><p><a href="https://juejin.cn/post/6844903791863529480">é™æ€å†…éƒ¨ç±»ä¸å†…éƒ¨ç±»çš„åŒºåˆ«</a></p><h3 id="2-åŸå‹æ¨¡å¼ï¼ˆå…‹éš†æ¨¡å¼ï¼‰"><a href="#2-åŸå‹æ¨¡å¼ï¼ˆå…‹éš†æ¨¡å¼ï¼‰" class="headerlink" title="2.åŸå‹æ¨¡å¼ï¼ˆå…‹éš†æ¨¡å¼ï¼‰"></a>2.åŸå‹æ¨¡å¼ï¼ˆå…‹éš†æ¨¡å¼ï¼‰</h3><p>åŸå‹ï¼ˆPrototypeï¼‰æ¨¡å¼çš„å®šä¹‰å¦‚ä¸‹ï¼šç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºçš„å®ä¾‹ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¤åˆ¶è¯¥åŸå‹å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªå’ŒåŸå‹ç›¸åŒæˆ–ç›¸ä¼¼çš„æ–°å¯¹è±¡ã€‚åœ¨è¿™é‡Œï¼ŒåŸå‹å®ä¾‹æŒ‡å®šäº†è¦åˆ›å»ºçš„å¯¹è±¡çš„ç§ç±»ã€‚ç”¨è¿™ç§æ–¹å¼åˆ›å»ºå¯¹è±¡éå¸¸é«˜æ•ˆï¼Œæ ¹æœ¬æ— é¡»çŸ¥é“å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ã€‚</p><h4 id="ä¼˜ç‚¹ï¼š-1"><a href="#ä¼˜ç‚¹ï¼š-1" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h4><ul><li>Javaè‡ªå¸¦çš„åŸå‹æ¨¡å¼åŸºäºå†…å­˜äºŒè¿›åˆ¶æµçš„å¤åˆ¶ï¼Œåœ¨æ€§èƒ½ä¸Šæ¯”ç›´æ¥ new ä¸€ä¸ªå¯¹è±¡æ›´åŠ ä¼˜è‰¯ã€‚</li><li>å¯ä»¥ä½¿ç”¨æ·±å…‹éš†æ–¹å¼ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼å°†å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œå¹¶å°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œç®€åŒ–äº†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œä»¥ä¾¿åœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨ï¼ˆä¾‹å¦‚æ¢å¤åˆ°å†å²æŸä¸€çŠ¶æ€ï¼‰ï¼Œå¯è¾…åŠ©å®ç°æ’¤é”€æ“ä½œã€‚</li></ul><h4 id="ç¼ºç‚¹ï¼š-1"><a href="#ç¼ºç‚¹ï¼š-1" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ul><li>éœ€è¦ä¸ºæ¯ä¸€ä¸ªç±»éƒ½é…ç½®ä¸€ä¸ª clone æ–¹æ³•</li><li>clone æ–¹æ³•ä½äºç±»çš„å†…éƒ¨ï¼Œå½“å¯¹å·²æœ‰ç±»è¿›è¡Œæ”¹é€ çš„æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚</li><li>å½“å®ç°æ·±å…‹éš†æ—¶ï¼Œéœ€è¦ç¼–å†™è¾ƒä¸ºå¤æ‚çš„ä»£ç ï¼Œè€Œä¸”å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤šé‡åµŒå¥—å¼•ç”¨æ—¶ï¼Œä¸ºäº†å®ç°æ·±å…‹éš†ï¼Œæ¯ä¸€å±‚å¯¹è±¡å¯¹åº”çš„ç±»éƒ½å¿…é¡»æ”¯æŒæ·±å…‹éš†ï¼Œå®ç°èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚å› æ­¤ï¼Œæ·±å…‹éš†ã€æµ…å…‹éš†éœ€è¦è¿ç”¨å¾—å½“ã€‚</li></ul><p>ä¸€èˆ¬æ¥è¯´é»˜è®¤æ‰§è¡Œçš„æ˜¯æµ…æ‹·è´</p><h4 id="å®ç°ï¼š"><a href="#å®ç°ï¼š" class="headerlink" title="å®ç°ï¼š"></a>å®ç°ï¼š</h4><h5 id="1-ç»“æ„åˆ’åˆ†ï¼š"><a href="#1-ç»“æ„åˆ’åˆ†ï¼š" class="headerlink" title="1.ç»“æ„åˆ’åˆ†ï¼š"></a>1.ç»“æ„åˆ’åˆ†ï¼š</h5><p>åŸå‹æ¨¡å¼åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ã€‚</p><ol><li>æŠ½è±¡åŸå‹ç±»ï¼šè§„å®šäº†å…·ä½“åŸå‹å¯¹è±¡å¿…é¡»å®ç°çš„æ¥å£ã€‚</li><li>å…·ä½“åŸå‹ç±»ï¼šå®ç°æŠ½è±¡åŸå‹ç±»çš„ clone() æ–¹æ³•ï¼Œå®ƒæ˜¯å¯è¢«å¤åˆ¶çš„å¯¹è±¡ã€‚</li><li>è®¿é—®ç±»ï¼šä½¿ç”¨å…·ä½“åŸå‹ç±»ä¸­çš„ clone() æ–¹æ³•æ¥å¤åˆ¶æ–°çš„å¯¹è±¡ã€‚</li></ol><h5 id="2-ä»£ç å®ç°ï¼š"><a href="#2-ä»£ç å®ç°ï¼š" class="headerlink" title="2.ä»£ç å®ç°ï¼š"></a>2.ä»£ç å®ç°ï¼š</h5><p>åŸå‹æ¨¡å¼çš„æ·±æ‹·è´ä¸æµ…æ‹·è´å­˜åœ¨ä»¥ä¸‹åŒºåˆ«ï¼š</p><ul><li>æµ…å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡çš„å±æ€§å’ŒåŸæ¥å¯¹è±¡å®Œå…¨ç›¸åŒï¼Œå¯¹äºéåŸºæœ¬ç±»å‹å±æ€§ï¼Œä»æŒ‡å‘åŸæœ‰å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚</li><li>æ·±å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå±æ€§ä¸­å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿä¼šè¢«å…‹éš†ï¼Œä¸å†æŒ‡å‘åŸæœ‰å¯¹è±¡åœ°å€ã€‚</li></ul><p>åœ¨å®é™…æ„Ÿå—ä¸Šï¼šæµ…æ‹·è´åªæ˜¯æ‹·è´äº†æºå¯¹è±¡çš„åœ°å€ï¼Œæ‰€ä»¥æºå¯¹è±¡çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‹·è´å¯¹è±¡çš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚è€Œæ·±æ‹·è´åˆ™æ˜¯æ‹·è´äº†æºå¯¹è±¡çš„æ‰€æœ‰å€¼ï¼Œæ‰€ä»¥å³ä½¿æºå¯¹è±¡çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‹·è´å¯¹è±¡çš„å€¼ä¹Ÿä¸ä¼šæ”¹å˜ã€‚</p><img src="/2021/10/18/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A3%E3%80%8B-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/166750fcb9394c44tplv-t2oaga2asx-watermark.awebp" alt="img" style="zoom: 67%;"><p>åœ¨å®ç°æ·±æ‹·è´ä¸Šæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è°ƒç”¨æ„é€ å‡½æ•°è¿›è¡Œæ·±æ‹·è´ï¼Œå½¢å‚å¦‚æœæ˜¯åŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²åˆ™ç›´æ¥èµ‹å€¼ï¼Œå¦‚æœæ˜¯å¯¹è±¡åˆ™é‡æ–°newä¸€ä¸ªã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Address address = <span class="hljs-keyword">new</span> Address(<span class="hljs-string">&quot;æ­å·&quot;</span>,<span class="hljs-string">&quot;ä¸­å›½&quot;</span>);<br>User user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;s&quot;</span>,address);<br>User copy = <span class="hljs-keyword">new</span> User(user.getName(),<span class="hljs-keyword">new</span> Address(address.getCity(),address.getCountry()));<br>user.getAddress().setCity(<span class="hljs-string">&quot;ss&quot;</span>);<br>System.out.println(user.hashCode()==copy.hashCode());<br></code></pre></td></tr></table></figure><p>ç”±äºjava æœ¬èº«æä¾›äº†cloneæ–¹æ³•ï¼Œæˆ‘ä»¬ä¹‹éœ€è¦é‡å†™æ–¹æ³•å³å¯å®ç°æµ…æ‹·è´ï¼ˆä¸èƒ½å¯¹å¯¹è±¡å†…çš„å¼•ç”¨å˜é‡è¿›è¡Œæ‹·è´ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Cloneable</span></span>&#123;<br>    <span class="hljs-keyword">private</span> String city;<br>    <span class="hljs-keyword">private</span> String country;<br><br>  <span class="hljs-comment">// ........</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> Address <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException </span>&#123;<br>        <span class="hljs-keyword">return</span> (Address) <span class="hljs-keyword">super</span>.clone();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡è®¾Userç±»ä¸­åŒ…å«addresså¯¹è±¡ï¼Œè‹¥è¦å¯¹userå®ç°æ·±æ‹·è´ï¼Œåˆ™éœ€è¦å¯¹addresså’Œuseréƒ½é‡å†™cloneæ–¹æ³•å³å±‚å±‚æ‹·è´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Cloneable</span></span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Address address;<br><br><span class="hljs-comment">//.......</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> User <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException </span>&#123;<br>        User user = (User) <span class="hljs-keyword">super</span>.clone();<br>        user.setAddress(<span class="hljs-keyword">this</span>.address.clone());<br>        <span class="hljs-keyword">return</span> user;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†ä¸ä»…å¯ä»¥é€šè¿‡å±‚å±‚cloneæ–¹æ³•æ¥å®ç°æ·±æ‹·è´ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åºåˆ—åŒ–æ¥å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializableClone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt;  <span class="hljs-function">T <span class="hljs-title">clone</span><span class="hljs-params">(T t)</span></span>&#123;<br>        T another = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€å—ç¼“å†²åŒºï¼Œå°†å¯¹è±¡åºåˆ—åŒ–æˆæµ</span><br>            ByteArrayOutputStream bout = <span class="hljs-keyword">new</span> ByteArrayOutputStream();<br>            ObjectOutputStream out = <span class="hljs-keyword">new</span> ObjectOutputStream(bout);<br>            out.writeObject(t);<br><br>            <span class="hljs-comment">//æ‰¾åˆ°è¿™ä¸€å—ç¼“å†²åŒºï¼Œå°†å­—èŠ‚æµååºåˆ—åŒ–æˆå¦ä¸€ä¸ªå¯¹è±¡</span><br>            ByteArrayInputStream bais = <span class="hljs-keyword">new</span> ByteArrayInputStream(bout.toByteArray());<br>            ObjectInputStream ois = <span class="hljs-keyword">new</span> ObjectInputStream(bais);<br>            another = (T) ois.readObject();<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException | IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> another;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åº”ç”¨åœºæ™¯ï¼š-1"><a href="#åº”ç”¨åœºæ™¯ï¼š-1" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a>åº”ç”¨åœºæ™¯ï¼š</h4><ul><li>å¯¹è±¡ä¹‹é—´ç›¸åŒæˆ–ç›¸ä¼¼ï¼Œå³åªæ˜¯ä¸ªåˆ«çš„å‡ ä¸ªå±æ€§ä¸åŒçš„æ—¶å€™ã€‚</li><li>åˆ›å»ºå¯¹è±¡æˆæœ¬è¾ƒå¤§ï¼Œä¾‹å¦‚åˆå§‹åŒ–æ—¶é—´é•¿ï¼Œå ç”¨CPUå¤ªå¤šï¼Œæˆ–è€…å ç”¨ç½‘ç»œèµ„æºå¤ªå¤šç­‰ï¼Œéœ€è¦ä¼˜åŒ–èµ„æºã€‚</li><li>åˆ›å»ºä¸€ä¸ªå¯¹è±¡éœ€è¦ç¹ççš„æ•°æ®å‡†å¤‡æˆ–è®¿é—®æƒé™ç­‰ï¼Œéœ€è¦æé«˜æ€§èƒ½æˆ–è€…æé«˜å®‰å…¨æ€§ã€‚</li><li>ç³»ç»Ÿä¸­å¤§é‡ä½¿ç”¨è¯¥ç±»å¯¹è±¡ï¼Œä¸”å„ä¸ªè°ƒç”¨è€…éƒ½éœ€è¦ç»™å®ƒçš„å±æ€§é‡æ–°èµ‹å€¼ã€‚</li></ul><h3 id="3-ç®€å•å·¥å‚æ¨¡å¼"><a href="#3-ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="3.ç®€å•å·¥å‚æ¨¡å¼"></a>3.ç®€å•å·¥å‚æ¨¡å¼</h3><ol><li>å·¥å‚æ¨¡å¼çš„å®šä¹‰ï¼šå®šä¹‰ä¸€ä¸ªåˆ›å»ºäº§å“å¯¹è±¡çš„å·¥å‚æ¥å£ï¼Œå°†äº§å“å¯¹è±¡çš„å®é™…åˆ›å»ºå·¥ä½œæ¨è¿Ÿåˆ°å…·ä½“å­å·¥å‚ç±»å½“ä¸­ã€‚è¿™æ»¡è¶³åˆ›å»ºå‹æ¨¡å¼ä¸­æ‰€è¦æ±‚çš„â€œåˆ›å»ºä¸ä½¿ç”¨ç›¸åˆ†ç¦»â€çš„ç‰¹ç‚¹ã€‚</li><li>æˆ‘ä»¬æŠŠè¢«åˆ›å»ºçš„å¯¹è±¡ç§°ä¸ºâ€œäº§å“â€ï¼ŒæŠŠåˆ›å»ºäº§å“çš„å¯¹è±¡ç§°ä¸ºâ€œå·¥å‚â€ã€‚å¦‚æœè¦åˆ›å»ºçš„äº§å“ä¸å¤šï¼Œåªè¦ä¸€ä¸ªå·¥å‚ç±»å°±å¯ä»¥å®Œæˆï¼Œè¿™ç§æ¨¡å¼å«â€œç®€å•å·¥å‚æ¨¡å¼â€ã€‚</li><li>åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­åˆ›å»ºå®ä¾‹çš„æ–¹æ³•é€šå¸¸ä¸ºé™æ€ï¼ˆstaticï¼‰æ–¹æ³•ï¼Œå› æ­¤ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰åˆå«ä½œé™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆStatic Factory Method Patternï¼‰ã€‚</li></ol><p>ç®€å•å·¥å‚æ¨¡å¼å¹¶ä¸åœ¨23ç§è®¾è®¡æ¨¡å¼ä¹‹ä¸­ï¼Œå…¶è¿èƒŒäº†â€œå¼€é—­åŸåˆ™â€ã€‚</p><p>ç®€å•å·¥å‚æ¨¡å¼å¹¶ä¸ç®—æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæ›´å¤šçš„æ—¶å€™æ˜¯ä¸€ç§ç¼–ç¨‹ä¹ æƒ¯ã€‚</p><h4 id="ä¼˜ç‚¹ï¼š-2"><a href="#ä¼˜ç‚¹ï¼š-2" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h4><ol><li>å·¥å‚ç±»åŒ…å«å¿…è¦çš„é€»è¾‘åˆ¤æ–­ï¼Œå¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºå“ªä¸€ä¸ªäº§å“çš„å®ä¾‹ã€‚å®¢æˆ·ç«¯å¯ä»¥å…é™¤ç›´æ¥åˆ›å»ºäº§å“å¯¹è±¡çš„èŒè´£ï¼Œå¾ˆæ–¹ä¾¿çš„åˆ›å»ºå‡ºç›¸åº”çš„äº§å“ã€‚å·¥å‚å’Œäº§å“çš„èŒè´£åŒºåˆ†æ˜ç¡®ã€‚</li><li>å®¢æˆ·ç«¯æ— éœ€çŸ¥é“æ‰€åˆ›å»ºå…·ä½“äº§å“çš„ç±»åï¼Œåªéœ€çŸ¥é“å‚æ•°å³å¯ã€‚</li><li>ä¹Ÿå¯ä»¥å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œåœ¨ä¸ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹æ›´æ¢å’Œæ·»åŠ æ–°çš„å…·ä½“äº§å“ç±»ã€‚</li></ol><h4 id="ç¼ºç‚¹ï¼š-2"><a href="#ç¼ºç‚¹ï¼š-2" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ol><li>ç®€å•å·¥å‚æ¨¡å¼çš„å·¥å‚ç±»å•ä¸€ï¼Œè´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼ŒèŒè´£è¿‡é‡ï¼Œä¸€æ—¦å¼‚å¸¸ï¼Œæ•´ä¸ªç³»ç»Ÿå°†å—å½±å“ã€‚ä¸”å·¥å‚ç±»ä»£ç ä¼šéå¸¸è‡ƒè‚¿ï¼Œè¿èƒŒé«˜èšåˆåŸåˆ™ã€‚</li><li>ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ä¼šå¢åŠ ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°ï¼ˆå¼•å…¥æ–°çš„å·¥å‚ç±»ï¼‰ï¼Œå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦å’Œç†è§£éš¾åº¦</li><li>ç³»ç»Ÿæ‰©å±•å›°éš¾ï¼Œä¸€æ—¦å¢åŠ æ–°äº§å“ä¸å¾—ä¸ä¿®æ”¹å·¥å‚é€»è¾‘ï¼Œåœ¨äº§å“ç±»å‹è¾ƒå¤šæ—¶ï¼Œå¯èƒ½é€ æˆé€»è¾‘è¿‡äºå¤æ‚</li><li>ç®€å•å·¥å‚æ¨¡å¼ä½¿ç”¨äº† static å·¥å‚æ–¹æ³•ï¼Œé€ æˆå·¥å‚è§’è‰²æ— æ³•å½¢æˆåŸºäºç»§æ‰¿çš„ç­‰çº§ç»“æ„ã€‚</li></ol><h4 id="åº”ç”¨åœºæ™¯ï¼š-2"><a href="#åº”ç”¨åœºæ™¯ï¼š-2" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a>åº”ç”¨åœºæ™¯ï¼š</h4><p>å•ä¸€äº§å“</p><h4 id="ç»“æ„ï¼š"><a href="#ç»“æ„ï¼š" class="headerlink" title="ç»“æ„ï¼š"></a>ç»“æ„ï¼š</h4><ul><li>ç®€å•å·¥å‚ï¼ˆSimpleFactoryï¼‰ï¼šæ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„æ ¸å¿ƒï¼Œè´Ÿè´£å®ç°åˆ›å»ºæ‰€æœ‰å®ä¾‹çš„å†…éƒ¨é€»è¾‘ã€‚å·¥å‚ç±»çš„åˆ›å»ºäº§å“ç±»çš„æ–¹æ³•å¯ä»¥è¢«å¤–ç•Œç›´æ¥è°ƒç”¨ï¼Œåˆ›å»ºæ‰€éœ€çš„äº§å“å¯¹è±¡ã€‚</li><li>æŠ½è±¡äº§å“ï¼ˆProductï¼‰ï¼šæ˜¯ç®€å•å·¥å‚åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œè´Ÿè´£æè¿°æ‰€æœ‰å®ä¾‹å…±æœ‰çš„å…¬å…±æ¥å£ã€‚</li><li>å…·ä½“äº§å“ï¼ˆConcreteProductï¼‰ï¼šæ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„åˆ›å»ºç›®æ ‡ã€‚</li></ul><p><img src="/2021/10/18/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A3%E3%80%8B-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/166bb547bd52ad9dtplv-t2oaga2asx-watermark.awebp" alt="ç®€å•å·¥å‚"></p><h4 id="å®ç°ï¼š-1"><a href="#å®ç°ï¼š-1" class="headerlink" title="å®ç°ï¼š"></a>å®ç°ï¼š</h4><p>å‡è®¾ç”Ÿäº§ä¸€æ‰¹æ±½è½¦ï¼šæœ‰çº¢è‰²å’Œé»‘è‰²</p><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰æ¥å£<code>Car</code>,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Car</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å®ç°Carçš„æ¥å£ä¸º<code>RedCar</code>å’Œ<code>BlackCar</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RedCar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Car</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;this car is running&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ç°å·¥å‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CarFactory</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Car <span class="hljs-title">createCar</span><span class="hljs-params">(String color)</span></span>&#123;<br>        <span class="hljs-keyword">switch</span> (color)&#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Red&quot;</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RedCar();<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Black&quot;</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BlackCar();<br>            <span class="hljs-keyword">default</span>:<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span>  RuntimeException(<span class="hljs-string">&quot;ä¾›åº”å•†å¹¶ä¸å­˜åœ¨&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å·¥å‚æ–¹æ³•æ¥å¾—åˆ°å¯¹è±¡</p><h3 id="4-å·¥å‚æ¨¡å¼"><a href="#4-å·¥å‚æ¨¡å¼" class="headerlink" title="4.å·¥å‚æ¨¡å¼"></a>4.å·¥å‚æ¨¡å¼</h3><p>â€œå·¥å‚æ–¹æ³•æ¨¡å¼â€æ˜¯å¯¹ç®€å•å·¥å‚æ¨¡å¼çš„è¿›ä¸€æ­¥æŠ½è±¡åŒ–ï¼Œå…¶å¥½å¤„æ˜¯å¯ä»¥ä½¿ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹åŸæ¥ä»£ç çš„æƒ…å†µä¸‹å¼•è¿›æ–°çš„äº§å“ï¼Œå³æ»¡è¶³å¼€é—­åŸåˆ™ã€‚</p><h4 id="ä¼˜ç‚¹ï¼š-3"><a href="#ä¼˜ç‚¹ï¼š-3" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h4><ul><li>ç”¨æˆ·åªéœ€è¦çŸ¥é“å…·ä½“å·¥å‚çš„åç§°å°±å¯å¾—åˆ°æ‰€è¦çš„äº§å“ï¼Œæ— é¡»çŸ¥é“äº§å“çš„å…·ä½“åˆ›å»ºè¿‡ç¨‹ã€‚</li><li>çµæ´»æ€§å¢å¼ºï¼Œå¯¹äºæ–°äº§å“çš„åˆ›å»ºï¼Œåªéœ€å¤šå†™ä¸€ä¸ªç›¸åº”çš„å·¥å‚ç±»ã€‚</li><li>å…¸å‹çš„è§£è€¦æ¡†æ¶ã€‚é«˜å±‚æ¨¡å—åªéœ€è¦çŸ¥é“äº§å“çš„æŠ½è±¡ç±»ï¼Œæ— é¡»å…³å¿ƒå…¶ä»–å®ç°ç±»ï¼Œæ»¡è¶³è¿ªç±³ç‰¹æ³•åˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™å’Œé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚</li></ul><h4 id="ç¼ºç‚¹ï¼š-3"><a href="#ç¼ºç‚¹ï¼š-3" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ul><li>ç±»çš„ä¸ªæ•°å®¹æ˜“è¿‡å¤šï¼Œå¢åŠ å¤æ‚åº¦</li><li>å¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦</li><li>æŠ½è±¡äº§å“åªèƒ½ç”Ÿäº§ä¸€ç§äº§å“ï¼Œæ­¤å¼Šç«¯å¯ä½¿ç”¨<a href="http://c.biancheng.net/view/1351.html">æŠ½è±¡å·¥å‚æ¨¡å¼</a>è§£å†³ã€‚</li></ul><h4 id="åº”ç”¨åœºæ™¯ï¼š-3"><a href="#åº”ç”¨åœºæ™¯ï¼š-3" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a>åº”ç”¨åœºæ™¯ï¼š</h4><p>å®¢æˆ·åªçŸ¥é“åˆ›å»ºäº§å“çš„å·¥å‚åï¼Œè€Œä¸çŸ¥é“å…·ä½“çš„äº§å“åï¼Œä¸å…³å¿ƒå…·ä½“çš„å·¥å‚ï¼ˆä¸ç®€å•å·¥å‚Â·æ¨¡å¼ä¸åŒç‚¹ï¼‰ï¼Œç»†èŠ‚å®ç°ç”±å…·ä½“å·¥å‚å¤„ç†</p><h4 id="ç»“æ„ï¼š-1"><a href="#ç»“æ„ï¼š-1" class="headerlink" title="ç»“æ„ï¼š"></a>ç»“æ„ï¼š</h4><ol><li>æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œè°ƒç”¨è€…é€šè¿‡å®ƒè®¿é—®å…·ä½“å·¥å‚çš„å·¥å‚æ–¹æ³• newProduct() æ¥åˆ›å»ºäº§å“ã€‚</li><li>å…·ä½“å·¥å‚ï¼ˆConcreteFactoryï¼‰ï¼šä¸»è¦æ˜¯å®ç°æŠ½è±¡å·¥å‚ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚</li><li>æŠ½è±¡äº§å“ï¼ˆProductï¼‰ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚</li><li>å…·ä½“äº§å“ï¼ˆConcreteProductï¼‰ï¼šå®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒåŒå…·ä½“å·¥å‚ä¹‹é—´ä¸€ä¸€å¯¹åº”ã€‚</li></ol><p>å³åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸Šå¢åŠ äº†ä¸€å±‚æŠ½è±¡å·¥å‚</p><p><img src="/2021/10/18/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A3%E3%80%8B-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/3-1Q114135A2M3.gif" alt="å·¥å‚æ–¹æ³•æ¨¡å¼çš„ç»“æ„å›¾"></p><h4 id="å®ç°ï¼š-2"><a href="#å®ç°ï¼š-2" class="headerlink" title="å®ç°ï¼š"></a>å®ç°ï¼š</h4><p>ä»¥å›¾ç‰‡åŠ è½½å™¨çš„è®¾è®¡æ¥è¯´</p><p><img src="/2021/10/18/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A3%E3%80%8B-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/image-20211024172734442.png" alt="image-20211024172734442"></p><p>å»ºç«‹ä¸€ä¸‹ç±»ç»“æ„</p><p>1.å®šä¹‰æŠ½è±¡äº§å“ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Reader</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>2.å®šä¹‰å…·ä½“å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JpgReader</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Reader</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">read</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;jpg reader&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>3.å®šä¹‰æŠ½è±¡å·¥å‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ReaderFactory</span> </span>&#123;<br>    <span class="hljs-function">Reader <span class="hljs-title">getReader</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>4.å®šä¹‰å…·ä½“å·¥å‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JpgReaderFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ReaderFactory</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Reader <span class="hljs-title">getReader</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> JpgReader();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>javaè®¾è®¡æ¨¡å¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javaè®¾è®¡æ¨¡å¼ã€Š2ã€‹</title>
    <link href="/2021/10/15/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A2%E3%80%8B/"/>
    <url>/2021/10/15/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A2%E3%80%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="Javaè®¾è®¡æ¨¡å¼ã€Š2ã€‹"><a href="#Javaè®¾è®¡æ¨¡å¼ã€Š2ã€‹" class="headerlink" title="Javaè®¾è®¡æ¨¡å¼ã€Š2ã€‹"></a>Javaè®¾è®¡æ¨¡å¼ã€Š2ã€‹</h2><h3 id="è½¯ä»¶è®¾è®¡ä¸ƒå¤§åŸåˆ™"><a href="#è½¯ä»¶è®¾è®¡ä¸ƒå¤§åŸåˆ™" class="headerlink" title="è½¯ä»¶è®¾è®¡ä¸ƒå¤§åŸåˆ™"></a>è½¯ä»¶è®¾è®¡ä¸ƒå¤§åŸåˆ™</h3><h4 id="1-å¼€é—­åŸåˆ™"><a href="#1-å¼€é—­åŸåˆ™" class="headerlink" title="1.å¼€é—­åŸåˆ™"></a>1.å¼€é—­åŸåˆ™</h4><p>å¼€é—­åŸåˆ™ï¼ˆOpen Closed Principleï¼ŒOCPï¼‰ç”±å‹ƒå…°ç‰¹Â·æ¢…è€¶ï¼ˆBertrand Meyerï¼‰æå‡ºï¼Œä»–åœ¨ 1988 å¹´çš„è‘—ä½œã€Šé¢å‘å¯¹è±¡è½¯ä»¶æ„é€ ã€‹ï¼ˆObject Oriented Software Constructionï¼‰ä¸­æå‡ºï¼šè½¯ä»¶å®ä½“åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼ˆSoftware entities should be open for extensionï¼Œbut closed for modificationï¼‰</p><h5 id="1-å¼€é—­åŸåˆ™çš„ä½œç”¨"><a href="#1-å¼€é—­åŸåˆ™çš„ä½œç”¨" class="headerlink" title="1.å¼€é—­åŸåˆ™çš„ä½œç”¨"></a>1.å¼€é—­åŸåˆ™çš„ä½œç”¨</h5><ol><li><p>å¯¹è½¯ä»¶æµ‹è¯•çš„å½±å“</p><p>å¦‚æœè½¯ä»¶éµå®ˆå¼€é—­åŸåˆ™çš„è¯ï¼Œè½¯ä»¶æµ‹è¯•åªéœ€è¦å¯¹æ‰©å±•å†…å®¹è¿›è¡Œæµ‹è¯•ï¼Œè€Œæ— éœ€å¯¹å…¨éƒ¨åŠŸèƒ½è¿›è¡Œæµ‹è¯•</p></li><li><p>æé«˜ä»£ç çš„å¯å¤ç”¨æ€§</p><p>ç²’åº¦è¶Šå°ï¼Œè¢«å¤ç”¨çš„å¯èƒ½æ€§å°±è¶Šå¤§ï¼›åœ¨é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡ä¸­ï¼Œæ ¹æ®åŸå­å’ŒæŠ½è±¡ç¼–ç¨‹å¯ä»¥æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ã€‚ï¼ˆè¿™ä¸ªç²’åº¦è¦æ ¹æ®å®é™…æƒ…å†µæ¥çœ‹ï¼Œæ¯”å¦‚ä¸€ä¸ªç±»ä¸­ï¼Œä¸€èˆ¬ä¸å¯èƒ½åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼‰</p></li><li><p>å¯ä»¥æé«˜è½¯ä»¶çš„å¯ç»´æŠ¤æ€§</p><p>éµå®ˆå¼€é—­åŸåˆ™çš„è½¯ä»¶ï¼Œå…¶ç¨³å®šæ€§é«˜å’Œå»¶ç»­æ€§å¼ºï¼Œä»è€Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤</p></li></ol><h5 id="2-å¼€é—­åŸåˆ™çš„å®ç°"><a href="#2-å¼€é—­åŸåˆ™çš„å®ç°" class="headerlink" title="2.å¼€é—­åŸåˆ™çš„å®ç°"></a>2.å¼€é—­åŸåˆ™çš„å®ç°</h5><p>é€šè¿‡â€œæŠ½è±¡çº¦æŸã€å°è£…å˜åŒ–â€æ¥å®ç°å¼€é—­åŸåˆ™ï¼Œå³é€šè¿‡æ¥å£æˆ–è€…æŠ½è±¡ç±»ä¸ºè½¯ä»¶å®ä½“å®šä¹‰ä¸€ä¸ªç›¸å¯¹ç¨³å®šçš„æŠ½è±¡å±‚ï¼Œè€Œå°†ç›¸åŒçš„å¯å˜å› ç´ å°è£…åœ¨ç›¸åŒçš„å…·ä½“å®ç°ç±»ä¸­ã€‚</p><p>å› ä¸ºæŠ½è±¡çµæ´»æ€§å¥½ï¼Œé€‚åº”æ€§å¹¿ï¼Œåªè¦æŠ½è±¡çš„åˆç†ï¼Œå¯ä»¥åŸºæœ¬ä¿æŒè½¯ä»¶æ¶æ„çš„ç¨³å®šã€‚è€Œè½¯ä»¶ä¸­æ˜“å˜çš„ç»†èŠ‚å¯ä»¥ä»æŠ½è±¡æ´¾ç”Ÿæ¥çš„å®ç°ç±»æ¥è¿›è¡Œæ‰©å±•ï¼Œå½“è½¯ä»¶éœ€è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªéœ€è¦æ ¹æ®éœ€æ±‚é‡æ–°æ´¾ç”Ÿä¸€ä¸ªå®ç°ç±»æ¥æ‰©å±•å°±å¯ä»¥äº†ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ä½¿ç”¨æ¥å£æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©</p><h4 id="2-é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#2-é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="2.é‡Œæ°æ›¿æ¢åŸåˆ™"></a>2.é‡Œæ°æ›¿æ¢åŸåˆ™</h4><p>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼ŒLSPï¼‰ç”±éº»çœç†å·¥å­¦é™¢è®¡ç®—æœºç§‘å­¦å®éªŒå®¤çš„é‡Œæ–¯ç§‘å¤«ï¼ˆLiskovï¼‰å¥³å£«åœ¨ 1987 å¹´çš„â€œé¢å‘å¯¹è±¡æŠ€æœ¯çš„é«˜å³°ä¼šè®®â€ï¼ˆOOPSLAï¼‰ä¸Šå‘è¡¨çš„ä¸€ç¯‡æ–‡ç« ã€Šæ•°æ®æŠ½è±¡å’Œå±‚æ¬¡ã€‹ï¼ˆData Abstraction and Hierarchyï¼‰é‡Œæå‡ºæ¥çš„ï¼Œå¥¹æå‡ºï¼šç»§æ‰¿å¿…é¡»ç¡®ä¿è¶…ç±»ï¼ˆçˆ¶ç±»ï¼‰æ‰€æ‹¥æœ‰çš„æ€§è´¨åœ¨å­ç±»ä¸­ä»ç„¶æˆç«‹ï¼ˆInheritance should ensure that any property proved about supertype objects also holds for subtype objectsï¼‰ã€‚</p><p>é‡Œæ°æ›¿æ¢åŸæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºç¡€ï¼Œå®ƒåæ˜ äº†åŸºç±»ä¸å­ç±»ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å¯¹å¼€é—­åŸåˆ™çš„è¡¥å……ï¼Œæ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚</p><p>é˜è¿°äº†ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ç»§æ‰¿ï¼Œä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨ç»§æ‰¿</p><p>å…¶ä½œç”¨ä¸ºï¼š</p><ul><li>å­ç±»å¯ä»¥å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸èƒ½è¦†ç›–çˆ¶ç±»çš„éæŠ½è±¡æ–¹æ³•ï¼ˆå¾ˆå¤šæ—¶å€™æ²¡æœ‰åšåˆ°è¿™ä¸€ç‚¹</li><li>å­ç±»ä¸­å¯ä»¥å¢åŠ è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•</li><li>å½“å­ç±»çš„æ–¹æ³•é‡è½½çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„å‰ç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„è¾“å…¥å‚æ•°ï¼‰è¦æ¯”çˆ¶ç±»çš„æ–¹æ³•æ›´å®½æ¾</li><li>å½“å­ç±»çš„æ–¹æ³•å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼ˆé‡å†™/é‡è½½æˆ–å®ç°æŠ½è±¡æ–¹æ³•ï¼‰ï¼Œæ–¹æ³•çš„åç½®æ¡ä»¶ï¼ˆå³æ–¹æ³•çš„çš„è¾“å‡º/è¿”å›å€¼ï¼‰è¦æ¯”çˆ¶ç±»çš„æ–¹æ³•æ›´ä¸¥æ ¼æˆ–ç›¸ç­‰</li></ul><h5 id="1-é‡Œæ°æ›¿æ¢åŸåˆ™çš„ä½œç”¨"><a href="#1-é‡Œæ°æ›¿æ¢åŸåˆ™çš„ä½œç”¨" class="headerlink" title="1.é‡Œæ°æ›¿æ¢åŸåˆ™çš„ä½œç”¨"></a>1.é‡Œæ°æ›¿æ¢åŸåˆ™çš„ä½œç”¨</h5><ol><li>é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯å®ç°å¼€é—­åŸåˆ™çš„é‡è¦æ–¹å¼ä¹‹ä¸€ã€‚</li><li>å®ƒå…‹æœäº†ç»§æ‰¿ä¸­é‡å†™çˆ¶ç±»é€ æˆçš„å¯å¤ç”¨æ€§å˜å·®çš„ç¼ºç‚¹ã€‚</li><li>å®ƒæ˜¯åŠ¨ä½œæ­£ç¡®æ€§çš„ä¿è¯ã€‚å³ç±»çš„æ‰©å±•ä¸ä¼šç»™å·²æœ‰çš„ç³»ç»Ÿå¼•å…¥æ–°çš„é”™è¯¯ï¼Œé™ä½äº†ä»£ç å‡ºé”™çš„å¯èƒ½æ€§ã€‚</li><li>åŠ å¼ºç¨‹åºçš„å¥å£®æ€§ï¼ŒåŒæ—¶å˜æ›´æ—¶å¯ä»¥åšåˆ°éå¸¸å¥½çš„å…¼å®¹æ€§ï¼Œæé«˜ç¨‹åºçš„ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§ï¼Œé™ä½éœ€æ±‚å˜æ›´æ—¶å¼•å…¥çš„é£é™©ã€‚</li></ol><h5 id="2-é‡Œæ°æ›¿æ¢åŸåˆ™çš„å®ç°"><a href="#2-é‡Œæ°æ›¿æ¢åŸåˆ™çš„å®ç°" class="headerlink" title="2.é‡Œæ°æ›¿æ¢åŸåˆ™çš„å®ç°"></a>2.é‡Œæ°æ›¿æ¢åŸåˆ™çš„å®ç°</h5><p>å­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚å³å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œé™¤æ·»åŠ æ–°çš„æ–¹æ³•å®Œæˆæ–°å¢åŠŸèƒ½å¤–ï¼Œå°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</p><p>è¿™ç‚¹åœ¨è®¸å¤šçš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­privateå®šä¹‰çš„å˜é‡æˆ–æ–¹æ³•å°±æ˜¯ä¸å…è®¸å­ç±»æ”¹å˜çš„</p><p>å¸¸è§çš„ä¾‹å­æ˜¯â€œå‡ ç»´é¸Ÿä¸æ˜¯é¸Ÿâ€</p><p>é¸Ÿç±»ä¸€èˆ¬éƒ½ä¼šé£ï¼Œä½†æ˜¯å‡ ç»´é¸Ÿä¸ä¼šéï¼Œé‚£ä¹ˆå‡ ç»´é¸Ÿåˆ°åº•æ˜¯ä¸æ˜¯é¸Ÿå‘¢ï¼Ÿ</p><img src="http://c.biancheng.net/uploads/allimg/181113/3-1Q11311094H32.gif" alt="â€œå‡ ç»´é¸Ÿä¸æ˜¯é¸Ÿâ€å®ä¾‹çš„ç±»å›¾"><p>è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦é‡æ–°è€ƒè™‘ä¸€ä¸‹å‡ ç»´é¸Ÿè¯¥ç»§æ‰¿è°äº†ï¼Œæ¯”å¦‚ç»§æ‰¿åŠ¨ç‰©</p><h4 id="3-ä¾èµ–å€’ç½®åŸåˆ™"><a href="#3-ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="3.ä¾èµ–å€’ç½®åŸåˆ™"></a>3.ä¾èµ–å€’ç½®åŸåˆ™</h4><p>ä¾èµ–å€’ç½®åŸåˆ™çš„åŸå§‹å®šä¹‰ä¸ºï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ï¼ˆHigh level modules shouldnot depend upon low level modules.Both should depend upon abstractions.Abstractions should not depend upon details. Details should depend upon abstractionsï¼‰ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šè¦<strong>é¢å‘æ¥å£ç¼–ç¨‹</strong>ï¼Œä¸è¦é¢å‘å®ç°ç¼–ç¨‹ã€‚</p><h5 id="1-ä¾èµ–å€’ç½®åŸåˆ™çš„ä½œç”¨"><a href="#1-ä¾èµ–å€’ç½®åŸåˆ™çš„ä½œç”¨" class="headerlink" title="1.ä¾èµ–å€’ç½®åŸåˆ™çš„ä½œç”¨"></a>1.ä¾èµ–å€’ç½®åŸåˆ™çš„ä½œç”¨</h5><ul><li>ä¾èµ–å€’ç½®åŸåˆ™å¯ä»¥é™ä½ç±»é—´çš„è€¦åˆæ€§ã€‚</li><li>ä¾èµ–å€’ç½®åŸåˆ™å¯ä»¥æé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li><li>ä¾èµ–å€’ç½®åŸåˆ™å¯ä»¥å‡å°‘å¹¶è¡Œå¼€å‘å¼•èµ·çš„é£é™©ã€‚</li><li>ä¾èµ–å€’ç½®åŸåˆ™å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li></ul><h5 id="2-ä¾èµ–å€’ç½®åŸåˆ™çš„å®ç°"><a href="#2-ä¾èµ–å€’ç½®åŸåˆ™çš„å®ç°" class="headerlink" title="2.ä¾èµ–å€’ç½®åŸåˆ™çš„å®ç°"></a>2.ä¾èµ–å€’ç½®åŸåˆ™çš„å®ç°</h5><p>ä¾èµ–å€’ç½®åŸåˆ™çš„ç›®çš„æ˜¯é€šè¿‡è¦é¢å‘æ¥å£çš„ç¼–ç¨‹æ¥é™ä½ç±»é—´çš„è€¦åˆæ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®é™…ç¼–ç¨‹ä¸­åªè¦éµå¾ªä»¥ä¸‹4ç‚¹ï¼Œå°±èƒ½åœ¨é¡¹ç›®ä¸­æ»¡è¶³è¿™ä¸ªè§„åˆ™ã€‚</p><ol><li>æ¯ä¸ªç±»å°½é‡æä¾›æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œæˆ–è€…ä¸¤è€…éƒ½å…·å¤‡ã€‚</li><li>å˜é‡çš„å£°æ˜ç±»å‹å°½é‡æ˜¯æ¥å£æˆ–è€…æ˜¯æŠ½è±¡ç±»ã€‚</li><li>ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿã€‚</li><li>ä½¿ç”¨ç»§æ‰¿æ—¶å°½é‡éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚</li></ol><p>æ¯”è¾ƒå¸¸è§çš„ä¾‹å­æ˜¯ä¹°ä¸œè¥¿ï¼Œå‡å¦‚æˆ‘ä»¬è¦ä¹°ä¸€ä¸ªè‹¹æœï¼ŒAå•†åº—å¯ä»¥è´­ä¹°ï¼ŒBå•†åº—ä¹Ÿå¯ä»¥è´­ä¹°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å®šä¹‰æ–¹æ³•æ—¶ç›´æ¥ä¼ å…¥çš„æ˜¯Aæ˜¯è¯ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">buyApple</span><span class="hljs-params">(A a)</span></span>&#123;<br>    a.shell();<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡å¦‚æŸå¤©Aå•†åº—å…³é—¨äº†ï¼Œé‚£ä¹ˆæ–¹æ³•éœ€è¦æ”¹å˜ï¼Œä½†æ˜¯å¦‚æœæ˜¯é‡‡ç”¨é¢å‘æ¥å£ç¼–ç¨‹çš„è¯ï¼Œæˆ‘ä»¬åˆ™ä¸éœ€è¦è€ƒè™‘Aæ˜¯å¦å…³é—¨ï¼Œè€Œåªå…³å¿ƒè°æ‹¥æœ‰è¿™ä¸ªåŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ModelDemo</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        A a = <span class="hljs-keyword">new</span> A();<br>        B b = <span class="hljs-keyword">new</span> B();<br>        buyApple(b);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">buyApple</span><span class="hljs-params">(Shop shop)</span></span>&#123;<br>        shop.shell();<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shop</span></span>&#123;<br>     <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">shell</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Shop</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title">shell</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;A can shell this &quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> <span class="hljs-keyword">implements</span>  <span class="hljs-title">Shop</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title">shell</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;B can shell this&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ Bä¼ å…¥ä¾ç„¶å¯ä»¥è´­ä¹°åˆ°è‹¹æœ</p><h4 id="4-å•ä¸€èŒè´£åŸåˆ™"><a href="#4-å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="4.å•ä¸€èŒè´£åŸåˆ™"></a>4.å•ä¸€èŒè´£åŸåˆ™</h4><p>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principleï¼ŒSRPï¼‰åˆç§°å•ä¸€åŠŸèƒ½åŸåˆ™ï¼Œç”±ç½—ä¼¯ç‰¹Â·C.é©¬ä¸ï¼ˆRobert C. Martinï¼‰äºã€Šæ•æ·è½¯ä»¶å¼€å‘ï¼šåŸåˆ™ã€æ¨¡å¼å’Œå®è·µã€‹ä¸€ä¹¦ä¸­æå‡ºçš„ã€‚è¿™é‡Œçš„èŒè´£æ˜¯æŒ‡ç±»å˜åŒ–çš„åŸå› ï¼Œå•ä¸€èŒè´£åŸåˆ™è§„å®šä¸€ä¸ªç±»åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ï¼Œå¦åˆ™ç±»åº”è¯¥è¢«æ‹†åˆ†ï¼ˆThere should never be more than one reason for a class to changeï¼‰ã€‚</p><p>è¯¥åŸåˆ™æå‡ºå¯¹è±¡ä¸åº”è¯¥æ‰¿æ‹…å¤ªå¤šèŒè´£ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ‰¿æ‹…äº†å¤ªå¤šçš„èŒè´£ï¼Œè‡³å°‘å­˜åœ¨ä»¥ä¸‹ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><ol><li>ä¸€ä¸ªèŒè´£çš„å˜åŒ–å¯èƒ½ä¼šå‰Šå¼±æˆ–è€…æŠ‘åˆ¶è¿™ä¸ªç±»å®ç°å…¶ä»–èŒè´£çš„èƒ½åŠ›ï¼›</li><li>å½“å®¢æˆ·ç«¯éœ€è¦è¯¥å¯¹è±¡çš„æŸä¸€ä¸ªèŒè´£æ—¶ï¼Œä¸å¾—ä¸å°†å…¶ä»–ä¸éœ€è¦çš„èŒè´£å…¨éƒ½åŒ…å«è¿›æ¥ï¼Œä»è€Œé€ æˆå†—ä½™ä»£ç æˆ–ä»£ç çš„æµªè´¹ã€‚</li></ol><p>ä¸ªäººç†è§£å°±æ˜¯ï¼šå¯¹ç±»è¿›è¡Œè§£è€¦åˆ</p><h5 id="1-å•ä¸€èŒè´£åŸåˆ™çš„ä½œç”¨"><a href="#1-å•ä¸€èŒè´£åŸåˆ™çš„ä½œç”¨" class="headerlink" title="1.å•ä¸€èŒè´£åŸåˆ™çš„ä½œç”¨"></a>1.å•ä¸€èŒè´£åŸåˆ™çš„ä½œç”¨</h5><p>å•ä¸€èŒè´£åŸåˆ™çš„æ ¸å¿ƒå°±æ˜¯æ§åˆ¶ç±»çš„ç²’åº¦å¤§å°ã€å°†å¯¹è±¡è§£è€¦ã€æé«˜å…¶å†…èšæ€§ã€‚å¦‚æœéµå¾ªå•ä¸€èŒè´£åŸåˆ™å°†æœ‰ä»¥ä¸‹ä¼˜ç‚¹ã€‚</p><ul><li>é™ä½ç±»çš„å¤æ‚åº¦ã€‚ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ï¼Œå…¶é€»è¾‘è‚¯å®šè¦æ¯”è´Ÿè´£å¤šé¡¹èŒè´£ç®€å•å¾—å¤šã€‚ï¼ˆå®é™…å¼€å‘ä¸­å¾ˆéš¾é‡åˆ°ï¼Œä¸€èˆ¬ä¸€ä¸ªç±»éƒ½æœ‰è®¸å¤šåŠŸèƒ½</li><li>æé«˜ç±»çš„å¯è¯»æ€§ã€‚å¤æ‚æ€§é™ä½ï¼Œè‡ªç„¶å…¶å¯è¯»æ€§ä¼šæé«˜ã€‚</li><li>æé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚å¯è¯»æ€§æé«˜ï¼Œé‚£è‡ªç„¶æ›´å®¹æ˜“ç»´æŠ¤äº†ã€‚</li><li>å˜æ›´å¼•èµ·çš„é£é™©é™ä½ã€‚å˜æ›´æ˜¯å¿…ç„¶çš„ï¼Œå¦‚æœå•ä¸€èŒè´£åŸåˆ™éµå®ˆå¾—å¥½ï¼Œå½“ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½æ—¶ï¼Œå¯ä»¥æ˜¾è‘—é™ä½å¯¹å…¶ä»–åŠŸèƒ½çš„å½±å“</li></ul><h5 id="2-å•ä¸€æŒ‡è´£åŸåˆ™çš„å®ç°"><a href="#2-å•ä¸€æŒ‡è´£åŸåˆ™çš„å®ç°" class="headerlink" title="2.å•ä¸€æŒ‡è´£åŸåˆ™çš„å®ç°"></a>2.å•ä¸€æŒ‡è´£åŸåˆ™çš„å®ç°</h5><p>å•ä¸€èŒè´£åŸåˆ™çš„å®ç°éœ€è¦è®¾è®¡è€…å‘ç°ç±»çš„èŒè´£å¹¶å°†å…¶åˆ’åˆ†ï¼Œå¯¹è®¾è®¡è€…åˆ†æèƒ½åŠ›æœ‰ä¸€å®šè¦æ±‚ï¼ŒåŒæ—¶ï¼Œä¸åŒäººå¯¹èŒè´£åˆ’åˆ†ä¹Ÿæœ‰ä¸åŒçš„çœ‹æ³•ï¼Œæ‰€ä»¥å¾ˆéš¾æŠŠæ¡</p><p>ä½†æ˜¯ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡å¦‚åœ¨å¤§å­¦ç”Ÿå¹³æ—¶ç”Ÿæ´»ä¸­ï¼Œç­çº§ä¸Šæœ‰ä¸åŒçš„ç­å§”ï¼Œä»–ä»¬è´Ÿè´£çš„åŠŸèƒ½ä¹Ÿå¹¶ä¸ç›¸åŒï¼Œè¿™æ ·ï¼Œæ ¹æ®ä»–ä»¬çš„èŒè´£è¿›è¡Œåˆ’åˆ†ï¼Œå¹¶ä¸”ä»–ä»¬çš„èŒè´£é‡å éƒ¨åˆ†ä¹Ÿå°½å¯èƒ½çš„å°‘ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬èƒ½å¾ˆå¿«çš„æ‰¾åˆ°è°è¯¥å¹²ä»€ä¹ˆã€‚è¿™å°±æ˜¯ä¸ªäººå¯¹å•ä¸€èŒè´£çš„ç†è§£</p><h4 id="5-æ¥å£éš”ç¦»åŸåˆ™"><a href="#5-æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="5.æ¥å£éš”ç¦»åŸåˆ™"></a>5.æ¥å£éš”ç¦»åŸåˆ™</h4><p>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼ŒISPï¼‰è¦æ±‚ç¨‹åºå‘˜å°½é‡å°†è‡ƒè‚¿åºå¤§çš„æ¥å£æ‹†åˆ†æˆæ›´å°çš„å’Œæ›´å…·ä½“çš„æ¥å£ï¼Œè®©æ¥å£ä¸­åªåŒ…å«å®¢æˆ·æ„Ÿå…´è¶£çš„æ–¹æ³•ã€‚</p><p>å®¢æˆ·ç«¯ä¸åº”è¯¥è¢«è¿«ä¾èµ–äºå®ƒä¸ä½¿ç”¨çš„æ–¹æ³•ï¼ˆClients should not be forced to depend on methods they do not useï¼‰ã€‚è¯¥åŸåˆ™è¿˜æœ‰å¦å¤–ä¸€ä¸ªå®šä¹‰ï¼šä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šï¼ˆThe dependency of one class to another one should depend on the smallest possible interfaceï¼‰ã€‚</p><p>è¦ä¸ºå„ä¸ªç±»å»ºç«‹å®ƒä»¬éœ€è¦çš„ä¸“ç”¨æ¥å£</p><p>æˆ‘çš„ç†è§£ï¼šæ¥å£ä¸“ä¸€åŒ–åŠ å¼ºï¼Œå°†æ¥å£è§£è€¦</p><h5 id="1-æ¥å£éš”ç¦»åŸåˆ™çš„ä½œç”¨ï¼š"><a href="#1-æ¥å£éš”ç¦»åŸåˆ™çš„ä½œç”¨ï¼š" class="headerlink" title="1.æ¥å£éš”ç¦»åŸåˆ™çš„ä½œç”¨ï¼š"></a>1.æ¥å£éš”ç¦»åŸåˆ™çš„ä½œç”¨ï¼š</h5><ul><li>æ¥å£å°½é‡å°ï¼Œä½†æ˜¯è¦æœ‰é™åº¦ã€‚ä¸€ä¸ªæ¥å£åªæœåŠ¡äºä¸€ä¸ªå­æ¨¡å—æˆ–ä¸šåŠ¡é€»è¾‘ã€‚</li><li>ä¸ºä¾èµ–æ¥å£çš„ç±»å®šåˆ¶æœåŠ¡ã€‚åªæä¾›è°ƒç”¨è€…éœ€è¦çš„æ–¹æ³•ï¼Œå±è”½ä¸éœ€è¦çš„æ–¹æ³•ã€‚</li><li>äº†è§£ç¯å¢ƒï¼Œæ‹’ç»ç›²ä»ã€‚æ¯ä¸ªé¡¹ç›®æˆ–äº§å“éƒ½æœ‰é€‰å®šçš„ç¯å¢ƒå› ç´ ï¼Œç¯å¢ƒä¸åŒï¼Œæ¥å£æ‹†åˆ†çš„æ ‡å‡†å°±ä¸åŒæ·±å…¥äº†è§£ä¸šåŠ¡é€»è¾‘ã€‚</li><li>æé«˜å†…èšï¼Œå‡å°‘å¯¹å¤–äº¤äº’ã€‚ä½¿æ¥å£ç”¨æœ€å°‘çš„æ–¹æ³•å»å®Œæˆæœ€å¤šçš„äº‹æƒ…ã€‚</li></ul><h5 id="2-æ¥å£éš”ç¦»åŸåˆ™çš„å®ç°ï¼š"><a href="#2-æ¥å£éš”ç¦»åŸåˆ™çš„å®ç°ï¼š" class="headerlink" title="2.æ¥å£éš”ç¦»åŸåˆ™çš„å®ç°ï¼š"></a>2.æ¥å£éš”ç¦»åŸåˆ™çš„å®ç°ï¼š</h5><ul><li>æ¥å£å°½é‡å°ï¼Œä½†æ˜¯è¦æœ‰é™åº¦ã€‚ä¸€ä¸ªæ¥å£åªæœåŠ¡äºä¸€ä¸ªå­æ¨¡å—æˆ–ä¸šåŠ¡é€»è¾‘ã€‚</li><li>ä¸ºä¾èµ–æ¥å£çš„ç±»å®šåˆ¶æœåŠ¡ã€‚åªæä¾›è°ƒç”¨è€…éœ€è¦çš„æ–¹æ³•ï¼Œå±è”½ä¸éœ€è¦çš„æ–¹æ³•ã€‚</li><li>äº†è§£ç¯å¢ƒï¼Œæ‹’ç»ç›²ä»ã€‚æ¯ä¸ªé¡¹ç›®æˆ–äº§å“éƒ½æœ‰é€‰å®šçš„ç¯å¢ƒå› ç´ ï¼Œç¯å¢ƒä¸åŒï¼Œæ¥å£æ‹†åˆ†çš„æ ‡å‡†å°±ä¸åŒæ·±å…¥äº†è§£ä¸šåŠ¡é€»è¾‘ã€‚</li><li>æé«˜å†…èšï¼Œå‡å°‘å¯¹å¤–äº¤äº’ã€‚ä½¿æ¥å£ç”¨æœ€å°‘çš„æ–¹æ³•å»å®Œæˆæœ€å¤šçš„äº‹æƒ…ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå­¦ç”Ÿæ‹¥æœ‰è®¸å¤šèƒ½åŠ›ï¼Œæ¯”å¦‚ï¼Œå­¦ä¹ ï¼Œæ‰“ç”µåŠ¨ï¼Œåƒé¥­ç¡è§‰ç­‰ç”Ÿæ´»èƒ½åŠ›</p><p>æˆ‘ä»¬å¯ä»¥è€ƒè™‘è®¾ç½®ä¸‰ä¸ªæ¥å£ï¼Œåˆ†åˆ«ä¸ºå­¦ä¹ ï¼Œæ‰“ç”µåŠ¨ï¼Œç”Ÿæ´»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestDemo</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Student s = <span class="hljs-keyword">new</span> Student();<br>        s.eat();<br>        s.playGame();<br>        s.sleep();<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Study</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">study</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">PlayGame</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">playGame</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">LifeAbility</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">eat</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sleep</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Study</span>,<span class="hljs-title">LifeAbility</span>,<span class="hljs-title">PlayGame</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">study</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am study&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">playGame</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am playGame&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sleep</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am sleep&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">eat</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;I am eat&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸å•ä¸€èŒè´£åŸåˆ™ä¸åŒï¼š</p><p>å•ä¸€èŒè´£åŸåˆ™åŸæ³¨é‡çš„æ˜¯èŒè´£ï¼›è€Œæ¥å£éš”ç¦»åŸåˆ™æ³¨é‡å¯¹æ¥å£ä¾èµ–çš„éš”ç¦»ã€‚å…¶äºŒï¼Œå•ä¸€èŒè´£åŸåˆ™ä¸»è¦æ˜¯çº¦æŸç±»ï¼Œå…¶æ¬¡æ‰æ˜¯æ¥å£å’Œæ–¹æ³•ï¼Œå®ƒé’ˆå¯¹çš„æ˜¯ç¨‹åºä¸­çš„å®ç°å’Œç»†èŠ‚ï¼›è€Œæ¥å£éš”ç¦»åŸåˆ™ä¸»è¦çº¦æŸæ¥å£æ¥å£ï¼Œä¸»è¦é’ˆå¯¹æŠ½è±¡ï¼Œé’ˆå¯¹ç¨‹åºæ•´ä½“æ¡†æ¶çš„æ„å»ºã€‚</p><h4 id="6-è¿ªç±³ç‰¹æ³•åˆ™"><a href="#6-è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="6.è¿ªç±³ç‰¹æ³•åˆ™"></a>6.è¿ªç±³ç‰¹æ³•åˆ™</h4><p>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeterï¼ŒLoDï¼‰åˆå«ä½œæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼ŒLKP)</p><p>å®šä¹‰ä¸ºï¼šåªä¸ä½ çš„ç›´æ¥æœ‹å‹äº¤è°ˆï¼Œä¸è·Ÿâ€œé™Œç”Ÿäººâ€è¯´è¯ï¼ˆTalk only to your immediate friends and not to strangersï¼‰ã€‚å…¶å«ä¹‰æ˜¯ï¼šå¦‚æœä¸¤ä¸ªè½¯ä»¶å®ä½“æ— é¡»ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆå°±ä¸åº”å½“å‘ç”Ÿç›´æ¥çš„ç›¸äº’è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹è½¬å‘è¯¥è°ƒç”¨ã€‚å…¶ç›®çš„æ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ã€‚</p><p>è¿ªç±³ç‰¹æ³•åˆ™ä¸­çš„â€œæœ‹å‹â€æ˜¯æŒ‡ï¼šå½“å‰å¯¹è±¡æœ¬èº«ã€å½“å‰å¯¹è±¡çš„æˆå‘˜å¯¹è±¡ã€å½“å‰å¯¹è±¡æ‰€åˆ›å»ºçš„å¯¹è±¡ã€å½“å‰å¯¹è±¡çš„æ–¹æ³•å‚æ•°ç­‰ï¼Œè¿™äº›å¯¹è±¡åŒå½“å‰å¯¹è±¡å­˜åœ¨å…³è”ã€èšåˆæˆ–ç»„åˆå…³ç³»ï¼Œå¯ä»¥ç›´æ¥è®¿é—®è¿™äº›å¯¹è±¡çš„æ–¹æ³•ã€‚</p><h5 id="1-è¿ªç±³ç‰¹æ³•åˆ™çš„ä½œç”¨"><a href="#1-è¿ªç±³ç‰¹æ³•åˆ™çš„ä½œç”¨" class="headerlink" title="1.è¿ªç±³ç‰¹æ³•åˆ™çš„ä½œç”¨"></a>1.è¿ªç±³ç‰¹æ³•åˆ™çš„ä½œç”¨</h5><ol><li>é™ä½äº†ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜äº†æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ã€‚</li><li>ç”±äºäº²åˆåº¦é™ä½ï¼Œä»è€Œæé«˜äº†ç±»çš„å¯å¤ç”¨ç‡å’Œç³»ç»Ÿçš„æ‰©å±•æ€§ã€‚</li></ol><p>ä¸ªäººç†è§£ï¼šå®‰å“ä¸­çš„mvpæ¶æ„å°±æ˜¯åŸºäºè¿ªç±³ç‰¹æ³•åˆ™ï¼Œåœ¨viewä¸modelä¹‹é—´ä½¿ç”¨äº†ä¸­ä»‹æ¥è¿›è¡Œç›¸äº’è°ƒç”¨ï¼Œä»è€Œé¿å…äº†viewå’Œmodelç›´æ¥è°ƒç”¨ï¼Œç›®çš„æ˜¯ç¡®ä¿äº†é«˜å†…èšå’Œä½è€¦åˆï¼Œä½†æ˜¯åŒæ—¶å¯¼è‡´äº†æ¥å£è¿‡å¤šï¼Œç•¥æ˜¾ç¹ç</p><h5 id="2-è¿ªç±³ç‰¹æ³•åˆ™çš„å®ç°æ–¹æ³•"><a href="#2-è¿ªç±³ç‰¹æ³•åˆ™çš„å®ç°æ–¹æ³•" class="headerlink" title="2.è¿ªç±³ç‰¹æ³•åˆ™çš„å®ç°æ–¹æ³•"></a>2.è¿ªç±³ç‰¹æ³•åˆ™çš„å®ç°æ–¹æ³•</h5><ol><li>åœ¨ç±»çš„åˆ’åˆ†ä¸Šï¼Œåº”è¯¥åˆ›å»ºå¼±è€¦åˆçš„ç±»ã€‚ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆè¶Šå¼±ï¼Œå°±è¶Šæœ‰åˆ©äºå®ç°å¯å¤ç”¨çš„ç›®æ ‡ã€‚</li><li>åœ¨ç±»çš„ç»“æ„è®¾è®¡ä¸Šï¼Œå°½é‡é™ä½ç±»æˆå‘˜çš„è®¿é—®æƒé™ã€‚</li><li>åœ¨ç±»çš„è®¾è®¡ä¸Šï¼Œä¼˜å…ˆè€ƒè™‘å°†ä¸€ä¸ªç±»è®¾ç½®æˆä¸å˜ç±»ã€‚</li><li>åœ¨å¯¹å…¶ä»–ç±»çš„å¼•ç”¨ä¸Šï¼Œå°†å¼•ç”¨å…¶ä»–å¯¹è±¡çš„æ¬¡æ•°é™åˆ°æœ€ä½ã€‚</li><li>ä¸æš´éœ²ç±»çš„å±æ€§æˆå‘˜ï¼Œè€Œåº”è¯¥æä¾›ç›¸åº”çš„è®¿é—®å™¨ï¼ˆset å’Œ get æ–¹æ³•ï¼‰ã€‚</li><li>è°¨æ…ä½¿ç”¨åºåˆ—åŒ–ï¼ˆSerializableï¼‰åŠŸèƒ½ã€‚ï¼ˆç±»æˆ–æ¥å£ä¸¤ç«¯æœªåŒæ­¥æ›´æ–°ï¼Œå¼•å‘åºåˆ—åŒ–å¤±è´¥ï¼Œï¼Œé¡¹ç›®ç®¡ç†æ˜“ç–å¿½ï¼‰</li></ol><p>åºåˆ—åŒ–ï¼š</p><ol><li>ä¸€ä¸ªå¯¹è±¡å¯ä»¥è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªå­—èŠ‚åºåˆ—ï¼Œè¯¥å­—èŠ‚åºåˆ—åŒ…æ‹¬è¯¥å¯¹è±¡çš„æ•°æ®ã€æœ‰å…³å¯¹è±¡çš„ç±»å‹çš„ä¿¡æ¯å’Œå­˜å‚¨åœ¨å¯¹è±¡ä¸­æ•°æ®çš„ç±»å‹ã€‚</li><li>å°†åºåˆ—åŒ–å¯¹è±¡å†™å…¥æ–‡ä»¶ä¹‹åï¼Œå¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å‡ºæ¥ï¼Œå¹¶ä¸”å¯¹å®ƒè¿›è¡Œååºåˆ—åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„ç±»å‹ä¿¡æ¯ã€å¯¹è±¡çš„æ•°æ®ï¼Œè¿˜æœ‰å¯¹è±¡ä¸­çš„æ•°æ®ç±»å‹å¯ä»¥ç”¨æ¥åœ¨å†…å­˜ä¸­æ–°å»ºå¯¹è±¡ã€‚</li></ol><p>å¯¹è±¡çš„äºŒè¿›åˆ¶</p><p>å…¸å‹ä¾‹å­æ˜¯æ˜æ˜Ÿï¼Œç²‰ä¸ï¼Œå…¬å¸ä¹‹é—´çš„å…³ç³»ï¼Œæ˜æ˜Ÿä¸å¯èƒ½ç›´æ¥ä¸ç²‰ä¸æ¥è§¦ï¼Œä¹Ÿä¸å¥½ç›´æ¥ä¸å…¬å¸æ¥è§¦ï¼Œæ‰€ä»¥æ­¤æ—¶éœ€è¦å·¥å…·äººç»çºªäººçš„å‡ºç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestDemo2</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Star s = <span class="hljs-keyword">new</span> Star();<br>        s.setName(<span class="hljs-string">&quot;S&quot;</span>);<br>        Fans f = <span class="hljs-keyword">new</span> Fans();<br>        f.setName(<span class="hljs-string">&quot;SFan&quot;</span>);<br>        Company c= <span class="hljs-keyword">new</span> Company();<br>        c.setName(<span class="hljs-string">&quot;C&quot;</span>);<br>        Agent a = <span class="hljs-keyword">new</span> Agent();<br>        a.setMyCompany(c);<br>        a.setMyStar(s);<br>        a.setMyFans(f);<br>        a.meetWithCompany();<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Agent</span></span>&#123;<br>    <span class="hljs-keyword">private</span> Star myStar;<br>    <span class="hljs-keyword">private</span> Fans myFans;<br>    <span class="hljs-keyword">private</span> Company myCompany;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Star <span class="hljs-title">getMyStar</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> myStar;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMyStar</span><span class="hljs-params">(Star myStar)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.myStar = myStar;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Fans <span class="hljs-title">getMyFans</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> myFans;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMyFans</span><span class="hljs-params">(Fans myFans)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.myFans = myFans;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Company <span class="hljs-title">getMyCompany</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> myCompany;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMyCompany</span><span class="hljs-params">(Company myCompany)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.myCompany = myCompany;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">meetWithFans</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(myStar.getName()+<span class="hljs-string">&quot;is meeting with&quot;</span> +myFans.getName());<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">meetWithCompany</span><span class="hljs-params">()</span></span>&#123;<br>        System.out.println(myStar.getName()+<span class="hljs-string">&quot;is meeting with &quot;</span>+myFans.getName());<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Star</span></span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fans</span></span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Company</span></span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="7-åˆæˆå¤ç”¨åŸåˆ™"><a href="#7-åˆæˆå¤ç”¨åŸåˆ™" class="headerlink" title="7.åˆæˆå¤ç”¨åŸåˆ™"></a>7.åˆæˆå¤ç”¨åŸåˆ™</h4><p>åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼ŒCRPï¼‰åˆå«ç»„åˆ/èšåˆå¤ç”¨åŸåˆ™ï¼ˆComposition/Aggregate Reuse Principleï¼ŒCARPï¼‰ã€‚å®ƒè¦æ±‚åœ¨è½¯ä»¶å¤ç”¨æ—¶ï¼Œè¦å°½é‡å…ˆä½¿ç”¨ç»„åˆæˆ–è€…èšåˆç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å®ç°ã€‚</p><p>å¦‚æœè¦ä½¿ç”¨ç»§æ‰¿å…³ç³»ï¼Œåˆ™å¿…é¡»ä¸¥æ ¼éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚åˆæˆå¤ç”¨åŸåˆ™åŒé‡Œæ°æ›¿æ¢åŸåˆ™ç›¸è¾…ç›¸æˆçš„ï¼Œä¸¤è€…éƒ½æ˜¯å¼€é—­åŸåˆ™çš„å…·ä½“å®ç°è§„èŒƒã€‚</p><p>ä¸ªäººç†è§£ï¼šç”±äºç»§æ‰¿å¾ˆå¤šæ—¶å€™å­˜åœ¨æ”¹å˜çˆ¶ç±»æ–¹æ³•å³é‡å†™æƒ…å†µï¼Œè¿™ä¸€ç‚¹æ˜¯è¿èƒŒé‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆå¼€é—­åŸåˆ™çš„å®ç° ï¼‰çš„ï¼Œç»„åˆå¾ˆå¤§ç¨‹åº¦ä¸Šèƒ½é¿å…è¿™ä¸ªæƒ…å†µï¼Œå°±æ˜¯æŠŠåŸæœ¬é€šè¿‡ç»§æ‰¿å¾—åˆ°çš„ç±»ï¼Œæ”¹ä¸ºåœ¨æ–°ç±»ä¸­ç»´æŒä¸€ä¸ªåŸæœ¬çš„ç±»ï¼Œé€šè¿‡æ–°ç±»è°ƒç”¨åŸæœ¬ç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ­¤æ—¶æ‰©å±•æ€§ä¹Ÿå¾—åˆ°äº†æé«˜ï¼Œå³å¯ä»¥ç»„åˆå¤šä¸ªç±»æ¥å¢å¼ºç±»çš„åŠŸèƒ½</p><h5 id="1-åˆæˆå¤ç”¨åŸåˆ™çš„ä½œç”¨ï¼š"><a href="#1-åˆæˆå¤ç”¨åŸåˆ™çš„ä½œç”¨ï¼š" class="headerlink" title="1.åˆæˆå¤ç”¨åŸåˆ™çš„ä½œç”¨ï¼š"></a>1.åˆæˆå¤ç”¨åŸåˆ™çš„ä½œç”¨ï¼š</h5><h6 id="1-ç»§æ‰¿å¤ç”¨ï¼š"><a href="#1-ç»§æ‰¿å¤ç”¨ï¼š" class="headerlink" title="1.ç»§æ‰¿å¤ç”¨ï¼š"></a>1.ç»§æ‰¿å¤ç”¨ï¼š</h6><p>â€‹        ç»§æ‰¿å¤ç”¨è™½ç„¶æœ‰ç®€å•å’Œæ˜“å®ç°çš„ä¼˜ç‚¹ï¼Œä½†å®ƒä¹Ÿå­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š</p><ol><li>ç»§æ‰¿å¤ç”¨ç ´åäº†ç±»çš„å°è£…æ€§ã€‚å› ä¸ºç»§æ‰¿ä¼šå°†çˆ¶ç±»çš„å®ç°ç»†èŠ‚æš´éœ²ç»™å­ç±»ï¼Œçˆ¶ç±»å¯¹å­ç±»æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥è¿™ç§å¤ç”¨åˆç§°ä¸ºâ€œç™½ç®±â€å¤ç”¨ã€‚</li><li>å­ç±»ä¸çˆ¶ç±»çš„è€¦åˆåº¦é«˜ã€‚çˆ¶ç±»çš„å®ç°çš„ä»»ä½•æ”¹å˜éƒ½ä¼šå¯¼è‡´å­ç±»çš„å®ç°å‘ç”Ÿå˜åŒ–ï¼Œè¿™ä¸åˆ©äºç±»çš„æ‰©å±•ä¸ç»´æŠ¤ã€‚</li><li>å®ƒé™åˆ¶äº†å¤ç”¨çš„çµæ´»æ€§ã€‚ä»çˆ¶ç±»ç»§æ‰¿è€Œæ¥çš„å®ç°æ˜¯é™æ€çš„ï¼Œåœ¨ç¼–è¯‘æ—¶å·²ç»å®šä¹‰ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶ä¸å¯èƒ½å‘ç”Ÿå˜åŒ–</li></ol><h6 id="2-ç»„åˆå¤ç”¨ï¼š"><a href="#2-ç»„åˆå¤ç”¨ï¼š" class="headerlink" title="2.ç»„åˆå¤ç”¨ï¼š"></a>2.ç»„åˆå¤ç”¨ï¼š</h6><p>â€‹    å°†å·²æœ‰å¯¹è±¡çº³å…¥æ–°å¯¹è±¡ä¸­ï¼Œä½¿ä¹‹æˆä¸ºæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œæ–°å¯¹è±¡å¯ä»¥è°ƒç”¨å·²æœ‰å¯¹è±¡çš„åŠŸèƒ½</p><ol><li>å®ƒç»´æŒäº†ç±»çš„å°è£…æ€§ã€‚å› ä¸ºæˆåˆ†å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚æ˜¯æ–°å¯¹è±¡çœ‹ä¸è§çš„ï¼Œæ‰€ä»¥è¿™ç§å¤ç”¨åˆç§°ä¸ºâ€œé»‘ç®±â€å¤ç”¨ã€‚</li><li>æ–°æ—§ç±»ä¹‹é—´çš„è€¦åˆåº¦ä½ã€‚è¿™ç§å¤ç”¨æ‰€éœ€çš„ä¾èµ–è¾ƒå°‘ï¼Œæ–°å¯¹è±¡å­˜å–æˆåˆ†å¯¹è±¡çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡æˆåˆ†å¯¹è±¡çš„æ¥å£ã€‚</li><li>å¤ç”¨çš„çµæ´»æ€§é«˜ã€‚è¿™ç§å¤ç”¨å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€è¿›è¡Œï¼Œæ–°å¯¹è±¡å¯ä»¥åŠ¨æ€åœ°å¼•ç”¨ä¸æˆåˆ†å¯¹è±¡ç±»å‹ç›¸åŒçš„å¯¹è±¡ã€‚</li></ol><h5 id="2-åˆæˆå¤ç”¨åŸåˆ™çš„å®ç°ï¼š"><a href="#2-åˆæˆå¤ç”¨åŸåˆ™çš„å®ç°ï¼š" class="headerlink" title="2.åˆæˆå¤ç”¨åŸåˆ™çš„å®ç°ï¼š"></a>2.åˆæˆå¤ç”¨åŸåˆ™çš„å®ç°ï¼š</h5><p>ç”±äºåˆæˆå¤ç”¨åŸåˆ™æå€¡ä»¥ç»„åˆæ¥ä»£æ›¿ç»§æ‰¿ï¼Œåœ¨å®‰å“ä¸Šçš„ä½“ç°å¯èƒ½åœ¨ï¼Œæœ€æ–°çš„composeæŠ€æœ¯ï¼Œä»¥ç»„åˆçš„æ–¹å¼ä»£æ›¿åŸæœ¬çš„ç»§æ‰¿viewä½“ç³»ï¼Œå³å®ç°åŒä¸€ä¸ªå¤æ‚æ§ä»¶ï¼Œåœ¨viewä½“ç³»ä¸­buttonç»§æ‰¿textview,textviewåˆç»§æ‰¿viewï¼Œè¿™æ ·çš„ç»§æ‰¿å…³ç³»è¿‡äºå¤æ‚ã€‚è€Œåœ¨ composeä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹viewè¿›è¡Œç»„åˆå³å¯å®ŒæˆåŒæ ·çš„å¸ƒå±€ã€‚</p><p>åœ¨ javaä»£ç ä¸Šï¼Œä¾‹å¦‚æ±½è½¦åˆ†ç±»</p><p>æ±½è½¦æŒ‰â€œåŠ¨åŠ›æºâ€åˆ’åˆ†å¯åˆ†ä¸ºæ±½æ²¹æ±½è½¦ã€ç”µåŠ¨æ±½è½¦ç­‰ï¼›æŒ‰â€œé¢œè‰²â€åˆ’åˆ†å¯åˆ†ä¸ºç™½è‰²æ±½è½¦ã€é»‘è‰²æ±½è½¦å’Œçº¢è‰²æ±½è½¦ç­‰ã€‚å¦‚æœåŒæ—¶è€ƒè™‘è¿™ä¸¤ç§åˆ†ç±»ï¼Œå…¶ç»„åˆå°±å¾ˆå¤šã€‚å›¾ 1 æ‰€ç¤ºæ˜¯ç”¨ç»§æ‰¿ï¼šå…³ç³»å®ç°çš„æ±½è½¦åˆ†ç±»çš„ç±»å›¾ã€‚</p><p><img src="/2021/10/15/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A2%E3%80%8B/3-1Q113160133151.gif" alt="ç”¨ç»§æ‰¿å…³ç³»å®ç°çš„æ±½è½¦åˆ†ç±»çš„ç±»å›¾"></p><p>è€Œé‡‡ç”¨ç»„åˆå…³ç³»çš„è¯ï¼š</p><p><img src="/2021/10/15/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%8A2%E3%80%8B/3-1Q11316034X57.gif" alt="ç”¨ç»„åˆå…³ç³»å®ç°çš„æ±½è½¦åˆ†ç±»çš„ç±»å›¾"></p><p>å¾ˆæ˜æ˜¾ï¼Œå‡å°‘äº†ç»§æ‰¿å±‚æ•°ï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼Œä¹Ÿèƒ½æ›´å®¹æ˜“å‘ç°é”™è¯¯ï¼Œåœ¨æ‰©å±•æ€§ä¸Šï¼Œåªéœ€è¦åœ¨æ·»åŠ æ–°çš„åŠŸèƒ½ç±»å³å¯</p><h4 id="å¯¹ä¸ƒç§åŸåˆ™çš„ç®€å•ç†è§£"><a href="#å¯¹ä¸ƒç§åŸåˆ™çš„ç®€å•ç†è§£" class="headerlink" title="å¯¹ä¸ƒç§åŸåˆ™çš„ç®€å•ç†è§£"></a>å¯¹ä¸ƒç§åŸåˆ™çš„ç®€å•ç†è§£</h4><ul><li>å¼€é—­åŸåˆ™å¼ºè°ƒæ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹é¿å…</li><li>é‡Œæ°æ›¿æ¢åŸåˆ™å¼ºè°ƒç±»ç»§æ‰¿æ—¶å°½å¯èƒ½ä¸è¦ä¿®æ”¹çˆ¶ç±»</li><li>ä¾èµ–å€’ç½®åŸåˆ™å¼ºè°ƒé¢å‘æ¥å£ç¼–ç¨‹è€Œä¸æ˜¯é¢å‘å®ç°ç¼–ç¨‹ï¼Œä¸Šå±‚ä¸ä¾èµ–ä¸‹å±‚ï¼Œä¸‹å±‚ä¾èµ–ä¸Šå±‚ï¼Œæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆæ¥å£åŒ–ï¼Œåœ¨å»å®ç°æ¥å£ã€‚</li><li>å•ä¸€èŒè´£åŸåˆ™å¼ºè°ƒä¸€ä¸ªç±»çš„åŠŸèƒ½åº”è¯¥å•ä¸€åŒ–ï¼Œä¸æ˜¯ä½ è¯¥å¹²çš„äº‹å°±ä¸åº”è¯¥å‡ºç°åœ¨ç±»ä¸­ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å„æ–½å…¶èŒ</li><li>æ¥å£éš”ç¦»åŸåˆ™å¼ºè°ƒæ¥å£çš„ç»†åŒ–ï¼Œä¸€ä¸ªæ¥å£ä¸åº”è¯¥è¿‡äºåºå¤§</li><li>è¿ªç±³ç‰¹åŸåˆ™å¼ºè°ƒä¾èµ–ä¹‹é—´çš„éš”ç¦»ï¼Œå‡å°‘ä¸ç›¸å¹²äº‹ç‰©çš„ç›´æ¥é“¾æ¥ï¼Œåœ¨éœ€è¦æ—¶é€šè¿‡ä¸­ä»‹æ¥è¿›è¡Œé“¾æ¥ï¼Œé™ä½è€¦åˆåº¦</li><li>åˆæˆå¤ç”¨åŸåˆ™å¼ºè°ƒç»„åˆä»£æ›¿ç»§æ‰¿</li></ul><p>è®¿é—®åŠ é™åˆ¶ï¼Œå‡½æ•°è¦èŠ‚ä¿­ï¼Œä¾èµ–ä¸å…è®¸ï¼ŒåŠ¨æ€åŠ æ¥å£ï¼Œçˆ¶ç±»è¦æŠ½è±¡ï¼Œæ‰©å±•ä¸æ›´æ”¹ã€‚</p><p>æ ¹æœ¬ç›®çš„ä¸ºäº†é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆï¼Œå¢åŠ ç¨‹åºçš„å¯å¤ç”¨æ€§ã€å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>javaè®¾è®¡æ¨¡å¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jvavè®¾è®¡æ¨¡å¼</title>
    <link href="/2021/10/15/jvav%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <url>/2021/10/15/jvav%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="Javaè®¾è®¡æ¨¡å¼ã€Š1ã€‹"><a href="#Javaè®¾è®¡æ¨¡å¼ã€Š1ã€‹" class="headerlink" title="Javaè®¾è®¡æ¨¡å¼ã€Š1ã€‹"></a>Javaè®¾è®¡æ¨¡å¼ã€Š1ã€‹</h2><p>è®¾è®¡æ¨¡å¼ï¼ˆDesign Patternï¼‰æ˜¯å‰è¾ˆä»¬å¯¹ä»£ç å¼€å‘ç»éªŒçš„æ€»ç»“ï¼Œæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ã€‚å®ƒä¸æ˜¯è¯­æ³•è§„å®šï¼Œè€Œæ˜¯ä¸€å¥—ç”¨æ¥æé«˜ä»£ç å¯å¤ç”¨æ€§ã€å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ã€ç¨³å¥æ€§ä»¥åŠå®‰å…¨æ€§çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ä½¿ç”¨è®¾è®¡æ¨¡å¼å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ã€‚</p><ul><li>å¯ä»¥æé«˜ç¨‹åºå‘˜çš„æ€ç»´èƒ½åŠ›ã€ç¼–ç¨‹èƒ½åŠ›å’Œè®¾è®¡èƒ½åŠ›ã€‚</li><li>ä½¿ç¨‹åºè®¾è®¡æ›´åŠ æ ‡å‡†åŒ–ã€ä»£ç ç¼–åˆ¶æ›´åŠ å·¥ç¨‹åŒ–ï¼Œä½¿è½¯ä»¶å¼€å‘æ•ˆç‡å¤§å¤§æé«˜ï¼Œä»è€Œç¼©çŸ­è½¯ä»¶çš„å¼€å‘å‘¨æœŸã€‚</li><li>ä½¿è®¾è®¡çš„ä»£ç å¯é‡ç”¨æ€§é«˜ã€å¯è¯»æ€§å¼ºã€å¯é æ€§é«˜ã€çµæ´»æ€§å¥½ã€å¯ç»´æŠ¤æ€§å¼º</li></ul><p>è®¾è®¡æ¨¡å¼ä¸æ˜¯ä¸ºäº†ç”¨è€Œç”¨ï¼Œè€Œæ˜¯åœ¨é€‚å½“çš„æƒ…å†µä¸‹ä½¿ç”¨</p><h3 id="23ç§è®¾è®¡æ¨¡å¼ç®€å•åˆ†ç±»"><a href="#23ç§è®¾è®¡æ¨¡å¼ç®€å•åˆ†ç±»" class="headerlink" title="23ç§è®¾è®¡æ¨¡å¼ç®€å•åˆ†ç±»"></a>23ç§è®¾è®¡æ¨¡å¼ç®€å•åˆ†ç±»</h3><h4 id="1-æ ¹æ®ç›®çš„æ¥è¿›è¡Œåˆ’åˆ†ï¼Œå¯åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼ï¼Œç»“æ„å‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼"><a href="#1-æ ¹æ®ç›®çš„æ¥è¿›è¡Œåˆ’åˆ†ï¼Œå¯åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼ï¼Œç»“æ„å‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼" class="headerlink" title="1.æ ¹æ®ç›®çš„æ¥è¿›è¡Œåˆ’åˆ†ï¼Œå¯åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼ï¼Œç»“æ„å‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼"></a>1.æ ¹æ®ç›®çš„æ¥è¿›è¡Œåˆ’åˆ†ï¼Œå¯åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼ï¼Œç»“æ„å‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼</h4><ol><li>åˆ›å»ºå‹æ¨¡å¼ï¼šç”¨äºæè¿°â€œæ€æ ·åˆ›å»ºå¯¹è±¡â€ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯â€œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»â€ã€‚GoF ä¸­æä¾›äº†å•ä¾‹ã€åŸå‹ã€å·¥å‚æ–¹æ³•ã€æŠ½è±¡å·¥å‚ã€å»ºé€ è€…ç­‰ 5 ç§åˆ›å»ºå‹æ¨¡å¼ã€‚</li><li>ç»“æ„å‹æ¨¡å¼ï¼šç”¨äºæè¿°å¦‚ä½•å°†ç±»æˆ–å¯¹è±¡æŒ‰æŸç§å¸ƒå±€ç»„æˆæ›´å¤§çš„ç»“æ„ï¼ŒGoF ä¸­æä¾›äº†ä»£ç†ã€é€‚é…å™¨ã€æ¡¥æ¥ã€è£…é¥°ã€å¤–è§‚ã€äº«å…ƒã€ç»„åˆç­‰ 7 ç§ç»“æ„å‹æ¨¡å¼ã€‚</li><li>è¡Œä¸ºå‹æ¨¡å¼ï¼šç”¨äºæè¿°ç±»æˆ–å¯¹è±¡ä¹‹é—´æ€æ ·ç›¸äº’åä½œå…±åŒå®Œæˆå•ä¸ªå¯¹è±¡éƒ½æ— æ³•å•ç‹¬å®Œæˆçš„ä»»åŠ¡ï¼Œä»¥åŠæ€æ ·åˆ†é…èŒè´£ã€‚GoF ä¸­æä¾›äº†æ¨¡æ¿æ–¹æ³•ã€ç­–ç•¥ã€å‘½ä»¤ã€èŒè´£é“¾ã€çŠ¶æ€ã€è§‚å¯Ÿè€…ã€ä¸­ä»‹è€…ã€è¿­ä»£å™¨ã€è®¿é—®è€…ã€å¤‡å¿˜å½•ã€è§£é‡Šå™¨ç­‰ 11 ç§è¡Œä¸ºå‹æ¨¡å¼ã€‚</li></ol><h4 id="2-æ ¹æ®ä½œç”¨èŒƒå›´æ¥åˆ†ï¼Œå¯åˆ†ä¸ºç±»æ¨¡å¼å’Œå¯¹è±¡æ¨¡å¼"><a href="#2-æ ¹æ®ä½œç”¨èŒƒå›´æ¥åˆ†ï¼Œå¯åˆ†ä¸ºç±»æ¨¡å¼å’Œå¯¹è±¡æ¨¡å¼" class="headerlink" title="2.æ ¹æ®ä½œç”¨èŒƒå›´æ¥åˆ†ï¼Œå¯åˆ†ä¸ºç±»æ¨¡å¼å’Œå¯¹è±¡æ¨¡å¼"></a>2.æ ¹æ®ä½œç”¨èŒƒå›´æ¥åˆ†ï¼Œå¯åˆ†ä¸ºç±»æ¨¡å¼å’Œå¯¹è±¡æ¨¡å¼</h4><ol><li>ç±»æ¨¡å¼ï¼šç”¨äºå¤„ç†ç±»ä¸å­ç±»ä¹‹é—´çš„å…³ç³»ï¼Œè¿™äº›å…³ç³»é€šè¿‡ç»§æ‰¿æ¥å»ºç«‹ï¼Œæ˜¯é™æ€çš„ï¼Œåœ¨ç¼–è¯‘æ—¶åˆ»ä¾¿ç¡®å®šä¸‹æ¥äº†ã€‚GoFä¸­çš„å·¥å‚æ–¹æ³•ã€ï¼ˆç±»ï¼‰é€‚é…å™¨ã€æ¨¡æ¿æ–¹æ³•ã€è§£é‡Šå™¨å±äºè¯¥æ¨¡å¼ã€‚</li><li>å¯¹è±¡æ¨¡å¼ï¼šç”¨äºå¤„ç†å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œè¿™äº›å…³ç³»å¯ä»¥é€šè¿‡ç»„åˆæˆ–èšåˆæ¥å®ç°ï¼Œåœ¨è¿è¡Œæ—¶åˆ»æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œæ›´å…·åŠ¨æ€æ€§ã€‚GoF ä¸­é™¤äº†ä»¥ä¸Š 4 ç§ï¼Œå…¶ä»–çš„éƒ½æ˜¯å¯¹è±¡æ¨¡å¼ã€‚</li></ol><h3 id="UMLä¸‹çš„ç±»å…³ç³»"><a href="#UMLä¸‹çš„ç±»å…³ç³»" class="headerlink" title="UMLä¸‹çš„ç±»å…³ç³»"></a>UMLä¸‹çš„ç±»å…³ç³»</h3><h5 id="1-ç±»"><a href="#1-ç±»" class="headerlink" title="1.ç±»"></a>1.ç±»</h5><p>ç±»ï¼ˆClassï¼‰æ˜¯æŒ‡å…·æœ‰ç›¸åŒå±æ€§ã€æ–¹æ³•å’Œå…³ç³»çš„å¯¹è±¡çš„æŠ½è±¡ï¼Œå®ƒå°è£…äº†æ•°æ®å’Œè¡Œä¸ºï¼Œæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ˆOOPï¼‰çš„åŸºç¡€ï¼Œå…·æœ‰å°è£…æ€§ã€ç»§æ‰¿æ€§å’Œå¤šæ€æ€§ç­‰ä¸‰å¤§ç‰¹æ€§</p><h5 id="2-æ¥å£"><a href="#2-æ¥å£" class="headerlink" title="2.æ¥å£"></a>2.æ¥å£</h5><p>æ¥å£ï¼ˆInterfaceï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œå®ƒå…·æœ‰ç±»çš„ç»“æ„ä½†ä¸å¯è¢«å®ä¾‹åŒ–ï¼Œåªå¯ä»¥è¢«å­ç±»å®ç°ã€‚å®ƒåŒ…å«æŠ½è±¡æ“ä½œï¼Œä½†ä¸åŒ…å«å±æ€§ã€‚å®ƒæè¿°äº†ç±»æˆ–ç»„ä»¶å¯¹å¤–å¯è§çš„åŠ¨ä½œ</p><h4 id="1-ä¾èµ–å…³ç³»"><a href="#1-ä¾èµ–å…³ç³»" class="headerlink" title="1.ä¾èµ–å…³ç³»"></a>1.ä¾èµ–å…³ç³»</h4><p>ä¾èµ–ï¼ˆDependencyï¼‰å…³ç³»æ˜¯ä¸€ç§ä½¿ç”¨å…³ç³»ï¼Œå®ƒæ˜¯å¯¹è±¡ä¹‹é—´è€¦åˆåº¦æœ€å¼±çš„ä¸€ç§å…³è”æ–¹å¼ï¼Œæ˜¯ä¸´æ—¶æ€§çš„å…³è”ã€‚åœ¨ä»£ç ä¸­ï¼ŒæŸä¸ªç±»çš„æ–¹æ³•é€šè¿‡å±€éƒ¨å˜é‡ã€æ–¹æ³•çš„å‚æ•°æˆ–è€…å¯¹é™æ€æ–¹æ³•çš„è°ƒç”¨æ¥è®¿é—®å¦ä¸€ä¸ªç±»ï¼ˆè¢«ä¾èµ–ç±»ï¼‰ä¸­çš„æŸäº›æ–¹æ³•æ¥å®Œæˆä¸€äº›èŒè´£ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨å®‰å“å¼€å‘ä¸­ï¼Œactivityä¾èµ–ä¸viewmodelæ¥è°ƒç”¨viewmodelä¸­çš„æ–¹æ³•</p><h4 id="2-å…³è”å…³ç³»"><a href="#2-å…³è”å…³ç³»" class="headerlink" title="2.å…³è”å…³ç³»"></a>2.å…³è”å…³ç³»</h4><p>å…³è”ï¼ˆAssociationï¼‰å…³ç³»æ˜¯å¯¹è±¡ä¹‹é—´çš„ä¸€ç§å¼•ç”¨å…³ç³»ï¼Œç”¨äºè¡¨ç¤ºä¸€ç±»å¯¹è±¡ä¸å¦ä¸€ç±»å¯¹è±¡ä¹‹é—´çš„è”ç³»ï¼Œå¦‚è€å¸ˆå’Œå­¦ç”Ÿã€å¸ˆå‚…å’Œå¾’å¼Ÿã€ä¸ˆå¤«å’Œå¦»å­ç­‰ã€‚å…³è”å…³ç³»æ˜¯ç±»ä¸ç±»ä¹‹é—´æœ€å¸¸ç”¨çš„ä¸€ç§å…³ç³»ï¼Œåˆ†ä¸ºä¸€èˆ¬å…³è”å…³ç³»ã€èšåˆå…³ç³»å’Œç»„åˆå…³ç³»ã€‚</p><p>åœ¨ä»£ç ä¸­é€šå¸¸å°†ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºå¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡æ¥å®ç°å…³è”å…³ç³»ï¼Œæ¯”å¦‚c++ä¸­çš„å‹å…ƒå‡½æ•°ï¼Œåœ¨c++ä¸­ç±»ä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªfriendå˜é‡ï¼ˆå…¶ä»–ç±»ï¼Œæ¥ä½¿å¾—å…¶ä»–ç±»å¯ä»¥è®¿é—®æ­¤ç±»</p><h4 id="3-èšåˆå…³ç³»"><a href="#3-èšåˆå…³ç³»" class="headerlink" title="3. èšåˆå…³ç³»"></a>3. èšåˆå…³ç³»</h4><p>èšåˆï¼ˆAggregationï¼‰å…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯å¼ºå…³è”å…³ç³»ï¼Œæ˜¯æ•´ä½“å’Œéƒ¨åˆ†ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯ has-a çš„å…³ç³»ã€‚</p><p>èšåˆå…³ç³»ä¹Ÿæ˜¯é€šè¿‡æˆå‘˜å¯¹è±¡æ¥å®ç°çš„ï¼Œå…¶ä¸­æˆå‘˜å¯¹è±¡æ˜¯æ•´ä½“å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯æˆå‘˜å¯¹è±¡å¯ä»¥è„±ç¦»æ•´ä½“å¯¹è±¡è€Œç‹¬ç«‹å­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œå­¦æ ¡ä¸è€å¸ˆçš„å…³ç³»ï¼Œå­¦æ ¡åŒ…å«è€å¸ˆï¼Œä½†å¦‚æœå­¦æ ¡åœåŠäº†ï¼Œè€å¸ˆä¾ç„¶å­˜åœ¨ã€‚</p><h4 id="4-ç»„åˆå…³ç³»"><a href="#4-ç»„åˆå…³ç³»" class="headerlink" title="4.ç»„åˆå…³ç³»"></a>4.ç»„åˆå…³ç³»</h4><p>ç»„åˆï¼ˆCompositionï¼‰å…³ç³»ä¹Ÿæ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œä¹Ÿè¡¨ç¤ºç±»ä¹‹é—´çš„æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ï¼Œä½†å®ƒæ˜¯ä¸€ç§æ›´å¼ºçƒˆçš„èšåˆå…³ç³»ï¼Œæ˜¯ cxmtains-a å…³ç³»ã€‚</p><p>åœ¨ç»„åˆå…³ç³»ä¸­ï¼Œæ•´ä½“å¯¹è±¡å¯ä»¥æ§åˆ¶éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸€æ—¦æ•´ä½“å¯¹è±¡ä¸å­˜åœ¨ï¼Œéƒ¨åˆ†å¯¹è±¡ä¹Ÿå°†ä¸å­˜åœ¨ï¼Œéƒ¨åˆ†å¯¹è±¡ä¸èƒ½è„±ç¦»æ•´ä½“å¯¹è±¡è€Œå­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œå¤´å’Œå˜´çš„å…³ç³»ï¼Œæ²¡æœ‰äº†å¤´ï¼Œå˜´ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚</p><p>åœ¨å®‰å“ç›®å‰çš„composeä¸­ï¼Œè§†å›¾æ„å»ºä½¿ç”¨composeå‡½æ•°å°±æ˜¯é€šè¿‡ç»„åˆæ¥ä»£æ›¿ç»§æ‰¿ï¼ˆä¼ ç»Ÿ viewä½“ç³»ï¼Œå¯¼è‡´ç±»ç»§æ‰¿è¶Šæ¥è¶Šå¤§</p><h4 id="5-æ³›åŒ–å…³ç³»"><a href="#5-æ³›åŒ–å…³ç³»" class="headerlink" title="5.æ³›åŒ–å…³ç³»"></a>5.æ³›åŒ–å…³ç³»</h4><p>æ³›åŒ–ï¼ˆGeneralizationï¼‰å…³ç³»æ˜¯å¯¹è±¡ä¹‹é—´è€¦åˆåº¦æœ€å¤§çš„ä¸€ç§å…³ç³»ï¼Œè¡¨ç¤ºä¸€èˆ¬ä¸ç‰¹æ®Šçš„å…³ç³»ï¼Œæ˜¯çˆ¶ç±»ä¸å­ç±»ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œæ˜¯ is-a çš„å…³ç³»ã€‚</p><p>ä¾‹å¦‚ï¼Œè‹¹æœæ˜¯æ°´æœçš„å­ç±»ï¼Œè‹¹æœå°±æ˜¯æ°´æœçš„æ³›åŒ–</p><h4 id="6-å®ç°å…³ç³»"><a href="#6-å®ç°å…³ç³»" class="headerlink" title="6.å®ç°å…³ç³»"></a>6.å®ç°å…³ç³»</h4><p>å®ç°ï¼ˆRealizationï¼‰å…³ç³»æ˜¯æ¥å£ä¸å®ç°ç±»ä¹‹é—´çš„å…³ç³»ã€‚åœ¨è¿™ç§å…³ç³»ä¸­ï¼Œç±»å®ç°äº†æ¥å£ï¼Œç±»ä¸­çš„æ“ä½œå®ç°äº†æ¥å£ä¸­æ‰€å£°æ˜çš„æ‰€æœ‰çš„æŠ½è±¡æ“ä½œã€‚</p><p>ä¾‹å¦‚ï¼Œäº¤é€šå·¥å…·æ¥å£ï¼Œè½¦è¾†å®ç°äº†æ­¤æ¥å£ï¼Œè½¦è¾†å°±æ˜¯äº¤é€šå·¥å…·æ¥å£çš„å®ç°ç±»ã€</p><h4 id="ç±»å…³ç³»è®°å¿†æŠ€å·§"><a href="#ç±»å…³ç³»è®°å¿†æŠ€å·§" class="headerlink" title="ç±»å…³ç³»è®°å¿†æŠ€å·§"></a><a href="http://c.biancheng.net/view/8375.html">ç±»å…³ç³»è®°å¿†æŠ€å·§</a></h4><h3 id="ä¼˜ç§€è®¾è®¡çš„ç‰¹å¾"><a href="#ä¼˜ç§€è®¾è®¡çš„ç‰¹å¾" class="headerlink" title="ä¼˜ç§€è®¾è®¡çš„ç‰¹å¾"></a>ä¼˜ç§€è®¾è®¡çš„ç‰¹å¾</h3><ol><li>1.ä»£ç å¤ç”¨</li><li>2.æ‰©å±•æ€§</li></ol>]]></content>
    
    
    <categories>
      
      <category>javaè®¾è®¡æ¨¡å¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>rustä¸­é«˜è¯­æ³•</title>
    <link href="/2021/10/15/rust%E4%B8%AD%E9%AB%98%E8%AF%AD%E6%B3%95/"/>
    <url>/2021/10/15/rust%E4%B8%AD%E9%AB%98%E8%AF%AD%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="Rust-è¯­æ³•å­¦ä¹ "><a href="#Rust-è¯­æ³•å­¦ä¹ " class="headerlink" title="Rust è¯­æ³•å­¦ä¹ "></a>Rust è¯­æ³•å­¦ä¹ </h2><h3 id="æ‰€æœ‰æƒä¸ç”Ÿå‘½å‘¨æœŸ"><a href="#æ‰€æœ‰æƒä¸ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ‰€æœ‰æƒä¸ç”Ÿå‘½å‘¨æœŸ"></a>æ‰€æœ‰æƒä¸ç”Ÿå‘½å‘¨æœŸ</h3><p>Rust åœ¨åƒåœ¾å›æ”¶ä¸Šçš„åšæ³•ä¸åŒäºå…¶ä»–è¯­è¨€ï¼Œæ¯”å¦‚javaç­‰çš„gcæœºåˆ¶ï¼Œc/cppçš„ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†ï¼Œrustèµ°å‡ºäº†ç¬¬ä¸‰æ¡è·¯ï¼Œä»¥æ‰€æœ‰æƒå’Œç”Ÿå‘½å‘¨æœŸæœºåˆ¶æ¥å¤„ç†åƒåœ¾ã€‚</p><p>åœ¨æ€è€ƒrustä¸ºä»€ä¹ˆè¦è€ƒè™‘è¿™ç§æ–¹å¼æ—¶ï¼Œä¸ªäººå¯¹æ­¤æœ‰ä¸€ç‚¹è®¤ä¸ºæ˜¯ï¼Œåƒåœ¾å›æ”¶ä¾‹å¦‚jvmçš„è¯ï¼Œåœ¨å›æ”¶åƒåœ¾æ—¶éœ€è¦stop the world</p><p>,è¿™ä½¿å¾—é‡‡ç”¨gcæœºåˆ¶çš„æ€§èƒ½ä¼šç¨é€Šä¸€ç­¹ï¼Œä½†æ˜¯ cå’Œcppçš„æ‰‹åŠ¨ç®¡ç†ï¼Œå¦‚æœæ˜¯ç²—å¿ƒçš„ç¨‹åºå‘˜ï¼Œé‚£å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä¸¥é‡çš„åæœï¼Œï¼ˆä½†æ˜¯rustçš„æ‰€æœ‰æƒï¼Œç”Ÿå‘½å‘¨æœŸä¹Ÿä¸å¤ªå¥½å­¦ï¼‰</p><p>æ¥è‡ªå®˜æ–¹æ–‡æ¡£ä¸Šçš„ä¾‹å­</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">as_str</span></span>(data: &amp;<span class="hljs-built_in">u32</span>) -&gt; &amp;<span class="hljs-built_in">str</span> &#123;<br>    <span class="hljs-comment">// è®¡ç®—å­—ç¬¦ä¸²</span><br>    <span class="hljs-keyword">let</span> s = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, data);<br><br>    <span class="hljs-comment">// å“å‘€ï¼æˆ‘ä»¬è¿”å›äº†ä¸€ä¸ªåªåœ¨å‡½æ•°å†…éƒ¨å­˜åœ¨çš„ä¸œè¥¿çš„å¼•ç”¨</span><br>    <span class="hljs-comment">// æ‚¬å‚æŒ‡é’ˆï¼é‡Šæ”¾åå¼•ç”¨ï¼æŒ‡é’ˆåˆ«åï¼</span><br>    <span class="hljs-comment">// ï¼ˆå½“ç„¶è¿™æ®µä»£ç åœ¨Rustä¸­ä¸èƒ½ç¼–è¯‘ï¼‰</span><br>    &amp;s<br>&#125;<br></code></pre></td></tr></table></figure><p> Rust çš„æ‰€æœ‰æƒç³»ç»Ÿä½¿å¾—Rust çŸ¥é“ <code>&amp;s</code> ç”Ÿæ•ˆçš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥å¯ä»¥é¿å…å‡ºç°é€ƒé€¸</p><p>æœ‰ä¸¤ç§å¼•ç”¨çš„ç±»å‹ï¼š</p><ul><li>å…±äº«æŒ‡é’ˆï¼š<code>&amp;</code></li><li>å¯å˜æŒ‡é’ˆï¼š<code>&amp;mut</code></li></ul><p>å®ƒä»¬éµå®ˆä»¥ä¸‹çš„è§„åˆ™ï¼š</p><ul><li>å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…è¿‡è¢«å¼•ç”¨å†…å®¹</li><li>å¯å˜å¼•ç”¨ä¸èƒ½å­˜åœ¨åˆ«å (alias)</li></ul>]]></content>
    
    
    <categories>
      
      <category>Rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>rust</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ruståŸºç¡€è¯­æ³•</title>
    <link href="/2021/10/13/rust%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
    <url>/2021/10/13/rust%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="RUSTåŸºç¡€è¯­æ³•"><a href="#RUSTåŸºç¡€è¯­æ³•" class="headerlink" title="RUSTåŸºç¡€è¯­æ³•"></a>RUSTåŸºç¡€è¯­æ³•</h2><h3 id="ä¸€ï¼Œä»Hello-World-è¿›å…¥"><a href="#ä¸€ï¼Œä»Hello-World-è¿›å…¥" class="headerlink" title="ä¸€ï¼Œä»Hello World è¿›å…¥"></a>ä¸€ï¼Œä»Hello World è¿›å…¥</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹åœ¨pythonä¸­çš„å‡½æ•°æ˜¯å¦‚ä½•å®šä¹‰çš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hello</span>(<span class="hljs-params">a, b</span>):</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;hello world!&quot;</span>)<br></code></pre></td></tr></table></figure><p>åœ¨kotlinä¸­å¦‚ä½•å®šä¹‰</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    println(<span class="hljs-string">&quot;hello world!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œåœ¨rustä¸­ï¼Œæˆ‘ä»¬çš„hello worldï¼ˆä¸»å‡½æ•° åˆ™æ˜¯è¿™æ ·çš„</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Hello, world!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œrust ä½¿ç”¨ <em>fn</em> æ¥æ ‡è®°å‡½æ•°ï¼Œç±»ä¼¼äºkotlin çš„ fun å’Œ python çš„ def ,å…¶æ¬¡rust ä¾ç„¶ä¿ç•™äº† <em>;</em> æ¥è¿›è¡Œè¯­å¥åˆ†å‰²</p><p>è€Œè¿™é‡Œä½¿ç”¨çš„ â€œprintln!â€ ä¹Ÿä¸æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œè€Œæ˜¯ <em>å®</em></p><h3 id="äºŒ-ï¼ŒåŸºç¡€æ•°æ®ç±»å‹"><a href="#äºŒ-ï¼ŒåŸºç¡€æ•°æ®ç±»å‹" class="headerlink" title="äºŒ ï¼ŒåŸºç¡€æ•°æ®ç±»å‹"></a>äºŒ ï¼ŒåŸºç¡€æ•°æ®ç±»å‹</h3><p>åœ¨ Rust ä¸­ï¼Œæ¯ä¸€ä¸ªå€¼éƒ½å±äºæŸä¸€ä¸ª æ•°æ®ç±»å‹ï¼ˆdata typeï¼‰ï¼Œè¿™å‘Šè¯‰ Rust å®ƒè¢«æŒ‡å®šä¸ºä½•ç§æ•°æ®ï¼Œä»¥ä¾¿æ˜ç¡®æ•°æ®å¤„ç†æ–¹å¼ã€‚æˆ‘ä»¬å°†çœ‹åˆ°ä¸¤ç±»æ•°æ®ç±»å‹å­é›†ï¼šæ ‡é‡ï¼ˆscalarï¼‰å’Œå¤åˆï¼ˆcompoundï¼‰ã€‚</p><h4 id="Rust-ä¸­çš„æ•´å‹"><a href="#Rust-ä¸­çš„æ•´å‹" class="headerlink" title="Rust ä¸­çš„æ•´å‹"></a>Rust ä¸­çš„æ•´å‹</h4><table><thead><tr><th><strong>é•¿åº¦</strong></th><th><strong>æœ‰ç¬¦å·</strong></th><th><strong>æ— ç¬¦å·</strong></th></tr></thead><tbody><tr><td>8-bit</td><td><code>i8</code></td><td><code>u8</code></td></tr><tr><td>16-bit</td><td><code>i16</code></td><td><code>u16</code></td></tr><tr><td>32-bit</td><td><code>i32</code></td><td><code>u32</code></td></tr><tr><td>64-bit</td><td><code>i64</code></td><td><code>u64</code></td></tr><tr><td>arch</td><td><code>isize</code></td><td><code>usize</code></td></tr></tbody></table><h4 id="Rust-ä¸­çš„æµ®ç‚¹æ•°"><a href="#Rust-ä¸­çš„æµ®ç‚¹æ•°" class="headerlink" title="Rust ä¸­çš„æµ®ç‚¹æ•°"></a>Rust ä¸­çš„æµ®ç‚¹æ•°</h4><p>Rust ä¸­æµ®ç‚¹æ•°æœ‰ä¸¤ç§ç±»å‹ åˆ†åˆ«ä¸º <code>f32</code> ä¸ <code>f64</code> ,åœ¨é€Ÿåº¦ä¸Šï¼Œä¸¤è€…å¹¶æ— åŒºåˆ«ï¼Œç„¶è€Œ <strong>f64</strong> çš„ç²¾åº¦æ›´é«˜</p><h4 id="Rust-ä¸­çš„-å¸ƒå°”å‹"><a href="#Rust-ä¸­çš„-å¸ƒå°”å‹" class="headerlink" title="Rust ä¸­çš„ å¸ƒå°”å‹"></a>Rust ä¸­çš„ å¸ƒå°”å‹</h4><p>rust ä¸­çš„å¸ƒå°”å‹ä¸º <code>bool</code> å…¶ä¸¤ä¸ªå€¼åˆ†åˆ«ä¸º <code>true</code> å’Œ <code>false</code> </p><h4 id="Rust-ä¸­çš„å­—ç¬¦ç±»å‹"><a href="#Rust-ä¸­çš„å­—ç¬¦ç±»å‹" class="headerlink" title="Rust ä¸­çš„å­—ç¬¦ç±»å‹"></a>Rust ä¸­çš„å­—ç¬¦ç±»å‹</h4><p>rust ä¸­ä½¿ç”¨  <code>&#39; &#39;</code> æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ç±»å‹ä¸º  <code>char</code> ,å½“ç„¶ä¸æ­¢äºæ™®é€šå­—ç¬¦ï¼Œrust ç”šè‡³å¯ä»¥è¡¨ç¤ºè¡¨æƒ…</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> heart_eyed_cat = &#x27;ğŸ˜»&#x27;;<br></code></pre></td></tr></table></figure><h4 id="Rust-ä¸­çš„å¤åˆç±»å‹"><a href="#Rust-ä¸­çš„å¤åˆç±»å‹" class="headerlink" title="Rust ä¸­çš„å¤åˆç±»å‹"></a>Rust ä¸­çš„å¤åˆç±»å‹</h4><p><strong>å¤åˆç±»å‹</strong>ï¼ˆ<em>Compound types</em>ï¼‰å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰ã€‚</p><h5 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h5><p>å…ƒç»„æ˜¯ä¸€ä¸ªå°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨åŒ…å«åœ¨åœ†æ‹¬å·ä¸­çš„é€—å·åˆ†éš”çš„å€¼åˆ—è¡¨æ¥åˆ›å»ºä¸€ä¸ªå…ƒç»„ã€‚å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œè€Œä¸”è¿™äº›ä¸åŒå€¼çš„ç±»å‹ä¹Ÿä¸å¿…æ˜¯ç›¸åŒçš„ã€‚è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨äº†å¯é€‰çš„ç±»å‹æ³¨è§£ï¼š</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> tup: (<span class="hljs-built_in">i32</span>, <span class="hljs-built_in">f64</span>, <span class="hljs-built_in">u8</span>) = (<span class="hljs-number">500</span>, <span class="hljs-number">6.4</span>, <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p>rust åŒæ—¶ä¹Ÿæ‹¥æœ‰å…¶ä»–é«˜çº§è¯­è¨€è§£æ„çš„ç‰¹æ€§</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> tup = (<span class="hljs-number">500</span>, <span class="hljs-number">6.4</span>, <span class="hljs-number">1</span>);<br><span class="hljs-keyword">let</span> (x, y, z) = tup;<br></code></pre></td></tr></table></figure><p>å…¶ä¹Ÿå¯ä»¥ä½¿ç”¨  <code>.</code> æ¥è¿›è¡Œè®¿é—®</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> x: (<span class="hljs-built_in">i32</span>, <span class="hljs-built_in">f64</span>, <span class="hljs-built_in">u8</span>) = (<span class="hljs-number">500</span>, <span class="hljs-number">6.4</span>, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">let</span> five_hundred = x.<span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> six_point_four = x.<span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">let</span> one = x.<span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h5><p>ä¸å…ƒç»„ä¸åŒï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚Rust ä¸­çš„æ•°ç»„ä¸ä¸€äº›å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ä¸åŒï¼Œå› ä¸º Rust ä¸­çš„æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„ï¼šä¸€æ—¦å£°æ˜ï¼Œå®ƒä»¬çš„é•¿åº¦ä¸èƒ½å¢é•¿æˆ–ç¼©å°ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>   <span class="hljs-keyword">let</span> a: [<span class="hljs-built_in">i32</span>; <span class="hljs-number">5</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä½¿ç”¨ <code>[]</code> æ¥è¿›è¡Œè®¿é—®</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><br>    <span class="hljs-keyword">let</span> first = a[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">let</span> second = a[<span class="hljs-number">1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœè®¿é—®ä¸‹æ ‡è¶…å‡ºï¼Œrust åˆ™ä¼šé‡‡ç”¨ç±»ä¼¼javaçš„æ–¹å¼ï¼ŒæŠ›å‡ºä¸€ä¸ª <em>panic</em></p><h3 id="ä¸‰-å˜é‡ä¸å¯å˜æ€§"><a href="#ä¸‰-å˜é‡ä¸å¯å˜æ€§" class="headerlink" title="ä¸‰,  å˜é‡ä¸å¯å˜æ€§"></a>ä¸‰,  å˜é‡ä¸å¯å˜æ€§</h3><p>rust ä½¿ç”¨ let æ¥è¿›è¡Œå˜é‡çš„å£°æ˜ï¼Œ</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>()&#123;<br>    <span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ï¼Œä½ æ— æ³•å¯¹æ­¤å˜é‡è¿›è¡Œèƒ½æ”¹å˜å…¶å€¼çš„æ“ä½œï¼Œæ¯”å¦‚ +-*/ç­‰ï¼Œ</p><p>ä½†å¯ä»¥åˆ©ç”¨rust çš„é‡å½±ç‰¹æ€§</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>()&#123;<br>    <span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> a = <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,a);<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ƒå°†éšè—æ‰ç¬¬ä¸€æ¬¡a çš„å€¼ï¼Œå³ç°åœ¨a  ä¸º2</p><p>å¦‚æœæˆ‘ä»¬ä¸€å®šè¦å¯¹å€¼è¿›è¡Œæ”¹å˜çš„è¯ï¼Œå¯ä»¥åœ¨å£°æ˜å˜é‡æ—¶è¿›è¡Œè¿™æ ·çš„æ“ä½œ</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>()&#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> a =<span class="hljs-number">1</span>;<br>    a = a+<span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,a);<br>&#125;<br></code></pre></td></tr></table></figure><p>å£°æ˜å¸¸é‡</p><p>å¸¸é‡ï¼ˆconstantsï¼‰ã€‚ç±»ä¼¼äºä¸å¯å˜å˜é‡ï¼Œå¸¸é‡æ˜¯ç»‘å®šåˆ°ä¸€ä¸ªåç§°çš„ä¸å…è®¸æ”¹å˜çš„å€¼ï¼Œä¸è¿‡å¸¸é‡ä¸å˜é‡è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«ã€‚</p><p>é¦–å…ˆï¼Œä¸å…è®¸å¯¹å¸¸é‡ä½¿ç”¨ mutã€‚å¸¸é‡ä¸å…‰é»˜è®¤ä¸èƒ½å˜ï¼Œå®ƒæ€»æ˜¯ä¸èƒ½å˜ã€‚</p><p>å£°æ˜å¸¸é‡ä½¿ç”¨ const å…³é”®å­—è€Œä¸æ˜¯ letï¼Œå¹¶ä¸” å¿…é¡» æ³¨æ˜å€¼çš„ç±»å‹ã€‚åœ¨ä¸‹ä¸€éƒ¨åˆ†ï¼Œã€Œæ•°æ®ç±»å‹ã€ ä¸­ä¼šä»‹ç»ç±»å‹å’Œç±»å‹æ³¨è§£ï¼Œç°åœ¨æ— éœ€å…³å¿ƒè¿™äº›ç»†èŠ‚ï¼Œè®°ä½æ€»æ˜¯æ ‡æ³¨ç±»å‹å³å¯ã€‚</p><p>å¸¸é‡å¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸä¸­å£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸï¼Œè¿™åœ¨ä¸€ä¸ªå€¼éœ€è¦è¢«å¾ˆå¤šéƒ¨åˆ†çš„ä»£ç ç”¨åˆ°æ—¶å¾ˆæœ‰ç”¨ã€‚</p><p>æœ€åä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¸¸é‡åªèƒ½è¢«è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œä¸èƒ½æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œæˆ–ä»»ä½•å…¶ä»–åªèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—å‡ºçš„å€¼ã€‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">const</span> MAX_POINTS: <span class="hljs-built_in">u32</span> = <span class="hljs-number">100_000</span>;<br></code></pre></td></tr></table></figure><h3 id="å››ï¼Œæ§åˆ¶æµç¨‹"><a href="#å››ï¼Œæ§åˆ¶æµç¨‹" class="headerlink" title="å››ï¼Œæ§åˆ¶æµç¨‹"></a>å››ï¼Œæ§åˆ¶æµç¨‹</h3><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><p><code>if</code> è¡¨è¾¾å¼å…è®¸æ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç åˆ†æ”¯ã€‚ä½ æä¾›ä¸€ä¸ªæ¡ä»¶å¹¶è¡¨ç¤º ã€Œå¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œè¿è¡Œè¿™æ®µä»£ç ï¼›å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œä¸è¿è¡Œè¿™æ®µä»£ç ã€‚ã€</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> number = <span class="hljs-number">3</span>;<br><br>    <span class="hljs-keyword">if</span> number &lt; <span class="hljs-number">5</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;condition was true&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;condition was false&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»£ç ä¸­çš„æ¡ä»¶ <strong>å¿…é¡»</strong> æ˜¯ <code>bool</code> å€¼ ,å…¶é¿å…äº† cè¯­è¨€ä¸­ä¸ä¸º0å°±æ˜¯çœŸçš„æƒ…å†µ</p><h5 id="ä½¿ç”¨-else-if-å¤„ç†å¤šé‡æ¡ä»¶"><a href="#ä½¿ç”¨-else-if-å¤„ç†å¤šé‡æ¡ä»¶" class="headerlink" title="ä½¿ç”¨ else if å¤„ç†å¤šé‡æ¡ä»¶"></a>ä½¿ç”¨ <code>else if</code> å¤„ç†å¤šé‡æ¡ä»¶</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> number = <span class="hljs-number">6</span>;<br><br>    <span class="hljs-keyword">if</span> number % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;number is divisible by 4&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> number % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;number is divisible by 3&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> number % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;number is divisible by 2&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;number is not divisible by 4, 3, or 2&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="åœ¨-let-è¯­å¥ä¸­ä½¿ç”¨-if"><a href="#åœ¨-let-è¯­å¥ä¸­ä½¿ç”¨-if" class="headerlink" title="åœ¨ let è¯­å¥ä¸­ä½¿ç”¨ if"></a>åœ¨ <code>let</code> è¯­å¥ä¸­ä½¿ç”¨ <code>if</code></h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> condition = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">let</span> number = <span class="hljs-keyword">if</span> condition &#123;<br>        <span class="hljs-number">5</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-number">6</span><br>    &#125;;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;The value of number is: &#123;&#125;&quot;</span>, number);<br>&#125;<br></code></pre></td></tr></table></figure><p><code>if</code> æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼,å…¶å…·æœ‰è¿”å›å€¼ï¼Œå› æ­¤å¯ä»¥ä½œä¸ºå³å€¼</p><p>æ³¨æ„ï¼Œè¡¨è¾¾å¼çš„ä¸¤ä¸ªéƒ¨åˆ†ç±»å‹éœ€è¦ç›¸åŒï¼Œä¸ç„¶ä¼šå¯¼è‡´å¼‚å¸¸</p><h4 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h4><p>å¤šæ¬¡æ‰§è¡ŒåŒä¸€æ®µä»£ç æ˜¯å¾ˆå¸¸ç”¨çš„ï¼ŒRust ä¸ºæ­¤æä¾›äº†å¤šç§ <strong>å¾ªç¯</strong>ï¼ˆ<em>loops</em>ï¼‰ã€‚ä¸€ä¸ªå¾ªç¯æ‰§è¡Œå¾ªç¯ä½“ä¸­çš„ä»£ç ç›´åˆ°ç»“å°¾å¹¶ç´§æ¥ç€å›åˆ°å¼€å¤´ç»§ç»­æ‰§è¡Œ</p><p>Rust æœ‰ä¸‰ç§å¾ªç¯ï¼š<code>loop</code>ã€<code>while</code> å’Œ <code>for</code></p><h5 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h5><p>loop ä½œä¸ºrust çš„ä¸‰å¾ªç¯ä¹‹ä¸€ï¼Œå…¶ç‰¹æ€§ä¸ºæ°¸ä¸åœæ­¢ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯ä¸€ä¸ª while(true)</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">loop</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;again!&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>loop ~ loop ~ </p><p>å…¶ä¹Ÿå¯ä»¥é€šè¿‡ break æ¥è¿›è¡Œè¿”å›å€¼</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> counter = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">loop</span> &#123;<br>        counter += <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> counter == <span class="hljs-number">10</span> &#123;<br>            <span class="hljs-keyword">break</span> counter * <span class="hljs-number">2</span>;<br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">assert_eq!</span>(result, <span class="hljs-number">20</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ƒä¼šè¢«åœæ­¢çš„å¾ªç¯è¿”å›</p><h5 id="while"><a href="#while" class="headerlink" title="while"></a>while</h5><p>ç»å…¸ç¨‹åºè®¾è®¡è¯­è¨€å¿…å¤‡</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> number = <span class="hljs-number">3</span>;<br><br>    <span class="hljs-keyword">while</span> number != <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;!&quot;</span>, number);<br><br>        number = number - <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;LIFTOFF!!!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ƒå°†åœ¨ while ä¸ {} ä¹‹é—´çš„è¡¨è¾¾å¼ä¸ºçœŸçš„æ—¶å€™æ‰§è¡Œ</p><h5 id="for"><a href="#for" class="headerlink" title="for"></a>for</h5><p>æ­¤å¤„çš„forå¾ªç¯ä½¿ç”¨çš„æ˜¯ç±»ä¼¼pythonçš„è¿­ä»£å™¨æ¨¡å¼ï¼Œå®ƒå°†å¯¹ä¸€ä¸ªæ‹¥æœ‰è¿­ä»£å™¨ç‰¹æ€§(trait,ç±»ä¼¼äºjvavçš„ interfaceï¼‰çš„å˜é‡è¿›è¡Œè¿­ä»£</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">let</span> a = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>];<br><br>    <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> a.iter() &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the value is: &#123;&#125;&quot;</span>, element);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h6 id="ä½¿ç”¨for-æ¥å€’è®¡æ—¶"><a href="#ä½¿ç”¨for-æ¥å€’è®¡æ—¶" class="headerlink" title="ä½¿ç”¨for æ¥å€’è®¡æ—¶"></a>ä½¿ç”¨for æ¥å€’è®¡æ—¶</h6><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() &#123;<br>    <span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">4</span>).rev() &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;!&quot;</span>, number);<br>    &#125;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;LIFTOFF!!!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>rust</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>numpyå¤šç»´æ•°ç»„è¿ç®—</title>
    <link href="/2021/10/04/numpy%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E8%BF%90%E7%AE%97/"/>
    <url>/2021/10/04/numpy%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E8%BF%90%E7%AE%97/</url>
    
    <content type="html"><![CDATA[<h3 id="numpyåˆ›å»ºçŸ©é˜µåŠç®€å•æ“ä½œ"><a href="#numpyåˆ›å»ºçŸ©é˜µåŠç®€å•æ“ä½œ" class="headerlink" title="numpyåˆ›å»ºçŸ©é˜µåŠç®€å•æ“ä½œ"></a>numpyåˆ›å»ºçŸ©é˜µåŠç®€å•æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>A = np.array([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>])<br><br><span class="hljs-built_in">print</span>(A)<span class="hljs-comment">#æ‰“å°A</span><br><br><span class="hljs-built_in">print</span>(np.ndim(A))<span class="hljs-comment">#æ‰“å°æ•°ç»„çš„ç»´åº¦</span><br><br><span class="hljs-built_in">print</span>(A.shape)<span class="hljs-comment">#æ‰“å°Açš„å½¢çŠ¶,å…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªå…ƒç»„</span><br><br><span class="hljs-string">&quot;&quot;&quot;å¯¹äºå¤šç»´æ•°ç»„è€Œè¨€&quot;&quot;&quot;</span><br>B = np.array([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>],[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]])<br><span class="hljs-built_in">print</span>(B)<br><span class="hljs-built_in">print</span>(B.shape)<br></code></pre></td></tr></table></figure><p>å¯¹æ­¤çš„è¾“å‡ºç»“æœæ˜¯</p><p><img src="/2021/10/04/numpy%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E8%BF%90%E7%AE%97/image-20211004201108415.png" alt="image-20211004201108415"></p><h3 id="çŸ©é˜µä¹˜æ³•"><a href="#çŸ©é˜µä¹˜æ³•" class="headerlink" title="çŸ©é˜µä¹˜æ³•"></a>çŸ©é˜µä¹˜æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">A = np.array([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]])<br>B = np.array([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>],[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]])<br><br><span class="hljs-built_in">print</span>(np.dot(A,B))<span class="hljs-comment">#çŸ©é˜µç›¸ä¹˜ï¼Œæ»¡è¶³çº¿æ€§ä»£æ•°è¿ç®—</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>numpy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>rustè¾“å…¥çš„å‡ ç§æ–¹å¼</title>
    <link href="/2021/10/03/rust%E8%BE%93%E5%85%A5%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
    <url>/2021/10/03/rust%E8%BE%93%E5%85%A5%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="Rustè¾“å…¥æ•°å­—"><a href="#Rustè¾“å…¥æ•°å­—" class="headerlink" title="Rustè¾“å…¥æ•°å­—"></a>Rustè¾“å…¥æ•°å­—</h1><h2 id="ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°æ®"><a href="#ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°æ®" class="headerlink" title="ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°æ®"></a>ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•°æ®</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::io;<br></code></pre></td></tr></table></figure><p>ç„¶åå£°æ˜ä¸€ä¸ªStringç±»å‹çš„å˜é‡</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> input = <span class="hljs-built_in">String</span>::new();<br></code></pre></td></tr></table></figure><p>ç„¶å</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust">io::stdin().read_line(&amp;<span class="hljs-keyword">mut</span> input)<br>           .expect(<span class="hljs-string">&quot;Failed to read line&quot;</span>);<br></code></pre></td></tr></table></figure><p>æœ€åå¯¹ç±»å‹è¿›è¡Œå¤„ç†ä¸€ä¸‹</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> input= input.trim().parse::&lt;<span class="hljs-built_in">i32</span>&gt;().unwrap();<br><br></code></pre></td></tr></table></figure><h2 id="ä¸€è¡Œè¾“å…¥å¤šä¸ªæ•°æ®"><a href="#ä¸€è¡Œè¾“å…¥å¤šä¸ªæ•°æ®" class="headerlink" title="ä¸€è¡Œè¾“å…¥å¤šä¸ªæ•°æ®"></a>ä¸€è¡Œè¾“å…¥å¤šä¸ªæ•°æ®</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> input=<span class="hljs-built_in">String</span>::new();<br>        io::stdin().read_line(&amp;<span class="hljs-keyword">mut</span> input).unwrap();<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> s = input.split_whitespace();<br>        <span class="hljs-keyword">let</span> a: <span class="hljs-built_in">i32</span> = s.next().unwrap().parse().unwrap();<br>        <span class="hljs-keyword">let</span> b: <span class="hljs-built_in">i32</span> = s.next().unwrap().parse().unwrap();<br>        <span class="hljs-keyword">let</span> c: <span class="hljs-built_in">i32</span> = s.next().unwrap().parse().unwrap();<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>rust</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jvm</title>
    <link href="/2021/10/03/jvm/"/>
    <url>/2021/10/03/jvm/</url>
    
    <content type="html"><![CDATA[<h1 id="æµ…å…¥ç†è§£Javaè™šæ‹Ÿæœº-é›¾"><a href="#æµ…å…¥ç†è§£Javaè™šæ‹Ÿæœº-é›¾" class="headerlink" title="æµ…å…¥ç†è§£Javaè™šæ‹Ÿæœº(é›¾"></a>æµ…å…¥ç†è§£Javaè™šæ‹Ÿæœº(é›¾</h1><h2 id="ä»€ä¹ˆæ˜¯JVMï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯JVMï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯JVMï¼Ÿ"></a>ä»€ä¹ˆæ˜¯JVMï¼Ÿ</h2><p>JVM å…¨ç§°ä¸ºJava Virtual  Machine ,JAVAç¨‹åºçš„<strong>è¿è¡Œç¯å¢ƒ</strong>ï¼ˆJAVAäºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒï¼‰</p><h2 id="JVMå¸¦æ¥çš„å¥½å¤„"><a href="#JVMå¸¦æ¥çš„å¥½å¤„" class="headerlink" title="JVMå¸¦æ¥çš„å¥½å¤„"></a>JVMå¸¦æ¥çš„å¥½å¤„</h2><ul><li><p>ä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œ(â€œWrite once, run anywhereâ€)</p></li><li><p>è‡ªåŠ¨å†…å­˜ç®¡ç†</p></li><li><p>æ•°ç»„ä¸‹æ ‡è¶Šç•Œæ£€æŸ¥</p></li></ul><h2 id="å¸¸è§çš„JVM"><a href="#å¸¸è§çš„JVM" class="headerlink" title="å¸¸è§çš„JVM"></a>å¸¸è§çš„JVM</h2><img src="/2021/10/03/jvm/20200914100723848.png" style="zoom:50%;"><p>ç°åœ¨åº”è¯¥å¤§å¤šæ•°çš„hotspot</p><h2 id="JVM-JRE-JDKçš„åŒºåˆ«"><a href="#JVM-JRE-JDKçš„åŒºåˆ«" class="headerlink" title="JVM JRE JDKçš„åŒºåˆ«"></a>JVM JRE JDKçš„åŒºåˆ«</h2><img src="/2021/10/03/jvm/525d84b7d526290a7c88900636ed1033.png" style="zoom:50%;"><h2 id="Javaä»£ç æ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„"><a href="#Javaä»£ç æ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„" class="headerlink" title="Javaä»£ç æ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„"></a>Javaä»£ç æ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„</h2><p><img src="/2021/10/03/jvm/image-20210806170716879.png" alt="image-20210806170716879"></p><p><strong>ä¸€ ç¼–å†™javaæºç¨‹åº</strong></p><p><strong>äºŒã€å½“javaæºç¨‹åºç¼–ç ç»“æŸåï¼Œå°±éœ€è¦ç¼–è¯‘å™¨ç¼–è¯‘ã€‚</strong></p><p>å¿«è¿›åˆ°javacç¼–è¯‘ä¸ºclass</p><p>å¿«è¿›åˆ°çœ‹å­—èŠ‚æµ</p><p><img src="/2021/10/03/jvm/image-20210805083235867.png"></p><p>å¦‚æœè¿™é‡Œç”¨catç›´æ¥çœ‹æ˜¯ä¹±ç ï¼Œä½†æ˜¯åœ¨ideaé‡Œé¢çœ‹çš„è¯ï¼Œä»–ä¼šè¿›è¡Œä¸€äº›ç¼–å†™ï¼Œç„¶åæˆè¿™æ ·</p><p><img src="/2021/10/03/jvm/image-20210805083418893.png"></p><p><code>cafe babe</code> è¢«ç§°ä¸ºâ€œé­”æ•°â€ï¼Œæ˜¯ JVM è¯†åˆ« .class æ–‡ä»¶çš„æ ‡å¿—ã€‚æ–‡ä»¶æ ¼å¼çš„å®šåˆ¶è€…å¯ä»¥è‡ªç”±é€‰æ‹©é­”æ•°å€¼ï¼ˆåªè¦æ²¡ç”¨è¿‡ï¼‰ï¼Œæ¯”å¦‚è¯´ .png æ–‡ä»¶çš„é­”æ•°æ˜¯ <code>8950 4e47</code>ã€‚</p><h2 id="JVM-çš„ç»“æ„"><a href="#JVM-çš„ç»“æ„" class="headerlink" title="JVM çš„ç»“æ„"></a>JVM çš„ç»“æ„</h2><img src="/2021/10/03/jvm/8d1de13006ae9e0dd40d5e1db98a81c81603447597022.png" style="zoom: 50%;"><p>ç”±æ­¤å›¾å¯ä»¥å¾—çŸ¥ï¼š</p><p>JVMçš„ç»“æ„åˆ†ä¸ºä»¥ä¸‹å†…å®¹ï¼šç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰ã€æ‰§è¡Œå¼•æ“ã€å†…å­˜åŒºï¼ˆè¿è¡Œæ—¶æ•°æ®åŒºï¼‰ã€æœ¬åœ°æ–¹æ³•æ¥å£ã€‚</p><p>å…¶ä¸­å†…å­˜åŒºåŒ…æ‹¬ï¼šè™šæ‹Ÿæœºæ ˆï¼Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œæ–¹æ³•åŒºï¼Œå †ï¼Œç¨‹åºè®¡æ•°å™¨</p><h3 id="ç¨‹åºè®¡æ•°å™¨ï¼š"><a href="#ç¨‹åºè®¡æ•°å™¨ï¼š" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨ï¼š"></a>ç¨‹åºè®¡æ•°å™¨ï¼š</h3><p>Program Counter Register</p><h4 id="ä½œç”¨ï¼š"><a href="#ä½œç”¨ï¼š" class="headerlink" title="ä½œç”¨ï¼š"></a>ä½œç”¨ï¼š</h4><p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚ï¼ˆæ¦‚å¿µæ¨¡å‹ä¸­ï¼šå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼‰</p><h4 id="ç‰¹ç‚¹ï¼š"><a href="#ç‰¹ç‚¹ï¼š" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h4><ul><li><strong>çº¿ç¨‹ç§æœ‰</strong>ï¼š</li></ul><p>å¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„æ–¹å¼å®ç°çš„ã€‚<strong>ä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨</strong>ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ã€‚</p><ul><li><strong>çŠ¶æ€</strong>ï¼š</li></ul><p>â‘ æ‰§è¡Œjavaæ–¹æ³•ï¼Œè®¡æ•°å™¨è®°å½•è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›â‘¡æ‰§è¡Œ<strong>nativeæ–¹æ³•ï¼Œè®¡æ•°å™¨ä¸ºç©ºï¼ˆundefinedï¼‰</strong></p><p>å› ä¸ºnativeæ–¹æ³•æ˜¯javaé€šè¿‡JNIç›´æ¥è°ƒç”¨æœ¬åœ°C/C++åº“ï¼Œå¯ä»¥è¿‘ä¼¼çš„è®¤ä¸ºnativeæ–¹æ³•ç›¸å½“äºC/C++æš´éœ²ç»™javaçš„ä¸€ä¸ªæ¥å£ï¼Œjavaé€šè¿‡è°ƒç”¨è¿™ä¸ªæ¥å£ä»è€Œè°ƒç”¨åˆ°C/C++æ–¹æ³•ã€‚ç”±äºè¯¥æ–¹æ³•æ˜¯é€šè¿‡C/C++è€Œä¸æ˜¯javaè¿›è¡Œå®ç°ã€‚é‚£ä¹ˆè‡ªç„¶æ— æ³•äº§ç”Ÿç›¸åº”çš„å­—èŠ‚ç ï¼Œå¹¶ä¸”C/C++æ‰§è¡Œæ—¶çš„å†…å­˜åˆ†é…æ˜¯ç”±è‡ªå·±è¯­è¨€å†³å®šçš„ï¼Œè€Œä¸æ˜¯ç”±JVMå†³å®šçš„ã€‚</p><img src="https://images2018.cnblogs.com/blog/1266638/201807/1266638-20180710225811662-425101318.png" alt="img" style="zoom:67%;"><ul><li><strong>å ç”¨å†…å­˜å°ï¼Œå”¯ä¸€ä¸ä¼šOutOfMemoryErrorçš„åŒºåŸŸ</strong></li></ul><p>å› ä¸ºå…¶æœ¬è´¨ä¸Šæ˜¯å¯„å­˜å™¨æ¥ç€</p><p><strong>æ¥ä¸‹æ¥ ç®€å•æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•æŸ¥çœ‹å­—èŠ‚ç </strong></p><p>å¯ä»¥åœ¨ ideaä¸­å®‰è£…æ’ä»¶jclasslibæ¥è¿›è¡ŒæŸ¥çœ‹</p><h3 id="è™šæ‹Ÿæœºæ ˆ"><a href="#è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="è™šæ‹Ÿæœºæ ˆ"></a>è™šæ‹Ÿæœºæ ˆ</h3><p>VM Stack</p><p>Javaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p><ul><li>æ¯ä¸ª<strong>çº¿ç¨‹</strong>è¿è¡Œéœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œç§°ä¸º<strong>è™šæ‹Ÿæœºæ ˆ</strong></li><li>æ¯ä¸ªæ ˆç”±å¤šä¸ª<strong>æ ˆå¸§</strong>ç»„æˆï¼Œå¯¹åº”ç€æ¯æ¬¡è°ƒç”¨æ–¹æ³•æ—¶æ‰€å ç”¨çš„å†…å­˜</li><li>æ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰<strong>ä¸€ä¸ªæ´»åŠ¨æ ˆå¸§</strong>ï¼Œå¯¹åº”ç€<strong>å½“å‰æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•</strong></li></ul><p>å…¸ä¸­å…¸ä¹‹å¸¸è§è™šæ‹Ÿæœºæ ˆè®²è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestDemo</span> </span>&#123;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>            method1();<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">method1</span><span class="hljs-params">()</span> </span>&#123;<br>            method2(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">method2</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>            <span class="hljs-keyword">int</span> c = a + b;<br>            <span class="hljs-keyword">return</span> c;<br>        &#125;<br>    <br>&#125;<br><br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘æ‰“ç®—è¿›è¡Œæ¼”ç¤º</p><h4 id="å¸¸è§è™šæ‹Ÿæœºæ ˆé—®é¢˜"><a href="#å¸¸è§è™šæ‹Ÿæœºæ ˆé—®é¢˜" class="headerlink" title="å¸¸è§è™šæ‹Ÿæœºæ ˆé—®é¢˜"></a>å¸¸è§è™šæ‹Ÿæœºæ ˆé—®é¢˜</h4><p>åƒåœ¾å›æ”¶æ˜¯å¦æ¶‰åŠæ ˆå†…å­˜ï¼Ÿ</p><ul><li><strong>ä¸éœ€è¦</strong>ã€‚å› ä¸ºè™šæ‹Ÿæœºæ ˆä¸­æ˜¯ç”±ä¸€ä¸ªä¸ªæ ˆå¸§ç»„æˆçš„ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼Œå¯¹åº”çš„æ ˆå¸§å°±ä¼šè¢«å¼¹å‡ºæ ˆã€‚æ‰€ä»¥æ— éœ€é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶å»å›æ”¶å†…å­˜ã€‚</li></ul><p>æ ˆå†…å­˜çš„åˆ†é…è¶Šå¤§è¶Šå¥½å—ï¼Ÿ</p><ul><li>ä¸æ˜¯ã€‚å› ä¸º<strong>ç‰©ç†å†…å­˜æ˜¯ä¸€å®šçš„</strong>ï¼Œæ ˆå†…å­˜è¶Šå¤§ï¼Œå¯ä»¥æ”¯æŒæ›´å¤šçš„é€’å½’è°ƒç”¨ï¼Œä½†æ˜¯å¯æ‰§è¡Œçš„çº¿ç¨‹æ•°å°±ä¼šè¶Šå°‘ã€‚</li></ul><p>è®¾ç½®å‚æ•°æ–¹æ³•ï¼š-Xss size é€šå¸¸åªæœ‰å‡ ç™¾K</p><p>å†³å®šäº†å‡½æ•°è°ƒç”¨çš„æ·±åº¦<br>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´</p><p>å±€éƒ¨å˜é‡ã€å‚æ•° åˆ†é…åœ¨æ ˆä¸Š</p><p>æ­¤å¤„è¿›å…¥android studioè°ƒæ•´vm å‚æ•°çš„åœ°æ–¹</p><p>ps:idea64.exe.vmoptionsé’ˆå¯¹çš„æ˜¯ IDEA ç¯å¢ƒï¼Œå¯¹é€šè¿‡ IDEA è¿è¡Œçš„ <a href="https://www.jianshu.com/p/3c330074082b">Java é¡¹ç›®</a>ä¸èµ·ä½œç”¨ã€‚IDEA æœ¬èº«å°±æ˜¯ä¸€ä¸ª Java åº”ç”¨ï¼Œæ‰€ä»¥ä¹Ÿå¿…é¡»è¿è¡Œäº JVM ä¹‹ä¸Šã€‚æ­¤å¤„çš„idea64.exe.vmoptionsæ–‡ä»¶å°±æ˜¯ç”¨æ¥é…ç½® 64 ä½çš„ IDEA æ‰€ä½¿ç”¨çš„ JVM å‚æ•°ã€‚æ˜¯ IDEA è¿è¡Œæ—¶ç”¨çš„é…ç½®ï¼Œå¹¶ä¸æ˜¯é¡¹ç›®è¿è¡Œçš„é…ç½®</p><img src="/2021/10/03/jvm/image-20210802160632576.png" style="zoom:67%;"><p>è¿è¡Œå•ä¸ªé¡¹ç›®æ—¶å¯ä»¥è¿™æ ·</p><img src="/2021/10/03/jvm/image-20210806161449743.png" style="zoom:67%;"><p>å†…å­˜æº¢å‡º:</p><p><strong>Java.lang.stackOverflowError</strong> æ ˆå†…å­˜æº¢å‡º</p><p>å‘ç”ŸåŸå› ï¼š</p><ul><li>è™šæ‹Ÿæœºæ ˆä¸­ï¼Œ<strong>æ ˆå¸§è¿‡å¤š</strong>ï¼ˆæ— é™é€’å½’ï¼‰</li><li>æ¯ä¸ªæ ˆå¸§<strong>æ‰€å ç”¨è¿‡å¤§</strong></li></ul><h3 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h3><p>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰ä¸ Java è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«ä¸è¿‡æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡Œ Java æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„ Native æ–¹æ³•æœåŠ¡ã€‚è™šæ‹Ÿæœºè§„èŒƒä¸­å¯¹æœ¬åœ°æ–¹æ³•æ ˆä¸­çš„æ–¹æ³•ä½¿ç”¨çš„è¯­è¨€ã€ä½¿ç”¨æ–¹å¼ä¸æ•°æ®ç»“æ„å¹¶æ²¡æœ‰å¼ºåˆ¶è§„å®šï¼Œå› æ­¤å…·ä½“çš„è™šæ‹Ÿæœºå¯ä»¥è‡ªç”±å®ç°å®ƒã€‚</p><h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><p>Java Heap</p><p>å¯¹äºJavaåº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒJavaå †æ˜¯è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜çš„æœ€å¤§çš„ä¸€å—ã€‚æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼ˆå› ä¸ºå¯¹è±¡éƒ½æ˜¯åœ¨å †é‡Œé¢åˆ›å»ºçš„ï¼Œè€Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½å¯ä»¥æ‹¿åˆ°å¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹å¹¶å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹äºä¸€äº›å¯¹è±¡ï¼Œæˆ‘ä»¬å¾—åŠ é”ï¼‰ï¼Œè¿™é‡Œç¨å¾®æä¸€ä¸‹å¹¶å‘å’Œå¹¶è¡Œï¼ˆä¸‹é¢å‡ ç§åƒåœ¾å›æ”¶å™¨å¾—ç”¨åˆ°ï¼‰</p><p>é€šè¿‡newå…³é”®å­—<strong>åˆ›å»ºçš„å¯¹è±¡</strong>éƒ½ä¼šè¢«æ”¾åœ¨å †å†…å­˜</p><p>å †é‡Œé¢åŒ…å«äº†ä»¥ä¸‹å†…å®¹</p><img src="https://img-blog.csdnimg.cn/20191208160358777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NTQzNTA4,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" style="zoom:67%;"><p>åœ¨åƒåœ¾å›æ”¶å“ªé‡Œè®²è®²</p><h4 id="å¹¶å‘-concurrency-ï¼š"><a href="#å¹¶å‘-concurrency-ï¼š" class="headerlink" title="å¹¶å‘(concurrency)ï¼š"></a>å¹¶å‘(concurrency)ï¼š</h4><p>æŒ‡åœ¨åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œï¼Œä½†å¤šä¸ªè¿›ç¨‹æŒ‡ä»¤è¢«å¿«é€Ÿçš„è½®æ¢æ‰§è¡Œï¼Œä½¿å¾—åœ¨å®è§‚ä¸Šå…·æœ‰å¤šä¸ªè¿›ç¨‹åŒæ—¶æ‰§è¡Œçš„æ•ˆæœï¼Œä½†åœ¨å¾®è§‚ä¸Šå¹¶ä¸æ˜¯åŒæ—¶æ‰§è¡Œçš„ï¼Œåªæ˜¯æŠŠæ—¶é—´åˆ†æˆè‹¥å¹²æ®µï¼Œä½¿å¤šä¸ªè¿›ç¨‹å¿«é€Ÿäº¤æ›¿çš„æ‰§è¡Œã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/7557373-da64ffd6d1effaac.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/295/format/webp" alt="img"></p><p>ç®€å•ç‚¹æ¥è¯´å¯¹ä¸cpuå¤„ç†å¹¶å‘ä»»åŠ¡å°±æ˜¯å®è§‚æ˜¯å¹¶è”çš„ï¼Œå¾®è§‚æ˜¯ä¸²è”çš„</p><p>æ¶‰åŠæ—¶é—´ç‰‡é‚£äº›æˆ‘å°±ä¸è¯´äº†ï¼ˆä¸»è¦æ˜¯å¿˜è®°äº†</p><h4 id="å¹¶è¡Œ-parallel-ï¼š"><a href="#å¹¶è¡Œ-parallel-ï¼š" class="headerlink" title="å¹¶è¡Œ(parallel)ï¼š"></a>å¹¶è¡Œ(parallel)ï¼š</h4><p>æŒ‡åœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šæ¡æŒ‡ä»¤åœ¨å¤šä¸ªå¤„ç†å™¨ä¸ŠåŒæ—¶æ‰§è¡Œã€‚æ‰€ä»¥æ— è®ºä»å¾®è§‚è¿˜æ˜¯ä»å®è§‚æ¥çœ‹ï¼ŒäºŒè€…éƒ½æ˜¯ä¸€èµ·æ‰§è¡Œçš„ã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/7557373-72912ea8e89c4007.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/313/format/webp" alt="img"></p><h4 id="å‡ºç°åœ¨å †çš„å¸¸è§å¼‚å¸¸ï¼š"><a href="#å‡ºç°åœ¨å †çš„å¸¸è§å¼‚å¸¸ï¼š" class="headerlink" title="å‡ºç°åœ¨å †çš„å¸¸è§å¼‚å¸¸ï¼š"></a>å‡ºç°åœ¨å †çš„å¸¸è§å¼‚å¸¸ï¼š</h4><p><strong>java.lang.OutofMemoryError</strong> ï¼šjava heap space. å †å†…å­˜æº¢å‡º</p><img src="https://img-blog.csdnimg.cn/20200627192624320.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTY1ODAw,size_16,color_FFFFFF,t_70" alt="img" style="zoom: 67%;"><p>å…¸ä¸­å…¸ä¹‹å†…å­˜ä¸å¤Ÿäº†</p><img src="/2021/10/03/jvm/image-20210804131002232.png" style="zoom:67%;"><h4 id="å †å†…å­˜è¯Šæ–­å·¥å…·"><a href="#å †å†…å­˜è¯Šæ–­å·¥å…·" class="headerlink" title="å †å†…å­˜è¯Šæ–­å·¥å…·:"></a>å †å†…å­˜è¯Šæ–­å·¥å…·:</h4><h5 id="jps"><a href="#jps" class="headerlink" title="jps"></a><strong>jps</strong></h5><p><img src="/2021/10/03/jvm/image-20210804102154659.png"></p><p>æŸ¥çœ‹jvavè¿è¡Œçš„è¿›ç¨‹å·</p><img src="/2021/10/03/jvm/image-20210804102300807.png" style="zoom:50%;"><p><strong>-q</strong> åªæ˜¾ç¤ºpidï¼Œä¸æ˜¾ç¤ºclassåç§°,jaræ–‡ä»¶åå’Œä¼ é€’ç»™mainæ–¹æ³•çš„å‚æ•°</p><p><strong>-m</strong> è¾“å‡ºä¼ é€’ç»™mainæ–¹æ³•çš„å‚æ•°ï¼Œåœ¨åµŒå…¥å¼jvmä¸Šå¯èƒ½æ˜¯null</p><p><strong>-l</strong> è¾“å‡ºåº”ç”¨ç¨‹åºmain classçš„å®Œæ•´packageåæˆ–è€…åº”ç”¨ç¨‹åºçš„jaræ–‡ä»¶å®Œæ•´è·¯å¾„å</p><p><strong>-v</strong> è¾“å‡ºä¼ é€’ç»™JVMçš„å‚æ•°</p><p><strong>-V</strong> éšè—è¾“å‡ºä¼ é€’ç»™JVMçš„å‚æ•°</p><h5 id="jmap"><a href="#jmap" class="headerlink" title="jmap"></a><strong>jmap</strong></h5><img src="/2021/10/03/jvm/image-20210804103419141.png" style="zoom:50%;"><p>   MinHeapFreeRatio     </p><ul><li><p>ç©ºé—²å †ç©ºé—´çš„æœ€å°ç™¾åˆ†æ¯”ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼šHeapFreeRatio =(CurrentFreeHeapSize/CurrentTotalHeapSize) * 100ï¼Œå€¼çš„åŒºé—´ä¸º0åˆ°100ï¼Œé»˜è®¤å€¼ä¸º 40ã€‚å¦‚æœHeapFreeRatio &lt; MinHeapFreeRatioï¼Œåˆ™éœ€è¦è¿›è¡Œå †æ‰©å®¹ï¼Œæ‰©å®¹çš„æ—¶æœºåº”è¯¥åœ¨æ¯æ¬¡åƒåœ¾å›æ”¶ä¹‹åã€‚</p><p> MaxHeapFreeRatio       </p></li><li><p>ç©ºé—²å †ç©ºé—´çš„æœ€å¤§ç™¾åˆ†æ¯”ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼šHeapFreeRatio =(CurrentFreeHeapSize/CurrentTotalHeapSize) * 100ï¼Œå€¼çš„åŒºé—´ä¸º0åˆ°100ï¼Œé»˜è®¤å€¼ä¸º 70ã€‚å¦‚æœHeapFreeRatio &gt; MaxHeapFreeRatioï¼Œåˆ™éœ€è¦è¿›è¡Œå †ç¼©å®¹ï¼Œç¼©å®¹çš„æ—¶æœºåº”è¯¥åœ¨æ¯æ¬¡åƒåœ¾å›æ”¶ä¹‹åã€‚</p></li></ul><ol><li><p>   MaxHeapSize      JVM å †ç©ºé—´å…è®¸çš„æœ€å¤§å€¼ã€‚</p></li><li><p>   NewSize                  JVM æ–°ç”Ÿä»£å †ç©ºé—´çš„é»˜è®¤å€¼ã€‚</p></li><li><p>   MaxNewSize              JVM æ–°ç”Ÿä»£å †ç©ºé—´å…è®¸çš„æœ€å¤§å€¼ã€‚</p></li><li><p>   OldSize                  JVM è€å¹´ä»£å †ç©ºé—´çš„é»˜è®¤å€¼ã€‚</p></li><li><p>   NewRatio                 æ–°ç”Ÿä»£ï¼ˆ2ä¸ªSurvivoråŒºå’ŒEdenåŒº ï¼‰ä¸è€å¹´ä»£ï¼ˆä¸åŒ…æ‹¬æ°¸ä¹…åŒºï¼‰çš„å †ç©ºé—´æ¯”å€¼</p></li><li><p>   SurvivorRatio            ä¸¤ä¸ªSurvivoråŒºå’ŒEdenåŒºçš„å †ç©ºé—´æ¯”å€¼ä¸º ä»–ï¼Œè¡¨ç¤º S0 ï¼š S1 ï¼šEden = 1ï¼š1ï¼šï¼Ÿã€‚</p></li><li><p>   MetaspaceSize           JVM å…ƒç©ºé—´çš„é»˜è®¤å€¼ã€‚ </p></li><li><p>  MaxMetaspaceSize   JVM å…ƒç©ºé—´å…è®¸çš„æœ€å¤§å€¼         </p></li><li><p>Compressed Class space å‹ç¼©ç±»ç©ºé—´å¤§å°ï¼ŒMaximum size of class area in Metaspace when compressed class pointers are usedï¼ˆæŒºå¤æ‚çš„ï¼Œè€Œä¸”å¤§å°ä¸èƒ½è¶…è¿‡32Gï¼Œä½†æ˜¯hotpoté™åˆ¶åœ¨äº†3gå†…ï¼Œï¼‰</p></li><li><p>G1HeapRegionSize         åœ¨ä½¿ç”¨ G1 åƒåœ¾å›æ”¶ç®—æ³•æ—¶ï¼ŒJVM ä¼šå°† Heap ç©ºé—´åˆ†éš”ä¸ºè‹¥å¹²ä¸ª Regionï¼Œè¯¥å‚æ•°ç”¨æ¥æŒ‡å®šæ¯ä¸ª Region ç©ºé—´çš„å¤§å°ã€‚</p></li></ol><p>Capacity = Regions * RegionSize å¤§å°</p><p>è¿™é‡Œå…ˆè¯´ä¸€ä¸‹è¿™ä¸ªå‘½ä»¤é‡åˆ°çš„ä¸€äº›å‘</p><p>ç½‘ä¸Šå¾ˆå¤šæ—¶å€™è¯´ä½¿ç”¨jmap -heap pidæ¥è¿›è¡ŒæŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä½†æ˜¯è¿™ä¸ªå‘½ä»¤å¯¹äºjdk8ä¹‹åçš„ç‰ˆæœ¬ï¼Œä¸èƒ½å†ä½¿ç”¨jmap -heap pidçš„å‘½ä»¤äº†ã€‚<br>ä½¿ç”¨æ—§çš„å‘½ä»¤ä¼šæŠ¥é”™</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">Error: </span>-heap option used<br>Cannot connect to core dump or remote debug server. Use jhsdb jmap instead<br></code></pre></td></tr></table></figure><p>ç°åœºå±•ç¤ºä¸€ä¸‹æŸ¥çœ‹å†…å­˜çš„æ­¥éª¤</p><p>jmapç”¨æ³•å‚è€ƒ</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Usage:<br>    jmap [option] &lt;pid&gt;<br>        (<span class="hljs-keyword">to</span> connect <span class="hljs-keyword">to</span> running process)<br>    jmap [option] &lt;executable &lt;core&gt;<br>        (<span class="hljs-keyword">to</span> connect <span class="hljs-keyword">to</span> a core file)<br>    jmap [option] [server_id@]&lt;remote<span class="hljs-built_in"> server IP </span><span class="hljs-keyword">or</span> hostname&gt;<br>        (<span class="hljs-keyword">to</span> connect <span class="hljs-keyword">to</span> remote <span class="hljs-builtin-name">debug</span> server)<br><br>where &lt;option&gt; is one of:<br>    &lt;none&gt;               <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">print</span> same <span class="hljs-builtin-name">info</span> as Solaris pmap<br>    -heap                <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">print</span> java heap summary<br>    -histo[:live]        <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">print</span> histogram of java object heap; <span class="hljs-keyword">if</span> the <span class="hljs-string">&quot;live&quot;</span><br>                         suboption is specified, only count live objects<br>    -permstat            <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">print</span> permanent generation statistics<br>    -finalizerinfo       <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">print</span> information on objects awaiting finalization<br>    -dump:&lt;dump-options&gt; <span class="hljs-keyword">to</span> dump java heap <span class="hljs-keyword">in</span> hprof binary format<br>                         dump-options:<br>                           live         dump only live objects; <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> specified,<br>                                        all objects <span class="hljs-keyword">in</span> the heap are dumped.<br>                           <span class="hljs-attribute">format</span>=b     binary format<br>                           <span class="hljs-attribute">file</span>=&lt;file&gt;  dump heap <span class="hljs-keyword">to</span> &lt;file&gt;<br>                         Example: jmap -dump:live,<span class="hljs-attribute">format</span>=b,file=heap.bin &lt;pid&gt;<br>    -F                   force. Use with -dump:&lt;dump-options&gt; &lt;pid&gt; <span class="hljs-keyword">or</span> -histo<br>                         <span class="hljs-keyword">to</span> force a heap dump <span class="hljs-keyword">or</span> histogram when &lt;pid&gt; does <span class="hljs-keyword">not</span><br>                         respond. The <span class="hljs-string">&quot;live&quot;</span> suboption is <span class="hljs-keyword">not</span> supported<br>                         <span class="hljs-keyword">in</span> this mode.<br>    -h | -help           <span class="hljs-keyword">to</span> <span class="hljs-builtin-name">print</span> this help message<br>    -J&lt;flag&gt;             <span class="hljs-keyword">to</span> pass &lt;flag&gt; directly <span class="hljs-keyword">to</span> the runtime system<br></code></pre></td></tr></table></figure><p>æ­¤å¤–éœ€è¦æ³¨æ„ä¸€ä¸‹å¦‚æœä¸€å°è®¾å¤‡ä¸Šæœ‰å¤šä¸ªjdkéœ€è¦æŒ‡å®šä¸€ä¸‹å…·ä½“è·¯å¾„ä¸‹çš„jvmå·¥å…·ï¼ˆå½“ç„¶åˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨ç¯å¢ƒä¸­çš„jdkå°±ä¸ç”¨</p><p>ï¼ˆæ€’ è¿™ä¸ªå¯¼è‡´æˆ‘æŸ¥äº†å¥½ä¹…çš„åšå®¢ï¼Œç½‘ä¸Šè®²è¿™ä¸ªé”™è¯¯çš„è¿˜æ¯”è¾ƒç¨€å°‘</p><h5 id="jconsole"><a href="#jconsole" class="headerlink" title="jconsole"></a><strong>jconsole</strong></h5><p>ç†è®ºä¸Šç›´æ¥ä½¿ç”¨jconsoleå°±èƒ½è¿›å…¥ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºä¸€äº›bug</p><p>æ¯”å¦‚ï¼Œæˆ‘é‡åˆ°çš„</p><img src="/2021/10/03/jvm/image-20210804114409842.png" style="zoom:50%;"><p>ä½†æ˜¯æœ‰çš„è¿›ç¨‹åˆå¯ä»¥é“¾æ¥ï¼Œ</p><img src="/2021/10/03/jvm/image-20210804114918627.png" style="zoom:50%;"><p>è¿™ä¸ªè¿˜å¯ä»¥è¿›è¡Œè¿œç¨‹é“¾æ¥</p><p>æ­¤å¤„å°†è¿›è¡Œä¸€äº›å¸¸è§æ“ä½œå°†è¿›è¡Œæ¼”ç¤º</p><h5 id="jvirsalvm"><a href="#jvirsalvm" class="headerlink" title="jvirsalvm"></a><strong>jvirsalvm</strong></h5><p>è¿™ä¸ªä¸å¤ªä¼šï¼Œjumpäº†</p><p><a href="https://www.cnblogs.com/baihuitestsoftware/articles/6405580.html">æ›´å¤šè¯¦æƒ…</a></p><h4 id="å †çš„ä¸€äº›å‚æ•°é…ç½®"><a href="#å †çš„ä¸€äº›å‚æ•°é…ç½®" class="headerlink" title="å †çš„ä¸€äº›å‚æ•°é…ç½®"></a>å †çš„ä¸€äº›å‚æ•°é…ç½®</h4><p>-XX:NewRatio:  è®¾ç½®Yong å’Œ Oldçš„æ¯”ä¾‹ï¼Œæ¯”é»˜è®¤å€¼ä¸º2ï¼Œåˆ™Old Generationæ˜¯ Yong Generationçš„2å€ï¼Œå³Yong Generationå æ®å†…å­˜çš„1/3<br>-XX:NewSize : è®¾ç½®Yong Generationçš„åˆå§‹å€¼å¤§å°<br>-XX:MaxNewSizeï¼šè®¾ç½®Yong Generationçš„æœ€å¤§å€¼å¤§å°<br>-XX:SurviorRatio : è®¾ç½®Edenå’Œä¸€ä¸ªSuiviorçš„æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º8ï¼Œå³Edenæ˜¯To(S2)çš„æ¯”ä¾‹æ˜¯8ï¼Œï¼ˆFromå’ŒToæ˜¯ä¸€æ ·å¤§çš„ï¼‰ï¼Œæ­¤æ—¶Edenå æ®Yong Generationçš„8/10<br>-XX:InitialTenuringThreshol : è®¾ç½®æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„çš„æœ€å°å€¼ï¼Œé»˜è®¤ä¸º7<br>-XX:MaxTenuringThreshold : è®¾ç½®æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„çš„æœ€å¤§å€¼</p><h3 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h3><p>ç»“æ„ï¼š</p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150547.png" alt="img" style="zoom:67%;"><p>ç”±æ­¤å›¾å¯ä»¥çœ‹è§ï¼Œåœ¨jvm 1.6å’Œ1.8æœ‰å¾ˆå¤§åŒºåˆ«ï¼Œé¦–å…ˆæ˜¯æ–¹æ³•Â·åŒºç”±jvmä¸­è½¬ç§»åˆ°äº†æœ¬åœ°å†…å­˜ä¸­ï¼ŒStringTableä¹Ÿç”±å¸¸é‡æ± ä¸­è½¬ç§»åˆ°äº†å †é‡Œé¢ï¼Œæ°¸ä¹…ä»£å˜ä¸ºäº†å…ƒç©ºé—´ï¼ˆæœ‰ä¸€äº›æŠ¥é”™ä¹Ÿå˜äº†ï¼Œä½†æ˜¯é‰´äºæˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„éƒ½æ˜¯1.8ä»¥åçš„ç‰ˆæœ¬äº†ï¼Œæ‰€ä»¥è¿™é‡Œåªä¼šæåˆ°1.8çš„ç‰ˆæœ¬</p><p>copyä¸€ä¸‹å…ƒç©ºé—´</p><h4 id="metaspaceçš„ç»„æˆ"><a href="#metaspaceçš„ç»„æˆ" class="headerlink" title="metaspaceçš„ç»„æˆ"></a>metaspaceçš„ç»„æˆ</h4><p>metaspaceå…¶å®ç”±ä¸¤å¤§éƒ¨åˆ†ç»„æˆ</p><ul><li>Klass Metaspace</li><li>NoKlass Metaspace</li></ul><p>Klass Metaspaceå°±æ˜¯ç”¨æ¥å­˜klassçš„ï¼Œklassæ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„classæ–‡ä»¶åœ¨jvmé‡Œçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œä¸è¿‡æœ‰ç‚¹è¦æçš„æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„ç±»ä¼¼A.classå…¶å®æ˜¯å­˜åœ¨heapé‡Œçš„ï¼Œæ˜¯java.lang.Classçš„ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚è¿™å—å†…å­˜æ˜¯ç´§æ¥ç€Heapçš„ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰çš„permä¸€æ ·ï¼Œè¿™å—å†…å­˜å¤§å°å¯é€šè¿‡<code>-XX:CompressedClassSpaceSize</code>å‚æ•°æ¥æ§åˆ¶ï¼Œè¿™ä¸ªå‚æ•°å‰é¢æåˆ°äº†é»˜è®¤æ˜¯1Gï¼Œä½†æ˜¯è¿™å—å†…å­˜ä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå‡å¦‚æ²¡æœ‰å¼€å¯å‹ç¼©æŒ‡é’ˆå°±ä¸ä¼šæœ‰è¿™å—å†…å­˜ï¼Œè¿™ç§æƒ…å†µä¸‹klasséƒ½ä¼šå­˜åœ¨NoKlass Metaspaceé‡Œï¼Œå¦å¤–å¦‚æœæˆ‘ä»¬æŠŠ-Xmxè®¾ç½®å¤§äº32Gçš„è¯ï¼Œå…¶å®ä¹Ÿæ˜¯æ²¡æœ‰è¿™å—å†…å­˜çš„ï¼Œå› ä¸ºä¼šè¿™ä¹ˆå¤§å†…å­˜ä¼šå…³é—­å‹ç¼©æŒ‡é’ˆå¼€å…³ã€‚è¿˜æœ‰å°±æ˜¯è¿™å—å†…å­˜æœ€å¤šåªä¼šå­˜åœ¨ä¸€å—ã€‚</p><p>NoKlass Metaspaceä¸“é—¨æ¥å­˜klassç›¸å…³çš„å…¶ä»–çš„å†…å®¹ï¼Œæ¯”å¦‚methodï¼ŒconstantPoolç­‰ï¼Œè¿™å—å†…å­˜æ˜¯ç”±å¤šå—å†…å­˜ç»„åˆèµ·æ¥çš„ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæ˜¯ä¸è¿ç»­çš„å†…å­˜å—ç»„æˆçš„ã€‚è¿™å—å†…å­˜æ˜¯å¿…é¡»çš„ï¼Œè™½ç„¶å«åšNoKlass Metaspaceï¼Œä½†æ˜¯ä¹Ÿå…¶å®å¯ä»¥å­˜klassçš„å†…å®¹ï¼Œä¸Šé¢å·²ç»æåˆ°äº†å¯¹åº”åœºæ™¯ã€‚</p><p>Klass Metaspaceå’ŒNoKlass Mestaspaceéƒ½æ˜¯æ‰€æœ‰classloaderå…±äº«çš„ï¼Œæ‰€ä»¥ç±»åŠ è½½å™¨ä»¬è¦åˆ†é…å†…å­˜ï¼Œä½†æ˜¯æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰ä¸€ä¸ªSpaceManagerï¼Œæ¥ç®¡ç†å±äºè¿™ä¸ªç±»åŠ è½½çš„å†…å­˜å°å—ã€‚å¦‚æœKlass Metaspaceç”¨å®Œäº†ï¼Œé‚£å°±ä¼šOOMäº†ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šï¼ŒNoKlass Mestaspaceæ˜¯ç”±ä¸€å—å—å†…å­˜æ…¢æ…¢ç»„åˆèµ·æ¥çš„ï¼Œåœ¨æ²¡æœ‰è¾¾åˆ°é™åˆ¶æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œä¼šä¸æ–­åŠ é•¿è¿™æ¡é“¾ï¼Œè®©å®ƒå¯ä»¥æŒç»­å·¥ä½œã€‚</p><p>UseCompressedOopsç”¨æ¥å…³é—­ç±»å‹ç¼©</p><p>64bitçš„JVMå‡ºç°åï¼ŒOOPSçš„å°ºå¯¸ä¹Ÿå˜æˆäº†64bitï¼Œæ¯”ä¹‹å‰çš„å¤§äº†ä¸€å€ã€‚è¿™ä¼šå¼•å…¥æ€§èƒ½æŸè€—â€”â€”å çš„å†…å­˜doubleäº†ï¼Œå¹¶ä¸”åŒå°ºå¯¸çš„CPU Cacheè¦å°‘å­˜ä¸€å€çš„OOPSã€‚</p><p>OOPSæ˜¯æŒ‡â€œordinary object pointersâ€œï¼Œå°±æ˜¯åŸå§‹æŒ‡é’ˆã€‚Java Runtimeå¯ä»¥ç”¨è¿™ä¸ªæŒ‡é’ˆç›´æ¥è®¿é—®æŒ‡é’ˆå¯¹åº”çš„å†…å­˜ï¼Œåšç›¸åº”çš„æ“ä½œï¼ˆæ¯”å¦‚å‘èµ·GCæ—¶åšcopy and sweepï¼‰ã€‚</p><p>ä»JDK6_u23å¼€å§‹UseCompressedOopsè¢«é»˜è®¤æ‰“å¼€äº†ã€‚å› æ­¤æ—¢èƒ½äº«å—64bitå¸¦æ¥çš„å¥½å¤„ï¼Œåˆé¿å…äº†64bitå¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æœ‰æœºä¼šä½¿ç”¨è¶…è¿‡32Gçš„å †å†…å­˜ï¼Œè®°å¾—æŠŠè¿™ä¸ªé€‰é¡¹å…³äº†ã€‚</p><h5 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h5><ul><li>1.8ä»¥å‰ä¼šå¯¼è‡´<strong>æ°¸ä¹…ä»£</strong>å†…å­˜æº¢å‡º</li><li>1.8ä»¥åä¼šå¯¼è‡´<strong>å…ƒç©ºé—´</strong>å†…å­˜æº¢å‡º</li></ul><h2 id="åƒåœ¾å›æ”¶-amp-amp-æ€§èƒ½ä¼˜åŒ–åŸºç¡€"><a href="#åƒåœ¾å›æ”¶-amp-amp-æ€§èƒ½ä¼˜åŒ–åŸºç¡€" class="headerlink" title="åƒåœ¾å›æ”¶&amp;&amp;æ€§èƒ½ä¼˜åŒ–åŸºç¡€"></a>åƒåœ¾å›æ”¶&amp;&amp;æ€§èƒ½ä¼˜åŒ–åŸºç¡€</h2><h3 id="1ã€å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶"><a href="#1ã€å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶" class="headerlink" title="1ã€å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶"></a>1ã€å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥å›æ”¶</h3><h4 id="å¼•ç”¨è®¡æ•°æ³•"><a href="#å¼•ç”¨è®¡æ•°æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°æ³•"></a>å¼•ç”¨è®¡æ•°æ³•</h4><p>åœ¨å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹<br>å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±åŠ ä¸€ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±å‡ä¸€ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸ºé›¶çš„å¯¹è±¡å°±æ˜¯ä¸å¯<br>èƒ½å†è¢«ä½¿ç”¨çš„ã€‚</p><p>å¼•ç”¨è®¡æ•°ç®—æ³•ï¼ˆReference Countingï¼‰è™½ç„¶å ç”¨äº†ä¸€äº›é¢å¤–çš„å†…å­˜ç©ºé—´æ¥è¿›è¡Œè®¡æ•°ï¼Œä½†<br>å®ƒçš„åŸç†ç®€å•ï¼Œåˆ¤å®šæ•ˆç‡ä¹Ÿå¾ˆé«˜ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒéƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„ç®—æ³•</p><p>å•çº¯çš„å¼•ç”¨è®¡æ•°<br>å°±å¾ˆéš¾è§£å†³å¯¹è±¡ä¹‹é—´ç›¸äº’å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p><p>æ¥è‡ªæ·±å…¥ç†è§£Jvmè™šæ‹Ÿæœºçš„ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReferenceCountingGC</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> Object instance = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> _1MB = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿™ä¸ªæˆå‘˜å±æ€§çš„å”¯ä¸€æ„ä¹‰å°±æ˜¯å ç‚¹å†…å­˜ï¼Œä»¥ä¾¿èƒ½åœ¨GCæ—¥å¿—ä¸­çœ‹æ¸…æ¥šæ˜¯å¦æœ‰å›æ”¶è¿‡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">byte</span>[] bigSize = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">2</span> * _1MB];<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGC</span><span class="hljs-params">()</span> </span>&#123;<br>        ReferenceCountingGC objA = <span class="hljs-keyword">new</span> ReferenceCountingGC();<br>        ReferenceCountingGC objB = <span class="hljs-keyword">new</span> ReferenceCountingGC();<br>        objA.instance = objB;<br>        objB.instance = objA;<br>        objA = <span class="hljs-keyword">null</span>;<br>        objB = <span class="hljs-keyword">null</span>;<br><span class="hljs-comment">// å‡è®¾åœ¨è¿™è¡Œå‘ç”ŸGCï¼ŒobjAå’ŒobjBæ˜¯å¦èƒ½è¢«å›æ”¶ï¼Ÿ</span><br>        System.gc();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        testGC();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…ˆæ¥çœ‹çœ‹å¦‚ä½•è®¾ç½®æ‰“å°æ—¥å¿—</p><p>æ­¤å¤„å¾—èŠ±ä¸€ç‚¹æ—¶é—´</p><p>çœ‹çœ‹æ•ˆæœ</p><p><img src="/2021/10/03/jvm/image-20210804143908786.png"></p><p>æ­¤å¤„çš„12M-&gt;2Mæ„å‘³ç€è™šæ‹Ÿæœºå¹¶æ²¡æœ‰å› ä¸ºè¿™ä¸¤<br>ä¸ªå¯¹è±¡äº’ç›¸å¼•ç”¨å°±æ”¾å¼ƒå›æ”¶å®ƒä»¬ï¼Œè¿™ä¹Ÿä»ä¾§é¢è¯´æ˜äº†Javaè™šæ‹Ÿæœºå¹¶ä¸æ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°ç®—æ³•æ¥åˆ¤æ–­å¯¹è±¡<br>æ˜¯å¦å­˜æ´»çš„ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>-XX:+PrintGC</td><td>è¾“å‡ºç®€å•GCæ—¥å¿—</td></tr><tr><td>-XX:+PrintGCDetails</td><td>è¾“å‡ºè¯¦ç»†GCæ—¥å¿—ï¼Œå¹¶ä¸”è™šæ‹Ÿæœºé€€å‡ºå‰æ‰“å°å †æ ˆä½¿ç”¨ä¿¡æ¯</td></tr><tr><td>-XX:+PrintHeapAtGC</td><td>åœ¨æ¯æ¬¡GCå‰åéƒ½æ‰“å°å †æ ˆä¿¡æ¯</td></tr><tr><td>-XX:+PrintGCTimeStamps</td><td>è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥åŸºå‡†æ—¶é—´çš„å½¢å¼ï¼‰,JVMå¯åŠ¨åçš„æ—¶é—´åç§»é‡ã€‚</td></tr><tr><td>-XX:+PrintGCDateStamps</td><td>è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥æ—¥æœŸçš„å½¢å¼ï¼Œå¦‚2020-04-02T10:09:01.045+0800ï¼‰</td></tr><tr><td>-Xloggc:./gc.log    æ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„</td><td>æ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„</td></tr><tr><td>-XX:SurvivorRatio=8</td><td>å®šä¹‰äº†å¹´è½»ä»£ä¸­EdenåŒºä¸ä¸€ä¸ªSurvivoråŒºçš„ç©ºé—´æ¯”ä¾‹æ˜¯8:1</td></tr><tr><td>-Xmx</td><td>è®¾å®šç¨‹åºè¿è¡ŒæœŸé—´æœ€å¤§å¯å ç”¨çš„å†…å­˜å¤§å°</td></tr><tr><td>-Xms</td><td>è®¾å®šç¨‹åºå¯åŠ¨æ—¶å ç”¨å†…å­˜å¤§å°ï¼Œå¤§ä¸€ç‚¹ä¸€èˆ¬å¯åŠ¨æ›´å¿«</td></tr><tr><td>-Xmn</td><td>è®¾ç½®å¹´è½»ä»£å ç”¨å†…å­˜å¤§å°</td></tr><tr><td>-XX:MaxTenuringThreshold=N</td><td>å¯¹è±¡å¹´é¾„è¾¾åˆ°Nåï¼Œä¸‹ä¸€æ¬¡GCå°†è¿›å…¥è€å¹´ä»£ï¼Œå¯ä»¥ä¸º0</td></tr></tbody></table><h4 id="å¯è¾¾æ€§åˆ†æç®—æ³•"><a href="#å¯è¾¾æ€§åˆ†æç®—æ³•" class="headerlink" title="å¯è¾¾æ€§åˆ†æç®—æ³•"></a>å¯è¾¾æ€§åˆ†æç®—æ³•</h4><p>come from æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</p><p>å½“å‰ä¸»æµçš„å•†ç”¨ç¨‹åºè¯­è¨€ï¼ˆJavaã€C#ï¼Œä¸Šæº¯è‡³å‰é¢æåˆ°çš„å¤è€çš„Lispï¼‰çš„å†…å­˜ç®¡ç†å­ç³»ç»Ÿï¼Œéƒ½æ˜¯<br>é€šè¿‡å¯è¾¾æ€§åˆ†æï¼ˆReachability Analysisï¼‰ç®—æ³•æ¥åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»çš„ã€‚è¿™ä¸ªç®—æ³•çš„åŸºæœ¬æ€è·¯å°±æ˜¯é€šè¿‡<br>ä¸€ç³»åˆ—ç§°ä¸ºâ€œGC Rootsâ€çš„æ ¹å¯¹è±¡ä½œä¸ºèµ·å§‹èŠ‚ç‚¹é›†ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®å¼•ç”¨å…³ç³»å‘ä¸‹æœç´¢ï¼Œæœç´¢è¿‡<br>ç¨‹æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºâ€œå¼•ç”¨é“¾â€ï¼ˆReference Chainï¼‰ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡åˆ°GC Rootsé—´æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œ<br>æˆ–è€…ç”¨å›¾è®ºçš„è¯æ¥è¯´å°±æ˜¯ä»GC Rootsåˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„ã€‚</p><img src="/2021/10/03/jvm/image-20210804144414534.png" style="zoom:67%;"><p><strong>å¯ä»¥ä½œä¸ºGC Rootçš„å¯¹è±¡</strong></p><ul><li>è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚ã€€</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡</li></ul><h3 id="2-äº”ç§å¼•ç”¨"><a href="#2-äº”ç§å¼•ç”¨" class="headerlink" title="2.äº”ç§å¼•ç”¨"></a>2.äº”ç§å¼•ç”¨</h3><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150800.png" alt="img" style="zoom:67%;"><h5 id="å¼ºå¼•ç”¨"><a href="#å¼ºå¼•ç”¨" class="headerlink" title="å¼ºå¼•ç”¨"></a>å¼ºå¼•ç”¨</h5><p>åªæœ‰GC Root<strong>éƒ½ä¸å¼•ç”¨</strong>è¯¥å¯¹è±¡æ—¶ï¼Œæ‰ä¼šå›æ”¶<strong>å¼ºå¼•ç”¨</strong>å¯¹è±¡</p><ul><li>å¦‚ä¸Šå›¾Bã€Cå¯¹è±¡éƒ½ä¸å¼•ç”¨A1å¯¹è±¡æ—¶ï¼ŒA1å¯¹è±¡æ‰ä¼šè¢«å›æ”¶</li></ul><h5 id="è½¯å¼•ç”¨"><a href="#è½¯å¼•ç”¨" class="headerlink" title="è½¯å¼•ç”¨"></a>è½¯å¼•ç”¨</h5><p>å½“GC RootæŒ‡å‘è½¯å¼•ç”¨å¯¹è±¡æ—¶ï¼Œåœ¨<strong>å†…å­˜ä¸è¶³æ—¶</strong>ï¼Œä¼š<strong>å›æ”¶è½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡</strong></p><ul><li>å¦‚ä¸Šå›¾å¦‚æœBå¯¹è±¡ä¸å†å¼•ç”¨A2å¯¹è±¡ä¸”å†…å­˜ä¸è¶³æ—¶ï¼Œè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„A2å¯¹è±¡å°±ä¼šè¢«å›æ”¶</li></ul><p>å¦‚æœåœ¨åƒåœ¾å›æ”¶æ—¶å‘ç°å†…å­˜ä¸è¶³ï¼Œåœ¨å›æ”¶è½¯å¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡æ—¶ï¼Œ<strong>è½¯å¼•ç”¨æœ¬èº«ä¸ä¼šè¢«æ¸…ç†</strong></p><p>å¦‚æœæƒ³è¦<strong>æ¸…ç†è½¯å¼•ç”¨</strong>ï¼Œéœ€è¦ä½¿<strong>ç”¨å¼•ç”¨é˜Ÿåˆ—</strong></p><p><strong>å¤§æ¦‚æ€è·¯ä¸ºï¼š</strong>æŸ¥çœ‹å¼•ç”¨é˜Ÿåˆ—ä¸­æœ‰æ— è½¯å¼•ç”¨ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å°†è¯¥è½¯å¼•ç”¨ä»å­˜æ”¾å®ƒçš„é›†åˆä¸­ç§»é™¤ï¼ˆè¿™é‡Œä¸ºä¸€ä¸ªlisté›†åˆï¼‰</p><h5 id="å¼±å¼•ç”¨"><a href="#å¼±å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨"></a>å¼±å¼•ç”¨</h5><p>åªæœ‰å¼±å¼•ç”¨å¼•ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œ<strong>æ— è®ºå†…å­˜æ˜¯å¦å……è¶³</strong>ï¼Œéƒ½ä¼šå›æ”¶å¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡</p><ul><li>å¦‚ä¸Šå›¾å¦‚æœBå¯¹è±¡ä¸å†å¼•ç”¨A3å¯¹è±¡ï¼Œåˆ™A3å¯¹è±¡ä¼šè¢«å›æ”¶</li></ul><p><strong>å¼±å¼•ç”¨çš„ä½¿ç”¨å’Œè½¯å¼•ç”¨ç±»ä¼¼</strong>ï¼Œåªæ˜¯å°† <strong>SoftReference æ¢ä¸ºäº† WeakReference</strong></p><h5 id="è™šå¼•ç”¨"><a href="#è™šå¼•ç”¨" class="headerlink" title="è™šå¼•ç”¨"></a><strong>è™šå¼•ç”¨</strong></h5><p>å½“è™šå¼•ç”¨å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«å›æ”¶ä»¥åï¼Œè™šå¼•ç”¨å¯¹è±¡å°±ä¼šè¢«æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œè°ƒç”¨è™šå¼•ç”¨çš„æ–¹æ³•</p><ul><li>è™šå¼•ç”¨çš„ä¸€ä¸ªä½“ç°æ˜¯<strong>é‡Šæ”¾ç›´æ¥å†…å­˜æ‰€åˆ†é…çš„å†…å­˜</strong>ï¼Œå½“å¼•ç”¨çš„å¯¹è±¡ByteBufferè¢«åƒåœ¾å›æ”¶ä»¥åï¼Œè™šå¼•ç”¨å¯¹è±¡Cleanerå°±ä¼šè¢«æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œç„¶åè°ƒç”¨Cleanerçš„cleanæ–¹æ³•æ¥é‡Šæ”¾ç›´æ¥å†…å­˜</li><li>å¦‚ä¸Šå›¾ï¼ŒBå¯¹è±¡ä¸å†å¼•ç”¨ByteBufferå¯¹è±¡ï¼ŒByteBufferå°±ä¼šè¢«å›æ”¶ã€‚ä½†æ˜¯ç›´æ¥å†…å­˜ä¸­çš„å†…å­˜è¿˜æœªè¢«å›æ”¶ã€‚è¿™æ—¶éœ€è¦å°†è™šå¼•ç”¨å¯¹è±¡Cleaneræ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œç„¶åè°ƒç”¨å®ƒçš„cleanæ–¹æ³•æ¥é‡Šæ”¾ç›´æ¥å†…å­˜</li></ul><h5 id="ç»ˆç»“å™¨å¼•ç”¨"><a href="#ç»ˆç»“å™¨å¼•ç”¨" class="headerlink" title="ç»ˆç»“å™¨å¼•ç”¨"></a>ç»ˆç»“å™¨å¼•ç”¨</h5><p>æ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿è‡ªObjectç±»ï¼ŒObjectç±»æœ‰ä¸€ä¸ªfinalizeæ–¹æ³•ã€‚å½“æŸä¸ªå¯¹è±¡ä¸å†è¢«å…¶ä»–çš„å¯¹è±¡æ‰€å¼•ç”¨æ—¶ï¼Œä¼šå…ˆå°†ç»ˆç»“å™¨å¼•ç”¨å¯¹è±¡æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œç„¶åæ ¹æ®ç»ˆç»“å™¨å¼•ç”¨å¯¹è±¡æ‰¾åˆ°å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åè°ƒç”¨è¯¥å¯¹è±¡çš„finalizeæ–¹æ³•ã€‚è°ƒç”¨ä»¥åï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶äº†</p><ul><li>å¦‚ä¸Šå›¾ï¼ŒBå¯¹è±¡ä¸å†å¼•ç”¨A4å¯¹è±¡ã€‚è¿™æ˜¯ç»ˆç»“å™¨å¯¹è±¡å°±ä¼šè¢«æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œå¼•ç”¨é˜Ÿåˆ—ä¼šæ ¹æ®å®ƒï¼Œæ‰¾åˆ°å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡ã€‚ç„¶åè°ƒç”¨è¢«å¼•ç”¨å¯¹è±¡çš„finalizeæ–¹æ³•ã€‚è°ƒç”¨ä»¥åï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶äº†</li></ul><h5 id="å¼•ç”¨é˜Ÿåˆ—"><a href="#å¼•ç”¨é˜Ÿåˆ—" class="headerlink" title="å¼•ç”¨é˜Ÿåˆ—"></a>å¼•ç”¨é˜Ÿåˆ—</h5><ul><li>è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨<strong>å¯ä»¥é…åˆ</strong>å¼•ç”¨é˜Ÿåˆ—<ul><li>åœ¨<strong>å¼±å¼•ç”¨</strong>å’Œ<strong>è™šå¼•ç”¨</strong>æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«å›æ”¶ä»¥åï¼Œä¼šå°†è¿™äº›å¼•ç”¨æ”¾å…¥å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œæ–¹ä¾¿ä¸€èµ·å›æ”¶è¿™äº›è½¯/å¼±å¼•ç”¨å¯¹è±¡</li></ul></li><li>è™šå¼•ç”¨å’Œç»ˆç»“å™¨å¼•ç”¨<strong>å¿…é¡»é…åˆ</strong>å¼•ç”¨é˜Ÿåˆ—<ul><li>è™šå¼•ç”¨å’Œç»ˆç»“å™¨å¼•ç”¨åœ¨ä½¿ç”¨æ—¶ä¼šå…³è”ä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—</li></ul></li></ul><h3 id="3-åƒåœ¾å›æ”¶ç®—æ³•"><a href="#3-åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="3.åƒåœ¾å›æ”¶ç®—æ³•"></a>3.åƒåœ¾å›æ”¶ç®—æ³•</h3><p><strong>æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰</strong><br>GCåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œæ ‡è®°å’Œæ¸…é™¤ã€‚é¦–å…ˆæ ‡è®°æ‰€æœ‰å¯å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚åŒæ—¶ä¼šäº§ç”Ÿä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ã€‚ç¢ç‰‡è¿‡å¤šä¼šå¯¼è‡´ä»¥åç¨‹åºè¿è¡Œæ—¶éœ€è¦åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶ï¼Œæ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜ï¼Œè€Œä¸å¾—å·²å†æ¬¡è§¦å‘GCã€‚</p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150827.png" alt="img" style="zoom:67%;"><ul><li><strong>å¤åˆ¶ï¼ˆCopyï¼‰</strong><br>å°†å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—ã€‚å½“è¿™ä¸€å—å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸Šï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚è¿™æ ·ä½¿å¾—æ¯æ¬¡éƒ½æ˜¯å¯¹åŠä¸ªå†…å­˜åŒºå›æ”¶ï¼Œä¹Ÿä¸ç”¨è€ƒè™‘å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œç®€å•é«˜æ•ˆã€‚ç¼ºç‚¹éœ€è¦ä¸¤å€çš„å†…å­˜ç©ºé—´ã€‚<img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150842.png" alt="img" style="zoom:67%;"></li></ul><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150856.png" alt="img" style="zoom:67%;"><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150907.png" alt="img" style="zoom:67%;"><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150919.png" alt="img" style="zoom:67%;"><ul><li><strong>æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰</strong><br>ä¹Ÿåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œé¦–å…ˆæ ‡è®°å¯å›æ”¶çš„å¯¹è±¡ï¼Œå†å°†å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç†æ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚æ­¤æ–¹æ³•é¿å…æ ‡è®°-æ¸…é™¤ç®—æ³•çš„ç¢ç‰‡é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†å¤åˆ¶ç®—æ³•çš„ç©ºé—´é—®é¢˜ã€‚<br>ä¸€èˆ¬å¹´è½»ä»£ä¸­æ‰§è¡ŒGCåï¼Œä¼šæœ‰å°‘é‡çš„å¯¹è±¡å­˜æ´»ï¼Œå°±ä¼šé€‰ç”¨å¤åˆ¶ç®—æ³•ï¼Œåªè¦ä»˜å‡ºå°‘é‡çš„å­˜æ´»å¯¹è±¡å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆæ”¶é›†ã€‚è€Œè€å¹´ä»£ä¸­å› ä¸ºå¯¹è±¡å­˜æ´»ç‡é«˜ï¼Œæ²¡æœ‰é¢å¤–è¿‡å¤šå†…å­˜ç©ºé—´åˆ†é…ï¼Œå°±éœ€è¦ä½¿ç”¨æ ‡è®°-æ¸…ç†æˆ–è€…æ ‡è®°-æ•´ç†ç®—æ³•æ¥è¿›è¡Œå›æ”¶ã€‚</li></ul><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150827.png" alt="img" style="zoom:67%;"><h3 id="4-åˆ†ä»£å›æ”¶"><a href="#4-åˆ†ä»£å›æ”¶" class="headerlink" title="4.åˆ†ä»£å›æ”¶"></a>4.åˆ†ä»£å›æ”¶</h3><p>å°†å †å†…å­˜åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†åä¸ºæ–°ç”Ÿä»£ï¼Œä¸€éƒ¨åˆ†åä¸ºè€å¹´ä»£</p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200608150931.png" alt="img" style="zoom:67%;"><p>å…¶ä¸­æ–°ç”Ÿä»£åˆ†ä¸ºäº†ä¼Šç”¸å›­ï¼Œå¹¸å­˜åŒºfromï¼Œå¹¸å­˜åŒºtoã€‚</p><p>é¦–å…ˆï¼Œnewå‡ºæ¥çš„å¯¹è±¡åœ¨ä¼Šç”¸å›­è¿›è¡Œåˆ›å»º</p><p>å½“ä¼Šç”¸å›­çš„å†…å­˜ä¸è¶³æ˜¯ï¼Œå°±ä¼šè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶å«åšminor GC,</p><ul><li>Minor GCä¼šå°†ä¼Šç”¸å›­å’Œå¹¸å­˜åŒºFROMå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¹¸å­˜åŒºTOä¸­ï¼Œä½¿å¾—å…¶å¯¿å‘½åŠ ä¸€(å¹´é¾„é˜ˆå€¼ï¼Œå¯ä»¥é€šè¿‡-XX:MaxTenuringThresholdæ¥è®¾ç½®)ï¼Œåœ¨äº¤æ¢ä¸¤ä¸ªå¹¸å­˜åŒº</li></ul><p>ä¸ç®¡æ€æ ·ï¼Œéƒ½ä¼šä¿è¯åä¸ºToçš„å¹¸å­˜åŒºæ˜¯ç©ºçš„ï¼ŒMinor GCä¼šä¸€ç›´é‡å¤è¿™æ ·çš„è¿‡ç¨‹ï¼Œç›´åˆ°â€œToâ€åŒºè¢«å¡«æ»¡ï¼Œâ€œToâ€åŒºè¢«å¡«æ»¡ä¹‹åï¼Œä¼šå°†æ‰€æœ‰å¯¹è±¡ç§»åŠ¨åˆ°å¹´è€ä»£ä¸­ã€‚</p><ul><li>å¦‚æœæ–°ç”Ÿä»£è€å¹´ä»£ä¸­çš„å†…å­˜éƒ½æ»¡äº†ï¼Œå°±ä¼šå…ˆè§¦å‘Minor GCï¼Œå†è§¦å‘<strong>Full GC</strong>ï¼Œæ‰«æ<strong>æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸­</strong>æ‰€æœ‰ä¸å†ä½¿ç”¨çš„å¯¹è±¡å¹¶å›æ”¶</li><li>å½“é‡åˆ°ä¸€ä¸ª<strong>è¾ƒå¤§çš„å¯¹è±¡</strong>æ—¶ï¼Œå°±ç®—æ–°ç”Ÿä»£çš„<strong>ä¼Šç”¸å›­</strong>ä¸ºç©ºï¼Œä¹Ÿ<strong>æ— æ³•å®¹çº³è¯¥å¯¹è±¡</strong>æ—¶ï¼Œä¼šå°†è¯¥å¯¹è±¡<strong>ç›´æ¥æ™‹å‡ä¸ºè€å¹´ä»£</strong></li><li>å†æ¬¡åˆ›å»ºå¯¹è±¡ï¼Œè‹¥æ–°ç”Ÿä»£çš„ä¼Šç”¸å›­åˆæ»¡äº†ï¼Œåˆ™ä¼šå†æ¬¡è§¦å‘ Minor GCï¼ˆä¼šè§¦å‘ stop the worldï¼Œ æš‚åœå…¶ä»–ç”¨æˆ·çº¿ç¨‹ï¼Œåªè®©åƒåœ¾å›æ”¶çº¿ç¨‹å·¥ä½œï¼‰ï¼Œè¿™æ—¶ä¸ä»…ä¼šå›æ”¶ä¼Šç”¸å›­ä¸­çš„åƒåœ¾ï¼Œè¿˜ä¼šå›æ”¶å¹¸å­˜åŒºä¸­çš„åƒåœ¾ï¼Œå†å°†æ´»è·ƒå¯¹è±¡å¤åˆ¶åˆ°å¹¸å­˜åŒºTOä¸­ã€‚å›æ”¶ä»¥åä¼šäº¤æ¢ä¸¤ä¸ªå¹¸å­˜åŒºï¼Œå¹¶è®©å¹¸å­˜åŒºä¸­çš„å¯¹è±¡å¯¿å‘½åŠ 1</li></ul><h4 id="æœ‰å…³æ–°ç”Ÿä»£çš„JVMå‚æ•°"><a href="#æœ‰å…³æ–°ç”Ÿä»£çš„JVMå‚æ•°" class="headerlink" title="æœ‰å…³æ–°ç”Ÿä»£çš„JVMå‚æ•°"></a><strong>æœ‰å…³æ–°ç”Ÿä»£çš„JVMå‚æ•°</strong></h4><p>1)-XX:NewSizeå’Œ-XX:MaxNewSize</p><p>ç”¨äºè®¾ç½®å¹´è½»ä»£çš„å¤§å°ï¼Œå»ºè®®è®¾ä¸ºæ•´ä¸ªå †å¤§å°çš„1/3æˆ–è€…1/4,ä¸¤ä¸ªå€¼è®¾ä¸ºä¸€æ ·å¤§ã€‚</p><p>2)-XX:SurvivorRatio</p><p>ç”¨äºè®¾ç½®Edenå’Œå…¶ä¸­ä¸€ä¸ªSurvivorçš„æ¯”å€¼ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ¯”è¾ƒé‡è¦ã€‚</p><p>3)-XX:+PrintTenuringDistribution</p><p>è¿™ä¸ªå‚æ•°ç”¨äºæ˜¾ç¤ºæ¯æ¬¡Minor GCæ—¶SurvivoråŒºä¸­å„ä¸ªå¹´é¾„æ®µçš„å¯¹è±¡çš„å¤§å°ã€‚</p><p>4).-XX:InitialTenuringThresholå’Œ-XX:MaxTenuringThreshold</p><p>ç”¨äºè®¾ç½®æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œæ¯ä¸ªå¯¹è±¡åœ¨åšæŒè¿‡ä¸€æ¬¡Minor GCä¹‹åï¼Œå¹´é¾„å°±åŠ 1ã€‚</p><p>åº·åº·jstartè¾“å‡º</p><p><img src="/2021/10/03/jvm/image-20210805074443338.png"></p><p>å…¶ä¸­å„å‚æ•°ä»£è¡¨</p><ul><li>S0ï¼ŒS1ï¼Œä¸¤ä¸ªsurvivoråŒºåŸŸï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬çš„ä½¿ç”¨ç‡ä¸º0</li><li>Eï¼Œä»£è¡¨edenï¼Œè¿™æ˜¯å¹´è½»ä»£ç”¨äºåˆ†é…æ–°çš„å¯¹è±¡çš„åŒºåŸŸã€‚</li><li>Oï¼Œä»£è¡¨è€å¹´ä»£ï¼Œè¿™æ˜¯æˆ‘ä»¬ä»Šå¤©è¦é‡ç‚¹è®²çš„å†…å®¹ã€‚</li><li>Mï¼Œä»£è¡¨metaspaceï¼Œè¿™å—å†…å®¹ä»¥åå†è®²ï¼ˆä¹Ÿæœ‰å¯èƒ½æ°¸è¿œä¸å†è®²äº†ï¼Œçœ‹æƒ…å†µï¼‰</li><li>CCSï¼Œå‹ç¼©ä½¿ç”¨æ¯”ä¾‹ã€‚å¯ä»¥å…ˆä¸ç®¡è¿™ä¸ªã€‚è¿™ä¸ªå’Œä½¿ç”¨å‹ç¼©æŒ‡é’ˆæœ‰å…³ç³»ã€‚å¯ä»¥ä½¿ç”¨-XX:-UseCompressedOopså…³æ‰å‹ç¼©çš„åŠŸèƒ½ï¼Œè¿™ä¸€é¡¹å°±ä¸å†æ‰“å°äº†ã€‚</li><li>YGCï¼Œå¹´è½»ä»£å›æ”¶çš„æ¬¡æ•°ã€‚</li><li>YGCTï¼Œå¹´è½»ä»£å›æ”¶æ‰€ä½¿ç”¨çš„æ—¶é—´ã€‚ç”±äºå¹´è½»ä»£çš„å›æ”¶ä½¿ç”¨copy GCã€‚ä¼šè®©æ‰€æœ‰Javaçº¿ç¨‹éƒ½åœé¡¿ä¸‹æ¥ï¼Œæ‰€ä»¥è¿™ä¸€é¡¹å°±æ˜¯æŒ‡ç”¨äºå¹´è½»ä»£å›æ”¶çš„æ—¶é—´ã€‚</li><li>FGCï¼Œè¿™ä¸€é¡¹å°±æ¯”è¾ƒå¤æ‚äº†ã€‚åœ¨ä¸åŒçš„GCç»„åˆä¸­ä»£è¡¨ä¸åŒçš„æ„ä¹‰ï¼Œåé¢ä¼šè¯¦ç»†è®²åˆ°ã€‚</li><li>FGCTï¼Œä¸ä¸Šé¢çš„FGCä¸€å®šæ ·çš„ï¼Œå­—é¢æ„æ€æ˜¯full gc timeï¼Œä½†åœ¨ä¸åŒçš„GCé€‰é¡¹ä¸‹ï¼Œæ„ä¹‰æœ‰æ‰€ä¸åŒã€‚</li><li>GCTï¼Œä¸€èˆ¬æ¥è¯´ï¼Œç­‰äºYGCTä¸FGCTä¹‹å’Œã€‚</li></ul><h3 id="åƒåœ¾å›æ”¶å™¨"><a href="#åƒåœ¾å›æ”¶å™¨" class="headerlink" title="åƒåœ¾å›æ”¶å™¨"></a>åƒåœ¾å›æ”¶å™¨</h3><ul><li><p><strong>ä¸²è¡Œæ”¶é›†å™¨ï¼ˆSerialï¼‰</strong><br>æ¯”è¾ƒè€çš„æ”¶é›†å™¨ï¼Œå•çº¿ç¨‹ã€‚æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœåº”ç”¨çš„å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°æ”¶é›†ç»“æŸã€‚</p></li><li><p><strong>å¹¶è¡Œæ”¶é›†å™¨ï¼ˆParallelï¼‰</strong><br>å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œåœ¨å¤šæ ¸CPUä¸‹æ•ˆç‡æ›´é«˜ï¼Œåº”ç”¨çº¿ç¨‹ä»ç„¶å¤„äºç­‰å¾…çŠ¶æ€ã€‚</p></li><li><p>CMSæ”¶é›†å™¨ï¼ˆConcurrent Mark Sweepï¼‰</p><p>CMSæ”¶é›†å™¨æ˜¯ç¼©çŸ­æš‚åœåº”ç”¨æ—¶é—´ä¸ºç›®æ ‡è€Œè®¾è®¡çš„ï¼Œæ˜¯åŸºäºæ ‡è®°-æ¸…é™¤ç®—æ³•å®ç°ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>åˆå§‹æ ‡è®°ï¼ˆInitial Markï¼‰</li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markï¼‰</li><li>é‡æ–°æ ‡è®°ï¼ˆRemarkï¼‰</li><li>å¹¶å‘æ¸…é™¤ï¼ˆConcurrent Sweepï¼‰</li></ul><p>å•ä½æ—¶é—´å†…ï¼ŒSTWï¼ˆstop the worldï¼Œåœæ‰å…¶ä»–æ‰€æœ‰å·¥ä½œçº¿ç¨‹ï¼‰æ—¶é—´æœ€çŸ­</p></li></ul><p>â€‹        <strong>JDK1.8é»˜è®¤ä½¿ç”¨</strong>çš„åƒåœ¾å›æ”¶å™¨</p><ul><li>G1</li></ul><p>â€‹           Garbage First</p><p>â€‹            JDK 9ä»¥åé»˜è®¤ä½¿ç”¨ï¼Œè€Œä¸”æ›¿ä»£äº†CMS æ”¶é›†å™¨</p><p>â€‹      G1çš„ç‰¹ç‚¹</p><ul><li>G1ä¸å†åšæŒå›ºå®šå¤§å°ä»¥åŠå›ºå®šæ•°é‡çš„<br>åˆ†ä»£åŒºåŸŸåˆ’åˆ†ï¼Œè€Œæ˜¯æŠŠè¿ç»­çš„Javaå †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œæ¯ä¸€ä¸ªRegionéƒ½å¯ä»¥æ ¹æ®éœ€è¦ï¼Œæ‰®æ¼”æ–°ç”Ÿä»£çš„Edenç©ºé—´ã€Survivorç©ºé—´ï¼Œæˆ–è€…è€å¹´ä»£ç©ºé—´ã€‚æ”¶é›†å™¨èƒ½å¤Ÿå¯¹æ‰®æ¼”ä¸åŒè§’è‰²çš„<br>Regioné‡‡ç”¨ä¸åŒçš„ç­–ç•¥å»å¤„ç†ï¼Œè¿™æ ·æ— è®ºæ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡è¿˜æ˜¯å·²ç»å­˜æ´»äº†ä¸€æ®µæ—¶é—´ã€ç†¬è¿‡å¤šæ¬¡æ”¶é›†çš„<br>æ—§å¯¹è±¡éƒ½èƒ½è·å–å¾ˆå¥½çš„æ”¶é›†æ•ˆæœ</li></ul><img src="https://tse1-mm.cn.bing.net/th/id/R-C.d6e8f8b74e546354d6cc594269f88487?rik=BezOq%2fgcDZHlWw&riu=http%3a%2f%2fupload-images.jianshu.io%2fupload_images%2f2184951-256a9ccb6e51be85.png&ehk=6aQFuTMvcG2m353MYMeVw4gN4PZ0p1xl%2bkzX5pUOPEk%3d&risl=&pid=ImgRaw&r=0" alt="æŸ¥çœ‹æºå›¾åƒ" style="zoom: 50%;"><p>G1ï¼šåˆ†ä¸ºäº†å››ä¸ªæ‰§è¡Œæ­¥éª¤ï¼š</p><img src="/2021/10/03/jvm/image.2BEI70.png" style="zoom: 67%;"><ul><li>åˆå§‹æ ‡è®°ï¼Œ</li><li>å¹¶å‘æ ‡è®°ï¼Œ</li><li>æœ€ç»ˆæ ‡è®°ï¼Œ</li><li>ç­›é€‰å›æ”¶</li></ul><p>åˆå§‹æ ‡è®°ï¼Œæ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ã€‚å¹¶å‘æ ‡è®°ä»GC Rootå¼€å§‹æ ‡è®°å­˜æ´»å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µè€—æ—¶æ¯”è¾ƒé•¿ï¼Œä½†ä¹Ÿå¯ä»¥ä¸åº”ç”¨çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚è€Œæœ€ç»ˆæ ‡è®°ä¹Ÿæ˜¯ä¸ºäº†ä¿®æ­£åœ¨å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŒ–çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ã€‚æœ€ååœ¨ç­›é€‰å›æ”¶é˜¶æ®µå¯¹å„ä¸ªRegionå›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„GCæš‚åœæ—¶é—´æ¥æ‰§è¡Œå›æ”¶ã€‚</p><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">-XX:+UseSerialGC</td><td align="left">ä¸²è¡Œæ”¶é›†å™¨</td></tr><tr><td align="left">-XX:+UseParallelGC</td><td align="left">å¹¶è¡Œæ”¶é›†å™¨</td></tr><tr><td align="left">-XX:+UseParallelGCThreads=8</td><td align="left">å¹¶è¡Œæ”¶é›†å™¨çº¿ç¨‹æ•°ï¼ŒåŒæ—¶æœ‰å¤šå°‘ä¸ªçº¿ç¨‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä¸€èˆ¬ä¸CPUæ•°é‡ç›¸ç­‰</td></tr><tr><td align="left">-XX:+UseParallelOldGC</td><td align="left">æŒ‡å®šè€å¹´ä»£ä¸ºå¹¶è¡Œæ”¶é›†</td></tr><tr><td align="left">-XX:+UseConcMarkSweepGC</td><td align="left">CMSæ”¶é›†å™¨ï¼ˆå¹¶å‘æ”¶é›†å™¨ï¼‰</td></tr><tr><td align="left">-XX:+UseCMSCompactAtFullCollection</td><td align="left">å¼€å¯å†…å­˜ç©ºé—´å‹ç¼©å’Œæ•´ç†ï¼Œé˜²æ­¢è¿‡å¤šå†…å­˜ç¢ç‰‡</td></tr><tr><td align="left">-XX:CMSFullGCsBeforeCompaction=0</td><td align="left">è¡¨ç¤ºå¤šå°‘æ¬¡Full GCåå¼€å§‹å‹ç¼©å’Œæ•´ç†ï¼Œ0è¡¨ç¤ºæ¯æ¬¡Full GCåç«‹å³æ‰§è¡Œå‹ç¼©å’Œæ•´ç†</td></tr><tr><td align="left">-XX:CMSInitiatingOccupancyFraction=80%</td><td align="left">è¡¨ç¤ºè€å¹´ä»£å†…å­˜ç©ºé—´ä½¿ç”¨80%æ—¶å¼€å§‹æ‰§è¡ŒCMSæ”¶é›†ï¼Œé˜²æ­¢è¿‡å¤šçš„Full GC</td></tr><tr><td align="left">-XX:+UseG1GC</td><td align="left">G1æ”¶é›†å™¨</td></tr><tr><td align="left">-XX:MaxTenuringThreshold=0</td><td align="left">åœ¨å¹´è½»ä»£ç»è¿‡å‡ æ¬¡GCåè¿˜å­˜æ´»ï¼Œå°±è¿›å…¥è€å¹´ä»£ï¼Œ0è¡¨ç¤ºç›´æ¥è¿›å…¥è€å¹´ä»£</td></tr></tbody></table><ul><li>é€‰æ‹©é«˜æ•ˆçš„GCç®—æ³•ï¼Œå¯æœ‰æ•ˆå‡å°‘åœæ­¢åº”ç”¨çº¿ç¨‹æ—¶é—´ã€‚</li><li>é¢‘ç¹Full GCä¼šå¢åŠ æš‚åœæ—¶é—´å’ŒCPUä½¿ç”¨ç‡ï¼Œå¯ä»¥åŠ å¤§è€å¹´ä»£ç©ºé—´å¤§å°é™ä½Full GCï¼Œä½†ä¼šå¢åŠ å›æ”¶æ—¶é—´ï¼Œæ ¹æ®ä¸šåŠ¡é€‚å½“å–èˆã€‚</li></ul><h2 id="ç±»åŠ è½½"><a href="#ç±»åŠ è½½" class="headerlink" title="ç±»åŠ è½½"></a>ç±»åŠ è½½</h2><p>ç±»ä»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜åˆ°è¢«å¸è½½ï¼Œæ•´ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šç±»åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½ä¸ƒä¸ªé˜¶æ®µã€‚å…¶ä¸­éªŒè¯ï¼Œå‡†å¤‡ï¼Œè§£æä¸‰ä¸ªéƒ¨åˆ†ç»Ÿç§°ä¸ºè¿æ¥ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥è¯¦ç»†äº†è§£ä¸‹ç±»åŠ è½½çš„å„ä¸ªè¿‡ç¨‹ã€‚</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3279460766e7484dbee19e086739d0f0~tplv-k3u1fbpfcp-no-mark:1280:960:0:0.awebp" alt="img" style="zoom:33%;"><p>è¿™é‡Œè¿˜æ˜¯å¿«è¿›åˆ°çœ‹ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹æŠŠ</p><p>è™½ç„¶classloaderçš„åŠ è½½è¿‡ç¨‹æœ‰å¤æ‚çš„5æ­¥ï¼Œä½†äº‹å®ä¸Šé™¤äº†åŠ è½½ä¹‹å¤–çš„å››æ­¥ï¼Œå…¶å®ƒéƒ½æ˜¯ç”±JVMè™šæ‹Ÿæœºæ§åˆ¶çš„ï¼Œæˆ‘ä»¬é™¤äº†é€‚åº”å®ƒçš„è§„èŒƒè¿›è¡Œå¼€å‘å¤–ï¼Œèƒ½å¤Ÿå¹²é¢„çš„ç©ºé—´å¹¶ä¸å¤šã€‚è€ŒåŠ è½½åˆ™æ˜¯æˆ‘ä»¬æ§åˆ¶classloaderå®ç°ç‰¹æ®Šç›®çš„æœ€é‡è¦çš„æ‰‹æ®µäº†ã€‚</p><p>åŒäº²å§”æ‰˜æœºåˆ¶</p><p>è¿™ä¸ªä¸œè¥¿å’Œäº‹ä»¶åˆ†å‘æœ‰ç‚¹ç›¸åï¼Œäº‹ä»¶åˆ†å‘æ˜¯å…ˆå¾€ä¸‹æ¨ï¼Œåœ¨å¾€ä¸Šæ¨ï¼Œè€Œç±»åŠ è½½æœºåˆ¶æ˜¯å…ˆå¾€ä¸Šæ¨ï¼Œæ²¡äººæ¨äº†ï¼Œåœ¨æ‰§è¡Œ</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e6b8ee8c76847ed85f25d2624c35985~tplv-k3u1fbpfcp-no-mark:1280:960:0:0.awebp" alt="img" style="zoom: 33%;"><p>åŒäº²å§”æ´¾æ¨¡å‹èƒ½å¤Ÿä¿è¯åŒä¸€ä¸ªç±»æœ€ç»ˆä¼šè¢«ç‰¹å®šçš„ç±»åŠ è½½å™¨åŠ è½½ã€‚</p><p>ä¾‹å¦‚ç±»java.lang.Object,å®ƒå­˜æ”¾åœ¨rt.jartä¹‹ä¸­.æ— è®ºå“ªä¸€ä¸ªç±»åŠ è½½å™¨éƒ½è¦åŠ è½½è¿™ä¸ªç±».æœ€ç»ˆéƒ½æ˜¯åŒäº²å§”æ´¾æ¨¡å‹æœ€é¡¶ç«¯çš„Bootstrapç±»åŠ è½½å™¨å»åŠ è½½.å› æ­¤Objectç±»åœ¨ç¨‹åºçš„å„ç§ç±»åŠ è½½å™¨ç¯å¢ƒä¸­éƒ½æ˜¯åŒä¸€ä¸ªç±».ç›¸å.å¦‚æœæ²¡æœ‰ä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å‹.ç”±å„ä¸ªç±»åŠ è½½å™¨è‡ªè¡Œå»åŠ è½½çš„è¯.å¦‚æœç”¨æˆ·ç¼–å†™äº†ä¸€ä¸ªç§°ä¸ºâ€œjava.lang.Objectâ€çš„ç±».å¹¶å­˜æ”¾åœ¨ç¨‹åºçš„ClassPathä¸­.é‚£ç³»ç»Ÿä¸­å°†ä¼šå‡ºç°å¤šä¸ªä¸åŒçš„Objectç±».javaç±»å‹ä½“ç³»ä¸­æœ€åŸºç¡€çš„è¡Œä¸ºä¹Ÿå°±æ— æ³•ä¿è¯.åº”ç”¨ç¨‹åºä¹Ÿå°†ä¼šä¸€ç‰‡æ··ä¹±.</p><p>ç±»åŠ è½½å™¨ï¼š</p><ul><li><p>å¯åŠ¨ç±»åŠ è½½å™¨(Bootstrap Classloader)è´Ÿè´£å°†<JAVA_HOME>/libç›®å½•ä¸‹å¹¶ä¸”è¢«è™šæ‹Ÿæœºè¯†åˆ«çš„ç±»åº“åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­ã€‚æˆ‘ä»¬å¸¸ç”¨åŸºç¡€åº“ï¼Œä¾‹å¦‚java.util.**ï¼Œjava.io.**ï¼Œjava.lang.**ç­‰ç­‰éƒ½æ˜¯ç”±æ ¹åŠ è½½å™¨åŠ è½½ã€‚</JAVA_HOME></p><p>ç”±C++å†™çš„,ç”±JVMå¯åŠ¨</p></li><li><p>æ‰©å±•ç±»åŠ è½½å™¨(Extention Classloader)è´Ÿè´£åŠ è½½JVMæ‰©å±•ç±»ï¼Œæ¯”å¦‚swingç³»åˆ—ã€å†…ç½®çš„jså¼•æ“ã€xmlè§£æå™¨ç­‰ï¼Œè¿™äº›ç±»åº“ä»¥javaxå¼€å¤´ï¼Œå®ƒä»¬çš„jaråŒ…ä½äº<JAVA_HOME>/lib/extç›®å½•ä¸­ã€‚</JAVA_HOME></p></li><li><p>åº”ç”¨ç¨‹åºåŠ è½½å™¨(Application Classloader)ä¹Ÿå«ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œå®ƒè´Ÿè´£åŠ è½½ç”¨æˆ·è·¯å¾„(ClassPath)ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“ã€‚æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä»£ç ä»¥åŠä½¿ç”¨çš„ç¬¬ä¸‰æ–¹çš„jaråŒ…éƒ½æ˜¯ç”±å®ƒæ¥åŠ è½½çš„ã€‚</p></li><li><p>è‡ªå®šä¹‰åŠ è½½å™¨(Custom Classloader)é€šå¸¸æ˜¯æˆ‘ä»¬ä¸ºäº†æŸäº›ç‰¹æ®Šç›®çš„å®ç°çš„è‡ªå®šä¹‰åŠ è½½å™¨ï¼Œ</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>jvm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>jvmåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>kotlin</title>
    <link href="/2021/10/03/kotlin/"/>
    <url>/2021/10/03/kotlin/</url>
    
    <content type="html"><![CDATA[<h1 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h1><h2 id="kotlinæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#kotlinæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="kotlinæ˜¯ä»€ä¹ˆï¼Ÿ"></a>kotlinæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Kotlin æ˜¯ä¸€ç§åœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„é™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€ï¼Œè¢«ç§°ä¹‹ä¸º Android ä¸–ç•Œçš„Swiftï¼ˆç¡®å®é•¿çš„å¾ˆåƒï¼‰ï¼Œç”± JetBrains è®¾è®¡å¼€å‘å¹¶å¼€æºã€‚</p><p>Kotlin å¯ä»¥ç¼–è¯‘æˆJavaå­—èŠ‚ç ï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘æˆ JavaScriptï¼Œæ–¹ä¾¿åœ¨æ²¡æœ‰ JVM çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚</p><p>åœ¨Google I/O 2017ä¸­ï¼ŒGoogle å®£å¸ƒ Kotlin æˆä¸º Android å®˜æ–¹å¼€å‘è¯­è¨€ã€‚</p><h2 id="Kotlinå¥½å¤„éƒ½æœ‰å•¥ï¼Ÿ"><a href="#Kotlinå¥½å¤„éƒ½æœ‰å•¥ï¼Ÿ" class="headerlink" title="Kotlinå¥½å¤„éƒ½æœ‰å•¥ï¼Ÿ"></a>Kotlinå¥½å¤„éƒ½æœ‰å•¥ï¼Ÿ</h2><p>ä½œä¸ºç°ä»£è¯­è¨€ï¼Œkotlinå…·æœ‰é«˜æ•ˆçš„ç‰¹ç‚¹ï¼Œå…·æœ‰ä¸¥æ ¼çš„â€œé˜²ç©ºæ€æƒ³â€ï¼Œä¹Ÿæ˜¯ä¸€é—¨èƒ½è®©äººç”œåˆ°é½çš„è¯­è¨€ï¼Œæœ‰æ¥ç®¡javaçš„æ„å›¾ï¼Œå€ŸåŠ©å®‰å“èµ°å‘å…¨å¹³å°ï¼Œspringèµ°å‘åç«¯ï¼Œkslç”¨æ¥æ“ä½œgradle,åŸºäºjvmä¹Ÿä½¿å®ƒå…·æœ‰å¾ˆå¥½çš„è·¨å¹³å°æ€§ï¼Œå¹¶ä¸”æ‹¥æœ‰å¾ˆå¤šå…¶ä»–è¯­è¨€çš„ä¼˜è¶Šåœ°æ–¹ï¼Œæ¯”å¦‚åç¨‹ç­‰</p><h2 id="Kotlinçš„ä¸€äº›åŸºç¡€è¯­æ³•"><a href="#Kotlinçš„ä¸€äº›åŸºç¡€è¯­æ³•" class="headerlink" title="Kotlinçš„ä¸€äº›åŸºç¡€è¯­æ³•"></a>Kotlinçš„ä¸€äº›åŸºç¡€è¯­æ³•</h2><h3 id="åŸºæœ¬æ•°æ®ç±»å‹åŠç®€å•æ“ä½œ"><a href="#åŸºæœ¬æ•°æ®ç±»å‹åŠç®€å•æ“ä½œ" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹åŠç®€å•æ“ä½œ"></a>åŸºæœ¬æ•°æ®ç±»å‹åŠç®€å•æ“ä½œ</h3><table><thead><tr><th>ç±»å‹</th><th>ä½å®½åº¦</th></tr></thead><tbody><tr><td>Double</td><td>64</td></tr><tr><td>Float</td><td>32</td></tr><tr><td>Long</td><td>64</td></tr><tr><td>Int</td><td>32</td></tr><tr><td>Short</td><td>16</td></tr><tr><td>Byte</td><td>8</td></tr></tbody></table><h4 id="å­—ç¬¦å¸¸é‡"><a href="#å­—ç¬¦å¸¸é‡" class="headerlink" title="å­—ç¬¦å¸¸é‡"></a>å­—ç¬¦å¸¸é‡</h4><p>eg:</p><table><thead><tr><th>åè¿›åˆ¶ï¼š123</th></tr></thead><tbody><tr><td>é•¿æ•´å‹ä»¥å¤§å†™çš„ L ç»“å°¾ï¼š123L</td></tr><tr><td>16 è¿›åˆ¶ä»¥ 0x å¼€å¤´ï¼š0x0F</td></tr><tr><td>2 è¿›åˆ¶ä»¥ 0b å¼€å¤´ï¼š0b00001011</td></tr><tr><td>æ³¨æ„ï¼š8è¿›åˆ¶ä¸æ”¯æŒ</td></tr><tr><td>Doubles é»˜è®¤å†™æ³•: 123.5, 123.5e10</td></tr><tr><td>Floats ä½¿ç”¨ f æˆ–è€… F åç¼€ï¼š123.5f</td></tr></tbody></table><h4 id="é€šç”¨ç±»å‹è½¬åŒ–"><a href="#é€šç”¨ç±»å‹è½¬åŒ–" class="headerlink" title="é€šç”¨ç±»å‹è½¬åŒ–"></a>é€šç”¨ç±»å‹è½¬åŒ–</h4><table><thead><tr><th>toByte(): Byte</th></tr></thead><tbody><tr><td>toShort(): Short</td></tr><tr><td>toInt(): Int</td></tr><tr><td>toLong(): Long</td></tr><tr><td>toFloat(): Float</td></tr><tr><td>toDouble(): Double</td></tr><tr><td>toChar(): Char</td></tr></tbody></table><h4 id="ä½æ“ä½œç¬¦ï¼ˆè¿™ä¸ªæ„Ÿè§‰ç”¨çš„å°‘"><a href="#ä½æ“ä½œç¬¦ï¼ˆè¿™ä¸ªæ„Ÿè§‰ç”¨çš„å°‘" class="headerlink" title="ä½æ“ä½œç¬¦ï¼ˆè¿™ä¸ªæ„Ÿè§‰ç”¨çš„å°‘"></a>ä½æ“ä½œç¬¦ï¼ˆè¿™ä¸ªæ„Ÿè§‰ç”¨çš„å°‘</h4><table><thead><tr><th>shl(bits) â€“ å·¦ç§»ä½ (Javaâ€™s &lt;&lt;)</th></tr></thead><tbody><tr><td>shr(bits) â€“ å³ç§»ä½ (Javaâ€™s &gt;&gt;)</td></tr><tr><td>ushr(bits) â€“ æ— ç¬¦å·å³ç§»ä½ (Javaâ€™s &gt;&gt;&gt;)</td></tr><tr><td>and(bits) â€“ ä¸</td></tr><tr><td>or(bits) â€“ æˆ–</td></tr><tr><td>xor(bits) â€“ å¼‚æˆ–</td></tr><tr><td>inv() â€“ åå‘</td></tr></tbody></table><h4 id="å­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼Œå­—ç¬¦ï¼Œæ•°ç»„"><a href="#å­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼Œå­—ç¬¦ï¼Œæ•°ç»„" class="headerlink" title="å­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼Œå­—ç¬¦ï¼Œæ•°ç»„"></a>å­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼Œå­—ç¬¦ï¼Œæ•°ç»„</h4><p>å­—ç¬¦ä¸å¯å½“ä½œæ•°å­—æ“ä½œï¼Œ</p><p>å¸ƒå°”æ“ä½œä¸javaç›¸åŒï¼ˆ||,!,&amp;&amp;)ï¼Œ</p><p>æ•°ç»„é€šè¿‡å†…ç½®çš„Arrayç±»å®ç°ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> a = arrayOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-keyword">val</span> b = Array(<span class="hljs-number">3</span>, &#123; i -&gt; (i * <span class="hljs-number">2</span>) &#125;)<br><span class="hljs-comment">//æœ‰ç‚¹pythonåˆ—è¡¨è¡¨è¾¾å¼çš„æ„Ÿè§‰</span><br></code></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡trimMargin()æ¥å»æ‰å¤šä½™ç©ºç™½</p><p>å¯ä»¥é€šè¿‡â€$â€æ¥å°†å˜é‡æ•´è¿›å­—ç¬¦ä¸²ä¸­</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> a = <span class="hljs-number">1</span><br><span class="hljs-keyword">val</span> s = <span class="hljs-string">&quot;1 = <span class="hljs-variable">$a</span>&quot;</span><br></code></pre></td></tr></table></figure><h2 id="åŒ…ã®å¯¼å…¥"><a href="#åŒ…ã®å¯¼å…¥" class="headerlink" title="åŒ…ã®å¯¼å…¥"></a>åŒ…ã®å¯¼å…¥</h2><h5 id="kotlinä½¿ç”¨import-æ¥å¯¼å…¥åŒ…ï¼Œå¯¼å…¥æ–¹å¼ä¸pythonç›¸ä¼¼"><a href="#kotlinä½¿ç”¨import-æ¥å¯¼å…¥åŒ…ï¼Œå¯¼å…¥æ–¹å¼ä¸pythonç›¸ä¼¼" class="headerlink" title="kotlinä½¿ç”¨import æ¥å¯¼å…¥åŒ…ï¼Œå¯¼å…¥æ–¹å¼ä¸pythonç›¸ä¼¼"></a>kotlinä½¿ç”¨import æ¥å¯¼å…¥åŒ…ï¼Œå¯¼å…¥æ–¹å¼ä¸pythonç›¸ä¼¼</h5><p>eg:</p><table><thead><tr><th>import org.example.Message                                                       // ç°åœ¨ Message å¯ä»¥ä¸ç”¨é™å®šç¬¦è®¿é—®</th></tr></thead><tbody><tr><td>import org.example.* // â€œorg.exampleâ€ä¸­çš„ä¸€åˆ‡éƒ½å¯è®¿é—®</td></tr><tr><td>import org.example.Message // Message å¯è®¿é—®<br>import org.test.Message as testMessage                                             // testMessage ä»£è¡¨â€œorg.test.Messageâ€</td></tr></tbody></table><h2 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h2><h3 id="if-è¡¨è¾¾å¼"><a href="#if-è¡¨è¾¾å¼" class="headerlink" title="if è¡¨è¾¾å¼"></a>if è¡¨è¾¾å¼</h3><p>åœ¨kotlinä¸­ ifè¡¨è¾¾å¼æœ‰è¿”å›å€¼ï¼Œå› æ­¤ä¸ä¼ ç»Ÿè¯­è¨€ç›¸æ¯”ï¼Œå¸¦æ¥äº†ä¸å°‘ä¾¿æ·</p><p>æ¯”å¦‚åœ¨javaä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">int</span> max ;<br><span class="hljs-keyword">int</span> b = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">int</span> d = <span class="hljs-number">6</span>;<br><span class="hljs-keyword">if</span> (b&gt;d) &#123;<br>    max  = b;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    max = d;<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œåœ¨kotlinä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> max = <span class="hljs-keyword">if</span>(a&gt;b) a <span class="hljs-keyword">else</span> b<br></code></pre></td></tr></table></figure><p>å¹¶ä¸”ä»£ç å—çš„æœ€åä¸€ä¸ªè¯­å¥å°†ä½œä¸ºè¿”å›å€¼</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> max = <span class="hljs-keyword">if</span> (a &gt; b) &#123;<br>    print(<span class="hljs-string">&quot;a&quot;</span>)<br>    a<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    print(<span class="hljs-string">&quot;b&quot;</span>)<br>    b<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="whenè¡¨è¾¾å¼"><a href="#whenè¡¨è¾¾å¼" class="headerlink" title="whenè¡¨è¾¾å¼"></a>whenè¡¨è¾¾å¼</h3><p>kotlinå–æ¶ˆæ‰äº†switch caseè¯­æ³•ç»“æ„ï¼Œä½¿ç”¨äº†whenæ¥å®ç°äº†ç›¸åº”åŠŸèƒ½</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">when</span> (x) &#123;<br>    <span class="hljs-number">1</span> -&gt; print(<span class="hljs-string">&quot;x == 1&quot;</span>)<br>    <span class="hljs-number">2</span> -&gt; print(<span class="hljs-string">&quot;x == 2&quot;</span>)<br>    <span class="hljs-keyword">else</span> -&gt; &#123; <span class="hljs-comment">// æ³¨æ„è¿™ä¸ªå—</span><br>        print(<span class="hljs-string">&quot;x is neither 1 nor 2&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¹¶ä¸”ï¼Œå¯å¯¹å¤šä¸ªç›®æ ‡è¿›è¡ŒåŒ¹é…ï¼Œå¦‚:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">when</span> (x) &#123;<br>    <span class="hljs-number">0</span>, <span class="hljs-number">1</span> -&gt; print(<span class="hljs-string">&quot;x == 0 or x == 1&quot;</span>)<br>    <span class="hljs-keyword">else</span> -&gt; print(<span class="hljs-string">&quot;otherwise&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>whenè¯­å¥å°†å¯¹ â€œ()â€ é‡Œé¢çš„å†…å®¹è¿›è¡ŒåŒ¹é…ï¼Œæ­¤å†…å®¹ä½œä¸ºä¸»è¯­ï¼Œåœ¨ä»£ç å—ä¸­å¯å¯¹æ­¤è¿›è¡ŒåŒ¹é…æ“ä½œ(ä¸é™åˆ¶ä¸å¸¸é‡)</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">when</span> (x) &#123;<br>    <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.10</span> -&gt; print(<span class="hljs-string">&quot;x is in the range&quot;</span>)<br>    <span class="hljs-keyword">is</span> String -&gt; print(<span class="hljs-string">&quot;x is String&quot;</span>)<span class="hljs-comment">//ç±»å‹åŒ¹é…</span><br>    <span class="hljs-keyword">else</span> -&gt; print(<span class="hljs-string">&quot;none of the above&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“whenæœªåŠ ä¸»è¯­æ—¶ï¼Œå¯ç±»ä¼¼ç”¨åšif else è¯­å¥</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">when</span> &#123;<br>    x.isOdd() -&gt; print(<span class="hljs-string">&quot;x is odd&quot;</span>)<br>    y.isEven() -&gt; print(<span class="hljs-string">&quot;y is even&quot;</span>)<br>    <span class="hljs-keyword">else</span> -&gt; print(<span class="hljs-string">&quot;x+y is odd.&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><p>kotlinä¸­forå¾ªç¯å¯ä»¥å¯¹ä»»ä½•æä¾›è¿­ä»£å™¨ï¼ˆiteratorï¼‰çš„å¯¹è±¡è¿›è¡Œéå†ï¼Œä¾‹å¦‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> collection) print(item)<br></code></pre></td></tr></table></figure><p>å¾ªç¯ä½“åŒæ ·ä¹Ÿé€‚ç”¨äºä»£ç å—</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">for</span>(item :<span class="hljs-built_in">Int</span> <span class="hljs-keyword">in</span> collection)&#123;<br>    <span class="hljs-keyword">val</span> temp = <span class="hljs-number">1</span><br>    print(item+temp)<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹æ•°å­—åŒºé—´çš„è¿­ä»£</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) &#123;<br>    println(i)<br>&#125;<br><span class="hljs-comment">//ä»1åˆ°3</span><br><span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">6</span> downTo <span class="hljs-number">0</span> step <span class="hljs-number">2</span>) &#123;<br>    println(i)<br>&#125;<br><span class="hljs-comment">//ä»6åˆ°0ä»¥2ä¸ºæ­¥é•¿</span><br></code></pre></td></tr></table></figure><h3 id="whileå¾ªç¯"><a href="#whileå¾ªç¯" class="headerlink" title="whileå¾ªç¯"></a>whileå¾ªç¯</h3><p>kotlinçš„whileå¾ªç¯ä¸cç­‰ç±»ä¼¼æ‹¥æœ‰whileä¸do while</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">while</span> (x &gt; <span class="hljs-number">0</span>) &#123;<br>    x--<br>&#125;<br><span class="hljs-comment">//-----------</span><br><span class="hljs-keyword">var</span> x =<span class="hljs-number">10</span><br><span class="hljs-keyword">do</span> &#123;<br>  x--<br>&#125; <span class="hljs-keyword">while</span> (x !=<span class="hljs-number">0</span>) <br></code></pre></td></tr></table></figure><p>breakä¸continueä»ç„¶é€‚ç”¨</p><h3 id="è¿”å›ä¸è·³è½¬"><a href="#è¿”å›ä¸è·³è½¬" class="headerlink" title="è¿”å›ä¸è·³è½¬"></a>è¿”å›ä¸è·³è½¬</h3><h4 id="ç»“æ„åŒ–è·³è½¬è¡¨è¾¾å¼åŠæ ‡ç­¾"><a href="#ç»“æ„åŒ–è·³è½¬è¡¨è¾¾å¼åŠæ ‡ç­¾" class="headerlink" title="ç»“æ„åŒ–è·³è½¬è¡¨è¾¾å¼åŠæ ‡ç­¾"></a>ç»“æ„åŒ–è·³è½¬è¡¨è¾¾å¼åŠæ ‡ç­¾</h4><p>kotlinæœ‰ä¸‰ç§ç»“æ„åŒ–è·³è½¬è¡¨è¾¾å¼ï¼š</p><table><thead><tr><th>returnã€‚é»˜è®¤ä»æœ€ç›´æ¥åŒ…å›´å®ƒçš„å‡½æ•°æˆ–è€…åŒ¿åå‡½æ•°è¿”å›ã€‚</th></tr></thead><tbody><tr><td>breakã€‚ç»ˆæ­¢æœ€ç›´æ¥åŒ…å›´å®ƒçš„å¾ªç¯</td></tr><tr><td>continueã€‚ç»§ç»­ä¸‹ä¸€æ¬¡æœ€ç›´æ¥åŒ…å›´å®ƒçš„å¾ªç¯ã€‚</td></tr></tbody></table><p>æ­¤å¤–ï¼Œè¿™ä¸‰ç§è¡¨è¾¾å¼éƒ½å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥è¿›è¡Œæ ‡è®°ï¼Œæ ‡ç­¾æ ¼å¼ä¸º<em>abc@</em></p><p>eg:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-symbol">loop@</span> <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.100</span>) &#123;<br>    <span class="hljs-keyword">for</span> (j <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.100</span>) &#123;<br>        <span class="hljs-keyword">if</span> (i+j==<span class="hljs-number">100</span>&amp;&amp;<span class="hljs-number">2</span>*i+3j==<span class="hljs-number">100</span>)&#123;<br>             <span class="hljs-keyword">break</span><span class="hljs-symbol">@loop</span><br>        &#125;       <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ ‡ç­¾é™åˆ¶çš„ break è·³è½¬åˆ°åˆšå¥½ä½äºè¯¥æ ‡ç­¾æŒ‡å®šçš„å¾ªç¯åé¢çš„æ‰§è¡Œç‚¹ã€‚ <em>continue</em> ç»§ç»­æ ‡ç­¾æŒ‡å®šçš„å¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚</strong></p><h4 id="æ ‡ç­¾çš„å¸¸ç”¨æ“ä½œ"><a href="#æ ‡ç­¾çš„å¸¸ç”¨æ“ä½œ" class="headerlink" title="æ ‡ç­¾çš„å¸¸ç”¨æ“ä½œ"></a>æ ‡ç­¾çš„å¸¸ç”¨æ“ä½œ</h4><p>ç”±äºkotlinå‡½æ•°å¯ä»¥åµŒå¥—ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å¤„ç†ä¸€äº›è·³è½¬æ—¶ï¼Œæ¯”å¦‚ä»åŒ¿åå‡½æ•°ä¸­é€€å‡º</p><p>å‡å¦‚æ˜¯è¿™æ ·</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123;<br>    listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>).forEach &#123;<br>        <span class="hljs-keyword">if</span> (it == <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span><span class="hljs-comment">// éå±€éƒ¨ç›´æ¥è¿”å›åˆ° foo() çš„è°ƒç”¨è€…</span><br>        print(it)<br>    &#125;<br>    print(<span class="hljs-string">&quot;end of all&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºreturn å°†é€€å‡ºå‡½æ•°ï¼Œå› æ­¤å®ƒå°†ä¼šé€€å‡ºæ•´ä¸ªå‡½æ•°</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123;<br>    listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>).forEach(<span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">(it: <span class="hljs-type">Int</span>)</span></span> &#123;<br>        <span class="hljs-keyword">if</span> (it == <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span><span class="hljs-comment">// å±€éƒ¨è¿”å›åˆ°åŒ¿åå‡½æ•°çš„è°ƒç”¨è€…ï¼Œå³ forEach å¾ªç¯</span><br>        print(it)<br>    &#125;)<br>    print(<span class="hljs-string">&quot;end of all&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†ä¹Ÿå¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥å¤„ç†</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123;<br>    listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>).forEach <span class="hljs-symbol">lit@</span>&#123;<br>        <span class="hljs-keyword">if</span> (it == <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span><span class="hljs-symbol">@lit</span> <span class="hljs-comment">// å±€éƒ¨è¿”å›åˆ°è¯¥ lambda è¡¨è¾¾å¼çš„è°ƒç”¨è€…ï¼Œå³ forEach å¾ªç¯</span><br>        print(it)<br>    &#125;<br>    print(<span class="hljs-string">&quot;end of all&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ‡ç­¾ä¹Ÿå¯ä»¥è¿”å›å€¼åˆ°æŒ‡å®šä½ç½®</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">return</span><span class="hljs-symbol">@a</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>ä»–å°†è¿”å›1åˆ°â€@aâ€</p><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><h3 id="ç±»çš„åŸºæœ¬"><a href="#ç±»çš„åŸºæœ¬" class="headerlink" title="ç±»çš„åŸºæœ¬"></a>ç±»çš„åŸºæœ¬</h3><p>kotlinä½¿ç”¨classæ¥å£°æ˜ç±»</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>()&#123;<br>    .....<br>&#125;<br><span class="hljs-comment">//è‹¥æ— å®ä½“è¿˜å¯ä»¥è¿™æ ·å†™</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span><br></code></pre></td></tr></table></figure><p>kotlinçš„ç±»æ„é€ å™¨åˆ†ä¸ºä¸»æ„é€ å™¨å’Œå¤šä¸ªæ¬¡æ„é€ å™¨</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">constructor</span></span>(name:String)&#123;<br>    .....<br>&#125;<br></code></pre></td></tr></table></figure><p>è‹¥æ— éœ€ä¸ºæ·»åŠ æ³¨é‡Šæˆ–ä¿®é¥°ç¬¦ï¼Œå¯ä»¥çœç•¥</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>(name:String)&#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»æ„é€ å‡½æ•°ä¸èƒ½åŒ…å«ä»»ä½•çš„ä»£ç ï¼Œåˆå§‹åŒ–å·¥ä½œå¯ä»¥æ”¾åœ¨initçš„ä»£ç å—ä¸­</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>(name:String)&#123;<br>    <span class="hljs-keyword">var</span> nameUpper :String =<span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">init</span> &#123;<br>        nameUpper = name.uppercase()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å£°æ˜æˆ–åˆå§‹åŒ–å±æ€§è¿˜å¯ä»¥è¿™ä¹ˆå†™</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>(<span class="hljs-keyword">val</span> name:String)&#123;<br>    ....<br>&#125;<br></code></pre></td></tr></table></figure><p>ç±»ä¹Ÿå¯ä»¥å£°æ˜å‰ç¼€æœ‰constructorçš„æ¬¡æ„é€ å‡½æ•°ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span></span>&#123;<br>    <span class="hljs-keyword">var</span> nameUpper :String =<span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">constructor</span>(name:String)&#123;<br>        nameUpper=name.uppercase()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>initä»£ç å—éƒ¨åˆ†ä¼šæˆä¸»æ„é€ å‡½æ•°çš„ä¸€éƒ¨åˆ†ï¼Œå°†åœ¨æ¬¡æ„é€ å‡½æ•°å‰æ‰§è¡Œ</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Constructors</span> </span>&#123;<br>    <span class="hljs-keyword">init</span> &#123;<br>        println(<span class="hljs-string">&quot;Init block&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">constructor</span>(i: <span class="hljs-built_in">Int</span>) &#123;<br>        println(<span class="hljs-string">&quot;Constructor&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœªå£°æ˜æ„é€ å‡½æ•°æ—¶ï¼Œä»–å°†éšå¼çš„ç”Ÿæˆä¸”å¯è§æ€§æ˜¯publicå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠä»–privateæ‰</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GirlFriend</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span></span>()&#123;<br>    .....<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»æ„é€ å‡½æ•°å¯ä»¥è®¾ç½®é»˜è®¤å€¼</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>(<span class="hljs-keyword">val</span> specices :String =<span class="hljs-string">&quot;human being&quot;</span>)<br></code></pre></td></tr></table></figure><p>kotlinä¸­æ— <code>new</code>å…³é”®å­—</p><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>kotlinçš„æ‰€æœ‰ç±»æ‹¥æœ‰ä¸€ä¸ªå…±åŒçš„è¶…ç±»Any </p><p><code>Any</code> æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š<code>equals()</code>ã€ <code>hashCode()</code> ä¸ <code>toString()</code>ã€‚å› æ­¤ï¼Œä¸ºæ‰€æœ‰ Kotlin ç±»éƒ½å®šä¹‰äº†è¿™äº›æ–¹æ³•ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹kotlinçš„ç±»æ˜¯<code>final</code>çš„ï¼Œå› æ­¤ä¸å¯è¢«ç»§æ‰¿ï¼Œè‹¥è¦ä½¿ä»–èƒ½è¢«ç»§æ‰¿ï¼Œåˆ™éœ€è¦æ·»åŠ <code>open</code>å…³é”®å­—</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">open</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>(name:String)<br></code></pre></td></tr></table></figure><p>è‹¥éœ€è¦ç»§æ‰¿æ­¤ç±»ï¼Œåˆ™å¯è¿™æ ·è¡¨è¾¾</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Chinese</span> </span>(name:String):Person(name)<br></code></pre></td></tr></table></figure><p>å¯¹äºç»§æ‰¿åçš„å±æ€§ï¼Œä»¥ä¸‹é¢çš„è¿™ä¸ªä¾‹å­æ¥è¯´</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">open</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>(name:String)&#123;<br>    <span class="hljs-keyword">open</span> <span class="hljs-keyword">var</span> nameUpper :String =<span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">open</span> <span class="hljs-keyword">var</span> age:<span class="hljs-built_in">Int</span>=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">init</span> &#123;<br>        nameUpper = name.uppercase()<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span>:<span class="hljs-type">Person&#123;</span></span><br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> nameUpper :String =<span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> age:<span class="hljs-built_in">Int</span>=<span class="hljs-number">2</span><br>    <span class="hljs-keyword">constructor</span>(name:String):<span class="hljs-keyword">super</span>(name)&#123;<br>        nameUpper=name.uppercase()<br>    &#125;<br>    <span class="hljs-comment">//æ¬¡æ„é€ å‡½æ•°å¯ä»¥å†™å¤šä¸ªç»§æ‰¿ä¸åŒå±æ€§</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹äºçˆ¶ç±»éœ€è¦è¢«è¦†ç›–å±æ€§ï¼Œéœ€è¦å£°æ˜ä¸º<code>open</code>,ç„¶ååœ¨å­ç±»ä¸­æ·»åŠ <code>override</code>æ¥è¿›è¡Œæ ‡è®°ï¼Œè‹¥æ­¤å­ç±»çš„å±æ€§ä¸å¸Œæœ›è¢«è¦†ç›–æ‰ï¼Œåˆ™å¯ä»¥æ·»åŠ <code>final</code>å…³é”®å­—ï¼Œä¾‹å¦‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">final</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> age:<span class="hljs-built_in">Int</span> = <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>æ–¹æ³•ä¹Ÿæ˜¯åŒæ ·çš„</p><p>è‹¥æˆ‘ä»¬å¸Œæœ›å­ç±»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>super</code>å…³é”®å­—æ¥è¿›è¡Œè°ƒç”¨ï¼Œ</p><p>[^ä½¿ç”¨super<T>æ¥è°ƒç”¨å…·ä½“çš„å±æ€§æˆ–æ–¹æ³•]: </T></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Fruit</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">eat</span><span class="hljs-params">()</span></span>&#123;<br>        println(<span class="hljs-string">&quot;this fruit is being ate&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-keyword">open</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Orange</span></span>&#123;<br>    <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">eat</span><span class="hljs-params">()</span></span>&#123;<br>        println(<span class="hljs-string">&quot;this orange is being ate&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Lemon</span>: <span class="hljs-type">Fruit</span>,<span class="hljs-type">Orange</span></span>() &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">eat</span><span class="hljs-params">()</span></span> &#123;<br>        <span class="hljs-keyword">super</span>&lt;Fruit&gt;.eat()<br>        <span class="hljs-keyword">super</span>&lt;Orange&gt;.eat()<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¼´ç”Ÿå¯¹è±¡companion-object"><a href="#ä¼´ç”Ÿå¯¹è±¡companion-object" class="headerlink" title="ä¼´ç”Ÿå¯¹è±¡companion object"></a>ä¼´ç”Ÿå¯¹è±¡companion object</h3><p><code>companion object</code> ä¿®é¥°ä¸ºä¼´ç”Ÿå¯¹è±¡,ä¼´ç”Ÿå¯¹è±¡åœ¨ç±»ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªï¼Œç±»ä¼¼äºjavaä¸­çš„é™æ€æ–¹æ³• Java ä¸­ä½¿ç”¨ç±»è®¿é—®é™æ€æˆå‘˜ï¼Œé™æ€æ–¹æ³•ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> TAG = <span class="hljs-string">&quot;DemoManager&quot;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">b</span><span class="hljs-params">()</span></span> &#123;<br>        Log.e(TAG,<span class="hljs-string">&quot;æ­¤æ—¶ companion objec tè¡¨ç¤º ä¼´ç”Ÿå¯¹è±¡&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å› æ­¤<code>companion object</code>ä¸­è°ƒç”¨ä¸åˆ°å¤–éƒ¨æˆå‘˜å˜é‡ï¼ˆé™æ€æ–¹æ³•æ— æ³•è°ƒç”¨éé™æ€æˆå‘˜å˜é‡ï¼‰</p><h3 id="Kotlinä¸­çš„å„ç§ç±»"><a href="#Kotlinä¸­çš„å„ç§ç±»" class="headerlink" title="Kotlinä¸­çš„å„ç§ç±»"></a>Kotlinä¸­çš„å„ç§ç±»</h3><h4 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h4><p>æŠ½è±¡ç±»ä½¿ç”¨<code>abstract</code>æ¥æ ‡è®°æŠ½è±¡ç±»</p><p>ç±»ä»¥åŠå…¶ä¸­çš„æŸäº›æˆå‘˜å¯ä»¥å£°æ˜ä¸º <em>abstract</em>ã€‚ æŠ½è±¡æˆå‘˜åœ¨æœ¬ç±»ä¸­å¯ä»¥ä¸ç”¨å®ç°</p><p>ä½¿ç”¨æŠ½è±¡ç±»æ¥è¦†ç›–ä¸€ä¸ªéæŠ½è±¡çš„å¼€æ”¾æˆå‘˜</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">open</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Polygon</span> </span>&#123;<br>    <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span></span> &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> : <span class="hljs-type">Polygon</span></span>() &#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span></span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ•°æ®ç±»"><a href="#æ•°æ®ç±»" class="headerlink" title="æ•°æ®ç±»"></a>æ•°æ®ç±»</h4><p>kotlinä½¿ç”¨<code>data</code>æ¥æ ‡è®°æ•°æ®ç±»ï¼Œåœ¨java16(æœ€æ–°çš„jvav16ä¸­ä½¿ç”¨äº†<code>record</code>å…³é”®å­—æ¥å®ç°äº†æ­¤åŠŸèƒ½)å‰ï¼Œæˆ‘ä»¬å®ç°æ•°æ®ç±»åŠŸèƒ½å¯èƒ½éœ€è¦è¿™æ ·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAge</span><span class="hljs-params">(<span class="hljs-keyword">int</span> age)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        Person person = (Person) o;<br>        <span class="hljs-keyword">return</span> age == person.age &amp;&amp;<br>                Objects.equals(name, person.name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>&#123;<br><br>        <span class="hljs-keyword">return</span> Objects.hash(name, age);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Person&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è€Œä½¿ç”¨kotlinæ•°æ®ç±»ï¼Œå¯ä»¥è¿™æ ·</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>(<span class="hljs-keyword">var</span> name :String, <span class="hljs-keyword">var</span> age :<span class="hljs-built_in">Int</span>)<br></code></pre></td></tr></table></figure><h5 id="æ•°æ®ç±»è‡ªå¸¦è§£æ„æ–¹æ³•â€”â€”componentN"><a href="#æ•°æ®ç±»è‡ªå¸¦è§£æ„æ–¹æ³•â€”â€”componentN" class="headerlink" title="æ•°æ®ç±»è‡ªå¸¦è§£æ„æ–¹æ³•â€”â€”componentN()"></a>æ•°æ®ç±»è‡ªå¸¦è§£æ„æ–¹æ³•â€”â€”componentN()</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">var</span> (name,age) = p  <span class="hljs-comment">//è§£æ„p</span><br>println(<span class="hljs-string">&quot;<span class="hljs-variable">$name</span> <span class="hljs-variable">$age</span>&quot;</span>)<br></code></pre></td></tr></table></figure><h5 id="æ•°æ®ç±»çš„copyå‡½æ•°"><a href="#æ•°æ®ç±»çš„copyå‡½æ•°" class="headerlink" title="æ•°æ®ç±»çš„copyå‡½æ•°"></a>æ•°æ®ç±»çš„copyå‡½æ•°</h5><p>æ•°æ®ç±»ä½¿ç”¨copyå‡½æ•°æ¥å¯¹æ•°æ®ç±»è¿›è¡Œå¤åˆ¶ï¼Œå¹¶ä¸”å¯å¯¹å…¶å±æ€§è¿›è¡Œä¿®æ”¹</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">(args: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> &#123;<br>    <span class="hljs-keyword">val</span> jack = User(name = <span class="hljs-string">&quot;Jack&quot;</span>, age = <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">val</span> olderJack = jack.copy(age = <span class="hljs-number">2</span>)<br>    println(jack)<br>    println(olderJack)<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å•ä¾‹ç±»"><a href="#å•ä¾‹ç±»" class="headerlink" title="å•ä¾‹ç±»"></a>å•ä¾‹ç±»</h4><p>kotlinä¸­å¯ä»¥ä½¿ç”¨objectæ¥å£°æ˜å•ä¾‹ç±»</p><p>javaä¸­å¯ä»¥è¿™ä¹ˆå†™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleSington</span> </span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SimpleSington INSTANCE;<br> <br>   <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SimpleSington</span><span class="hljs-params">()</span> </span>&#123;<br>      INSTANCE = (SimpleSington)<span class="hljs-keyword">this</span>;<br>   &#125;<br> <br>   <span class="hljs-keyword">static</span> &#123;<br>      <span class="hljs-keyword">new</span> SimpleSington();<br>   &#125;<br>&#125;<br> <br></code></pre></td></tr></table></figure><p>åœ¨kotlinä¸­å¯ä»¥è¿™ä¹ˆå†™</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">object</span> SimpleSington &#123;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æšä¸¾ç±»"><a href="#æšä¸¾ç±»" class="headerlink" title="æšä¸¾ç±»"></a>æšä¸¾ç±»</h4><p>kotlinä¸­ä½¿ç”¨<code>enum</code>å…³é”®å­—æ¥æ ‡è®°ä¸€ä¸ªæšä¸¾ç±»</p><p>æšä¸¾ç±»æœ€åŸºæœ¬çš„ç”¨æ³•æ˜¯å®ç°ä¸€ä¸ªç±»å‹å®‰å…¨çš„æšä¸¾ã€‚</p><p>æšä¸¾å¸¸é‡ç”¨é€—å·åˆ†éš”,æ¯ä¸ªæšä¸¾å¸¸é‡éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Color</span></span>&#123;<br>    RED,BLACK,BLUE,GREEN,WHITE<br>&#125;<br></code></pre></td></tr></table></figure><p>æšä¸¾ç±»å¯ä»¥è¿›è¡Œåˆå§‹åŒ–ï¼Œé»˜è®¤å€¼ä»0å¼€å§‹ï¼Œéœ€è¦æŒ‡å®šå€¼ï¼Œåˆ™å¯ä»¥å¯¹å…¶ä½¿ç”¨æ„é€ å‡½æ•°</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span></span>(value:<span class="hljs-built_in">Int</span>)&#123;<br>    ovel(<span class="hljs-number">100</span>),<br>    rectangle(<span class="hljs-number">200</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¯†å°ç±»"><a href="#å¯†å°ç±»" class="headerlink" title="å¯†å°ç±»"></a>å¯†å°ç±»</h4><p>kotlinä¸­ä½¿ç”¨sealedæ¥æ ‡è®°ä¸€ä¸ªå¯†å°ç±»</p><p>å¯†å°ç±»ç”¨æ¥è¡¨ç¤ºå—é™çš„ç±»ç»§æ‰¿ç»“æ„ï¼šå½“ä¸€ä¸ªå€¼ä¸ºæœ‰é™å‡ ç§çš„ç±»å‹, è€Œä¸èƒ½æœ‰ä»»ä½•å…¶ä»–ç±»å‹æ—¶ã€‚åœ¨æŸç§æ„ä¹‰ä¸Šï¼Œä»–ä»¬æ˜¯æšä¸¾ç±»çš„æ‰©å±•ï¼šæšä¸¾ç±»å‹çš„å€¼é›†åˆ ä¹Ÿæ˜¯å—é™çš„ï¼Œä½†æ¯ä¸ªæšä¸¾å¸¸é‡åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œè€Œå¯†å°ç±» çš„ä¸€ä¸ªå­ç±»å¯ä»¥æœ‰å¯åŒ…å«çŠ¶æ€çš„å¤šä¸ªå®ä¾‹ã€‚</p><p>å£°æ˜ä¸€ä¸ªå¯†å°ç±»ï¼Œä½¿ç”¨ <strong>sealed</strong> ä¿®é¥°ç±»ï¼Œå¯†å°ç±»å¯ä»¥æœ‰å­ç±»ï¼Œä½†æ˜¯æ‰€æœ‰å­ç±»éƒ½å¿…é¡»åœ¨ä¸å¯†å°ç±»è‡ªèº«ç›¸åŒçš„æ–‡ä»¶ä¸­å£°æ˜ã€‚ï¼ˆåœ¨ Kotlin 1.1 ä¹‹å‰ï¼Œ è¯¥è§„åˆ™æ›´åŠ ä¸¥æ ¼ï¼šå­ç±»å¿…é¡»åµŒå¥—åœ¨å¯†å°ç±»å£°æ˜çš„å†…éƒ¨ï¼‰ã€‚</p><p>å¯†å°ç±»çš„å¸¸ç”¨æ“ä½œï¼š</p><p>é…åˆwhenæ¥ä½¿ç”¨</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Expr</span></span><br><span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Const</span></span>(<span class="hljs-keyword">val</span> number: <span class="hljs-built_in">Double</span>) : Expr()<br><span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sum</span></span>(<span class="hljs-keyword">val</span> e1: Expr, <span class="hljs-keyword">val</span> e2: Expr) : Expr()<br><span class="hljs-keyword">object</span> NotANumber : Expr()<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">eval</span><span class="hljs-params">(expr: <span class="hljs-type">Expr</span>)</span></span>: <span class="hljs-built_in">Double</span> = <span class="hljs-keyword">when</span> (expr) &#123;<br>    <span class="hljs-keyword">is</span> Const -&gt; expr.number<br>    <span class="hljs-keyword">is</span> Sum -&gt; eval(expr.e1) + eval(expr.e2)<br>    NotANumber -&gt; <span class="hljs-built_in">Double</span>.NaN<br>&#125;<br></code></pre></td></tr></table></figure><p>æ›´åƒæ˜¯ä¸€ç§æšä¸¾ç±»çš„æ‰©å±•</p><h3 id="å§”æ‰˜"><a href="#å§”æ‰˜" class="headerlink" title="å§”æ‰˜"></a>å§”æ‰˜</h3><p>kotlinä¸­å§”æ‰˜åˆ†ä¸ºäº†å±æ€§å§”æ‰˜å’Œç±»å§”æ‰˜ä¸¤ç§</p><h4 id="å±æ€§å§”æ‰˜"><a href="#å±æ€§å§”æ‰˜" class="headerlink" title="å±æ€§å§”æ‰˜"></a>å±æ€§å§”æ‰˜</h4><p>å±æ€§å§”æ‰˜æŒ‡çš„æ˜¯ä¸€ä¸ªç±»çš„æŸä¸ªå±æ€§å€¼ä¸æ˜¯åœ¨ç±»ä¸­ç›´æ¥è¿›è¡Œå®šä¹‰ï¼Œè€Œæ˜¯å°†å…¶æ‰˜ä»˜ç»™ä¸€ä¸ªä»£ç†ç±»ï¼Œä»è€Œå®ç°å¯¹è¯¥ç±»çš„å±æ€§ç»Ÿä¸€ç®¡ç†ã€‚</p><p>å±æ€§å§”æ‰˜è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span>/<span class="hljs-keyword">var</span> &lt;å±æ€§å&gt;: &lt;ç±»å‹&gt; <span class="hljs-keyword">by</span> &lt;è¡¨è¾¾å¼&gt;<br></code></pre></td></tr></table></figure><table><thead><tr><th>var/valï¼šå±æ€§ç±»å‹(å¯å˜/åªè¯»)</th></tr></thead><tbody><tr><td>å±æ€§åï¼šå±æ€§åç§°</td></tr><tr><td>ç±»å‹ï¼šå±æ€§çš„æ•°æ®ç±»å‹</td></tr><tr><td>è¡¨è¾¾å¼ï¼šå§”æ‰˜ä»£ç†ç±»</td></tr></tbody></table><p>by å…³é”®å­—ä¹‹åçš„è¡¨è¾¾å¼å°±æ˜¯å§”æ‰˜, å±æ€§çš„ get() æ–¹æ³•(ä»¥åŠset() æ–¹æ³•)å°†è¢«å§”æ‰˜ç»™è¿™ä¸ªå¯¹è±¡çš„ getValue() å’Œ setValue() æ–¹æ³•ã€‚å±æ€§å§”æ‰˜ä¸å¿…å®ç°ä»»ä½•æ¥å£, ä½†å¿…é¡»æä¾› getValue() å‡½æ•°(å¯¹äº varå±æ€§,è¿˜éœ€è¦ setValue() å‡½æ•°)ã€‚</p><p>eg:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">import</span> kotlin.reflect.KProperty<br><span class="hljs-comment">// å®šä¹‰åŒ…å«å±æ€§å§”æ‰˜çš„ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span> </span>&#123;<br>    <span class="hljs-keyword">var</span> p: String <span class="hljs-keyword">by</span> Delegate()<br>&#125;<br><br><span class="hljs-comment">// å§”æ‰˜çš„ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Delegate</span> </span>&#123;<br>    <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>?, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: String &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-variable">$thisRef</span>, è¿™é‡Œå§”æ‰˜äº† <span class="hljs-subst">$&#123;property.name&#125;</span> å±æ€§&quot;</span><br>    &#125;<br><br>    <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>?, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">String</span>)</span></span> &#123;<br>        println(<span class="hljs-string">&quot;<span class="hljs-variable">$thisRef</span> çš„ <span class="hljs-subst">$&#123;property.name&#125;</span> å±æ€§èµ‹å€¼ä¸º <span class="hljs-variable">$value</span>&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">(args: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> &#123;<br>    <span class="hljs-keyword">val</span> e = Example()<br>    println(e.p)     <span class="hljs-comment">// è®¿é—®è¯¥å±æ€§ï¼Œè°ƒç”¨ getValue() å‡½æ•°</span><br><br>    e.p = <span class="hljs-string">&quot;Runoob&quot;</span>   <span class="hljs-comment">// è°ƒç”¨ setValue() å‡½æ•°</span><br>    println(e.p)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç±»å§”æ‰˜"><a href="#ç±»å§”æ‰˜" class="headerlink" title="ç±»å§”æ‰˜"></a>ç±»å§”æ‰˜</h4><p>ç±»çš„å§”æ‰˜å³ä¸€ä¸ªç±»ä¸­å®šä¹‰çš„æ–¹æ³•å®é™…æ˜¯è°ƒç”¨å¦ä¸€ä¸ªç±»çš„å¯¹è±¡çš„æ–¹æ³•æ¥å®ç°çš„ã€‚</p><p>ä»¥ä¸‹å®ä¾‹ä¸­æ´¾ç”Ÿç±» Derived ç»§æ‰¿äº†æ¥å£ Base æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”å§”æ‰˜ä¸€ä¸ªä¼ å…¥çš„ Base ç±»çš„å¯¹è±¡æ¥æ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// åˆ›å»ºæ¥å£</span><br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Base</span> </span>&#123;   <br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">print</span><span class="hljs-params">()</span></span><br>&#125;<br><br><span class="hljs-comment">// å®ç°æ­¤æ¥å£çš„è¢«å§”æ‰˜çš„ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseImpl</span></span>(<span class="hljs-keyword">val</span> x: <span class="hljs-built_in">Int</span>) : Base &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">print</span><span class="hljs-params">()</span></span> &#123; print(x) &#125;<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡å…³é”®å­— by å»ºç«‹å§”æ‰˜ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derived</span></span>(b: Base) : Base <span class="hljs-keyword">by</span> b<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">(args: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> &#123;<br>    <span class="hljs-keyword">val</span> b = BaseImpl(<span class="hljs-number">10</span>)<br>    Derived(b).print() <span class="hljs-comment">// è¾“å‡º 10</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨æŸä¸ªç±»å¯¹æŸä¸ªæ¥å£çš„ä¸€äº›æ–¹æ³•è¿›è¡Œé‡å†™ï¼Œé€šè¿‡ç±»å§”æ‰˜æ¥å‡å°‘å¼ºåˆ¶æˆ‘ä»¬éœ€è¦é‡å†™çš„æ–¹æ³•</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMap</span></span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> realMap: HashMap&lt;<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>&gt;) : MutableMap&lt;<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>&gt; <span class="hljs-keyword">by</span> realMap &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> lastKey = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">put</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>, value: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span>? &#123;<br>        lastKey = key<br>        <span class="hljs-keyword">return</span> realMap.put(key,value)<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recover</span><span class="hljs-params">()</span></span> &#123;<br>        realMap.remove(lastKey)<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>é€šè¿‡å°†MutableMapå§”æ‰˜ç»™realMapä½¿å¾—realMapè·å¾—å…¶æ‰€æœ‰æ–¹æ³•ï¼Œå› æ­¤åªéœ€å¯¹æˆ‘ä»¬æ‰€å…³å¿ƒçš„æ–¹æ³•è¿›è¡Œé‡å†™</p><p><a href="%5B(28%E6%9D%A1%E6%B6%88%E6%81%AF">æ›´å¤šå†…å®¹æŸ¥çœ‹</a> â€œbyâ€ the way â€”â€”å€ŸViewModelåˆ›å»ºæ–¹å¼æ¢ç´¢Kotlinçš„å§”æ‰˜æœºåˆ¶_Omnipotentâ€™s Blog-CSDNåšå®¢](<a href="https://blog.csdn.net/weixin_43687181/article/details/115712877?spm=1001.2014.3001.5501">https://blog.csdn.net/weixin_43687181/article/details/115712877?spm=1001.2014.3001.5501</a>))</p><p>å…³äºå§”æ‰˜è¿˜æœ‰ä¸å°‘ä¸œè¥¿è¦è¯´ï¼Œé‰´äºç¯‡å¹…ï¼Œæ›´å¤šå‚è€ƒ<a href="https://www.kotlincn.net/docs/reference/delegated-properties.html">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><h3 id="æ³›å‹ï¼Œå³-â€œå‚æ•°åŒ–ç±»å‹â€ï¼Œå°†ç±»å‹å‚æ•°åŒ–ï¼Œå¯ä»¥ç”¨åœ¨ç±»ï¼Œæ¥å£ï¼Œæ–¹æ³•ä¸Šã€‚"><a href="#æ³›å‹ï¼Œå³-â€œå‚æ•°åŒ–ç±»å‹â€ï¼Œå°†ç±»å‹å‚æ•°åŒ–ï¼Œå¯ä»¥ç”¨åœ¨ç±»ï¼Œæ¥å£ï¼Œæ–¹æ³•ä¸Šã€‚" class="headerlink" title="æ³›å‹ï¼Œå³ â€œå‚æ•°åŒ–ç±»å‹â€ï¼Œå°†ç±»å‹å‚æ•°åŒ–ï¼Œå¯ä»¥ç”¨åœ¨ç±»ï¼Œæ¥å£ï¼Œæ–¹æ³•ä¸Šã€‚"></a>æ³›å‹ï¼Œå³ â€œå‚æ•°åŒ–ç±»å‹â€ï¼Œå°†ç±»å‹å‚æ•°åŒ–ï¼Œå¯ä»¥ç”¨åœ¨ç±»ï¼Œæ¥å£ï¼Œæ–¹æ³•ä¸Šã€‚</h3><p>ä¸ Java ä¸€æ ·ï¼ŒKotlin ä¹Ÿæä¾›æ³›å‹ï¼Œä¸ºç±»å‹å®‰å…¨æä¾›ä¿è¯ï¼Œæ¶ˆé™¤ç±»å‹å¼ºè½¬çš„çƒ¦æ¼ã€‚</p><p>å£°æ˜ä¸€ä¸ªæ³›å‹ç±»:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span>&lt;<span class="hljs-type">T</span>&gt;</span>(t: T) &#123;<br>    <span class="hljs-keyword">var</span> value = t<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºç±»çš„å®ä¾‹æ—¶æˆ‘ä»¬éœ€è¦æŒ‡å®šç±»å‹å‚æ•°:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> box: Box&lt;<span class="hljs-built_in">Int</span>&gt; = Box&lt;<span class="hljs-built_in">Int</span>&gt;(<span class="hljs-number">1</span>)<br><span class="hljs-comment">// æˆ–è€…</span><br><span class="hljs-keyword">val</span> box = Box(<span class="hljs-number">1</span>) <span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»å‹æ¨æ–­ï¼Œ1 ç±»å‹ Intï¼Œæ‰€ä»¥ç¼–è¯‘å™¨çŸ¥é“æˆ‘ä»¬è¯´çš„æ˜¯ Box&lt;Int&gt;ã€‚</span><br></code></pre></td></tr></table></figure><h3 id="æ³›å‹çº¦æŸï¼š"><a href="#æ³›å‹çº¦æŸï¼š" class="headerlink" title="æ³›å‹çº¦æŸï¼š"></a>æ³›å‹çº¦æŸï¼š</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹çº¦æŸæ¥è®¾å®šä¸€ä¸ªç»™å®šå‚æ•°å…è®¸ä½¿ç”¨çš„ç±»å‹ã€‚</p><p>Kotlin ä¸­ä½¿ç”¨ : å¯¹æ³›å‹çš„ç±»å‹ä¸Šé™è¿›è¡Œçº¦æŸã€‚</p><p>æœ€å¸¸è§çš„çº¦æŸæ˜¯ä¸Šç•Œ(upper bound)ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : Comparable&lt;T&gt;</span>&gt; <span class="hljs-title">sort</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span> &#123;<br>    <span class="hljs-comment">// â€¦â€¦</span><br>&#125;<br><span class="hljs-comment">//Comparable çš„å­ç±»å‹å¯ä»¥æ›¿ä»£ Tã€‚ ä¾‹å¦‚:</span><br>sort(listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)) <span class="hljs-comment">// OKã€‚Int æ˜¯ Comparable&lt;Int&gt; çš„å­ç±»å‹</span><br>sort(listOf(HashMap&lt;<span class="hljs-built_in">Int</span>, String&gt;())) <span class="hljs-comment">// é”™è¯¯ï¼šHashMap&lt;Int, String&gt; ä¸æ˜¯ Comparable&lt;HashMap&lt;Int, String&gt;&gt; çš„å­ç±»å‹</span><br></code></pre></td></tr></table></figure><p>å¯¹äºå¤šä¸ªä¸Šç•Œçº¦æŸæ¡ä»¶ï¼Œå¯ä»¥ç”¨ where å­å¥ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">copyWhenGreater</span><span class="hljs-params">(list: <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;, threshold: <span class="hljs-type">T</span>)</span></span>: List&lt;String&gt;<br>    <span class="hljs-keyword">where</span> T : CharSequence,<br>          T : Comparable&lt;T&gt; &#123;<br>    <span class="hljs-keyword">return</span> list.filter &#123; it &gt; threshold &#125;.map &#123; it.toString() &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>rustä¹Ÿæ˜¯ç”¨çš„è¿™ç©æ„ä¿®é¥°çš„</p><h3 id="å‹å˜"><a href="#å‹å˜" class="headerlink" title="å‹å˜"></a>å‹å˜</h3><p>Kotlin ä¸­æ²¡æœ‰é€šé…ç¬¦ç±»å‹ï¼Œå®ƒæœ‰ä¸¤ä¸ªå…¶ä»–çš„ä¸œè¥¿ï¼šå£°æ˜å¤„å‹å˜ï¼ˆdeclaration-site varianceï¼‰ä¸ç±»å‹æŠ•å½±ï¼ˆtype projectionsï¼‰</p><h4 id="å£°æ˜å¤„å‹å˜"><a href="#å£°æ˜å¤„å‹å˜" class="headerlink" title="å£°æ˜å¤„å‹å˜"></a>å£°æ˜å¤„å‹å˜</h4><p>å£°æ˜å¤„çš„ç±»å‹å˜å¼‚ä½¿ç”¨åå˜æ³¨è§£ä¿®é¥°ç¬¦ï¼šinã€outï¼Œæ¶ˆè´¹è€… in, ç”Ÿäº§è€… outã€‚</p><p>ä½¿ç”¨ out ä½¿å¾—ä¸€ä¸ªç±»å‹å‚æ•°åå˜ï¼Œåå˜ç±»å‹å‚æ•°åªèƒ½ç”¨ä½œè¾“å‡ºï¼Œå¯ä»¥ä½œä¸ºè¿”å›å€¼ç±»å‹ä½†æ˜¯æ— æ³•ä½œä¸ºå…¥å‚çš„ç±»å‹ï¼š</p><p>in ä½¿å¾—ä¸€ä¸ªç±»å‹å‚æ•°é€†å˜ï¼Œé€†å˜ç±»å‹å‚æ•°åªèƒ½ç”¨ä½œè¾“å…¥ï¼Œå¯ä»¥ä½œä¸ºå…¥å‚çš„ç±»å‹ä½†æ˜¯æ— æ³•ä½œä¸ºè¿”å›å€¼çš„ç±»å‹ï¼š</p><h3 id="æ˜Ÿå·æŠ•å°„"><a href="#æ˜Ÿå·æŠ•å°„" class="headerlink" title="æ˜Ÿå·æŠ•å°„"></a>æ˜Ÿå·æŠ•å°„</h3><p><a href="https://www.kotlincn.net/docs/reference/generics.html">çœ‹çœ‹å®˜æ–¹çš„</a></p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="å‡½æ•°çš„åŸºç¡€æ“ä½œ"><a href="#å‡½æ•°çš„åŸºç¡€æ“ä½œ" class="headerlink" title="å‡½æ•°çš„åŸºç¡€æ“ä½œ"></a>å‡½æ•°çš„åŸºç¡€æ“ä½œ</h3><p>kotlinä¸­ä½¿ç”¨<code>fun</code>æ¥å£°æ˜å‡½æ•°</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">double</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * x<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡½æ•°å¯ä»¥å…·æœ‰é»˜è®¤å‚æ•°</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">read</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    b: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">Byte</span>&gt;, </span></span><br><span class="hljs-params"><span class="hljs-function">    off: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, </span></span><br><span class="hljs-params"><span class="hljs-function">    len: <span class="hljs-type">Int</span> = b.size,</span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span> &#123; <span class="hljs-comment">/*â€¦â€¦*/</span> &#125;<br></code></pre></td></tr></table></figure><p>è¦†ç›–æ–¹æ³•æ€»æ˜¯ä½¿ç”¨ä¸åŸºç±»å‹æ–¹æ³•ç›¸åŒçš„é»˜è®¤å‚æ•°å€¼ã€‚ å½“è¦†ç›–ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å‚æ•°å€¼çš„æ–¹æ³•æ—¶ï¼Œå¿…é¡»ä»ç­¾åä¸­çœç•¥é»˜è®¤å‚æ•°å€¼ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">open</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;<br>    <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(i: <span class="hljs-type">Int</span> = <span class="hljs-number">10</span>)</span></span> &#123; <span class="hljs-comment">/*â€¦â€¦*/</span> &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> : <span class="hljs-type">A</span></span>() &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(i: <span class="hljs-type">Int</span>)</span></span> &#123; <span class="hljs-comment">/*â€¦â€¦*/</span> &#125;  <span class="hljs-comment">// ä¸èƒ½æœ‰é»˜è®¤å€¼</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªé»˜è®¤å‚æ•°åœ¨ä¸€ä¸ªæ— é»˜è®¤å€¼çš„å‚æ•°ä¹‹å‰ï¼Œé‚£ä¹ˆè¯¥é»˜è®¤å€¼åªèƒ½é€šè¿‡ä½¿ç”¨<a href="https://www.kotlincn.net/docs/reference/functions.html#%E5%85%B7%E5%90%8D%E5%8F%82%E6%95%B0">å…·åå‚æ•°</a>è°ƒç”¨è¯¥å‡½æ•°æ¥ä½¿ç”¨ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    bar: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>, </span></span><br><span class="hljs-params"><span class="hljs-function">    baz: <span class="hljs-type">Int</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span> &#123; <span class="hljs-comment">/*â€¦â€¦*/</span> &#125;<br><br>foo(baz = <span class="hljs-number">1</span>) <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤å€¼ bar = 0</span><br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨é»˜è®¤å‚æ•°ä¹‹åçš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ lambda è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå®ƒæ—¢å¯ä»¥ä½œä¸ºå…·åå‚æ•°åœ¨æ‹¬å·å†…ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥åœ¨æ‹¬å·å¤–ä¼ å…¥ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    bar: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    baz: <span class="hljs-type">Int</span> = <span class="hljs-number">1</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    qux: () -&gt; <span class="hljs-type">Unit</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span> &#123; <span class="hljs-comment">/*â€¦â€¦*/</span> &#125;<br><br>foo(<span class="hljs-number">1</span>) &#123; println(<span class="hljs-string">&quot;hello&quot;</span>) &#125;     <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤å€¼ baz = 1</span><br>foo(qux = &#123; println(<span class="hljs-string">&quot;hello&quot;</span>) &#125;) <span class="hljs-comment">// ä½¿ç”¨ä¸¤ä¸ªé»˜è®¤å€¼ bar = 0 ä¸ baz = 1</span><br>foo &#123; println(<span class="hljs-string">&quot;hello&quot;</span>) &#125;        <span class="hljs-comment">// ä½¿ç”¨ä¸¤ä¸ªé»˜è®¤å€¼ bar = 0 ä¸ baz = 1</span><br></code></pre></td></tr></table></figure><h3 id="Kotlinä¸­ä¸åŒçš„å‡½æ•°"><a href="#Kotlinä¸­ä¸åŒçš„å‡½æ•°" class="headerlink" title="Kotlinä¸­ä¸åŒçš„å‡½æ•°"></a>Kotlinä¸­ä¸åŒçš„å‡½æ•°</h3><h4 id="ä½¿ç”¨suspendæ ‡è®°çš„åç¨‹æŒ‚èµ·å‡½æ•°ï¼šåç¨‹éƒ¨åˆ†è®²"><a href="#ä½¿ç”¨suspendæ ‡è®°çš„åç¨‹æŒ‚èµ·å‡½æ•°ï¼šåç¨‹éƒ¨åˆ†è®²" class="headerlink" title="ä½¿ç”¨suspendæ ‡è®°çš„åç¨‹æŒ‚èµ·å‡½æ•°ï¼šåç¨‹éƒ¨åˆ†è®²"></a>ä½¿ç”¨<code>suspend</code>æ ‡è®°çš„åç¨‹æŒ‚èµ·å‡½æ•°ï¼šåç¨‹éƒ¨åˆ†è®²</h4><h4 id="ä½¿ç”¨infixæ ‡è®°çš„ä¸­ç¼€è¡¨ç¤ºæ³•ï¼ˆå¿½ç•¥è¯¥è°ƒç”¨çš„ç‚¹ä¸åœ†æ‹¬å·ï¼‰ï¼š"><a href="#ä½¿ç”¨infixæ ‡è®°çš„ä¸­ç¼€è¡¨ç¤ºæ³•ï¼ˆå¿½ç•¥è¯¥è°ƒç”¨çš„ç‚¹ä¸åœ†æ‹¬å·ï¼‰ï¼š" class="headerlink" title="ä½¿ç”¨infixæ ‡è®°çš„ä¸­ç¼€è¡¨ç¤ºæ³•ï¼ˆå¿½ç•¥è¯¥è°ƒç”¨çš„ç‚¹ä¸åœ†æ‹¬å·ï¼‰ï¼š"></a>ä½¿ç”¨<code>infix</code>æ ‡è®°çš„ä¸­ç¼€è¡¨ç¤ºæ³•ï¼ˆå¿½ç•¥è¯¥è°ƒç”¨çš„ç‚¹ä¸åœ†æ‹¬å·ï¼‰ï¼š</h4><p>æ¡ä»¶è¦æ±‚ï¼š</p><table><thead><tr><th>å®ƒä»¬å¿…é¡»æ˜¯æˆå‘˜å‡½æ•°æˆ–æ‰©å±•å‡½æ•°ï¼›</th></tr></thead><tbody><tr><td>å®ƒä»¬å¿…é¡»åªæœ‰ä¸€ä¸ªå‚æ•°ï¼›</td></tr><tr><td>å…¶å‚æ•°ä¸å¾—æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ä¸”ä¸èƒ½æœ‰é»˜è®¤å€¼</td></tr></tbody></table><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">infix</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">shl</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> &#123; â€¦â€¦ &#125;<br><br><span class="hljs-comment">// ç”¨ä¸­ç¼€è¡¨ç¤ºæ³•è°ƒç”¨è¯¥å‡½æ•°</span><br><span class="hljs-number">1</span> shl <span class="hljs-number">2</span><br><br><span class="hljs-comment">// ç­‰åŒäºè¿™æ ·</span><br><span class="hljs-number">1.</span>shl(<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p>æ„Ÿè§‰ç”¨çš„ä¸æ˜¯å¾ˆå¤š</p><h4 id="ä½¿ç”¨tailrecæ ‡è®°çš„å°¾é€’å½’å‡½æ•°ï¼š"><a href="#ä½¿ç”¨tailrecæ ‡è®°çš„å°¾é€’å½’å‡½æ•°ï¼š" class="headerlink" title="ä½¿ç”¨tailrecæ ‡è®°çš„å°¾é€’å½’å‡½æ•°ï¼š"></a>ä½¿ç”¨<code>tailrec</code>æ ‡è®°çš„å°¾é€’å½’å‡½æ•°ï¼š</h4><p>Kotlin æ”¯æŒä¸€ç§ç§°ä¸º<a href="https://zh.wikipedia.org/wiki/%E5%B0%BE%E8%B0%83%E7%94%A8">å°¾é€’å½’</a>çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼ã€‚ è¿™å…è®¸ä¸€äº›é€šå¸¸ç”¨å¾ªç¯å†™çš„ç®—æ³•æ”¹ç”¨é€’å½’å‡½æ•°æ¥å†™ï¼Œè€Œæ— å †æ ˆæº¢å‡ºçš„é£é™©ã€‚ å½“ä¸€ä¸ªå‡½æ•°ç”¨ <code>tailrec</code> ä¿®é¥°ç¬¦æ ‡è®°å¹¶æ»¡è¶³æ‰€éœ€çš„å½¢å¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–è¯¥é€’å½’ï¼Œç•™ä¸‹ä¸€ä¸ªå¿«é€Ÿè€Œé«˜æ•ˆçš„åŸºäºå¾ªç¯çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> eps = <span class="hljs-number">1E-10</span> <span class="hljs-comment">// &quot;good enough&quot;, could be 10^-15</span><br><br><span class="hljs-keyword">tailrec</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">findFixPoint</span><span class="hljs-params">(x: <span class="hljs-type">Double</span> = <span class="hljs-number">1.0</span>)</span></span>: <span class="hljs-built_in">Double</span><br>        = <span class="hljs-keyword">if</span> (Math.abs(x - Math.cos(x)) &lt; eps) x <span class="hljs-keyword">else</span> findFixPoint(Math.cos(x))<br></code></pre></td></tr></table></figure><p>è¦ç¬¦åˆ <code>tailrec</code> ä¿®é¥°ç¬¦çš„æ¡ä»¶çš„è¯ï¼Œå‡½æ•°å¿…é¡»å°†å…¶è‡ªèº«è°ƒç”¨ä½œä¸ºå®ƒæ‰§è¡Œçš„æœ€åä¸€ä¸ªæ“ä½œã€‚åœ¨é€’å½’è°ƒç”¨åæœ‰æ›´å¤šä»£ç æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å°¾é€’å½’ï¼Œå¹¶ä¸”ä¸èƒ½ç”¨åœ¨ try/catch/finally å—ä¸­ã€‚ç›®å‰åœ¨ Kotlin for JVM ä¸ Kotlin/Native ä¸­æ”¯æŒå°¾é€’å½’ã€‚</p><h4 id="æ³›å‹å‡½æ•°ï¼š"><a href="#æ³›å‹å‡½æ•°ï¼š" class="headerlink" title="æ³›å‹å‡½æ•°ï¼š"></a>æ³›å‹å‡½æ•°ï¼š</h4><p>kotlinä¸­æ³›å‹å‡½æ•°çš„å£°æ˜ä¸ Java ç›¸åŒï¼Œç±»å‹å‚æ•°è¦æ”¾åœ¨å‡½æ•°åçš„å‰é¢ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">boxIn</span><span class="hljs-params">(value: <span class="hljs-type">T</span>)</span></span> = Box(value)<br></code></pre></td></tr></table></figure><h4 id="å•è¡¨è¾¾å‡½æ•°ï¼š"><a href="#å•è¡¨è¾¾å‡½æ•°ï¼š" class="headerlink" title="å•è¡¨è¾¾å‡½æ•°ï¼š"></a>å•è¡¨è¾¾å‡½æ•°ï¼š</h4><p>å½“å‡½æ•°è¿”å›å•ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥çœç•¥èŠ±æ‹¬å·å¹¶ä¸”åœ¨ <strong>=</strong> ç¬¦å·ä¹‹åæŒ‡å®šä»£ç ä½“å³å¯</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">double</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> = x * <span class="hljs-number">2</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">double</span><span class="hljs-params">(x:<span class="hljs-type">Int</span>)</span></span>=x*<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h4 id="å¯å˜æ•°é‡çš„å‚æ•°ï¼ˆVarargsï¼‰"><a href="#å¯å˜æ•°é‡çš„å‚æ•°ï¼ˆVarargsï¼‰" class="headerlink" title="å¯å˜æ•°é‡çš„å‚æ•°ï¼ˆVarargsï¼‰:"></a>å¯å˜æ•°é‡çš„å‚æ•°ï¼ˆVarargsï¼‰:</h4><p>å‡½æ•°çš„å‚æ•°ï¼ˆé€šå¸¸æ˜¯æœ€åä¸€ä¸ªï¼‰å¯ä»¥ç”¨ <code>vararg</code> ä¿®é¥°ç¬¦æ ‡è®°(ç±»ä¼¼ä¸pythonä¸­çš„*)ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">asList</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> ts: <span class="hljs-type">T</span>)</span></span>: List&lt;T&gt; &#123;<br>    <span class="hljs-keyword">val</span> result = ArrayList&lt;T&gt;()<br>    <span class="hljs-keyword">for</span> (t <span class="hljs-keyword">in</span> ts) <span class="hljs-comment">// ts is an Array</span><br>        result.add(t)<br>    <span class="hljs-keyword">return</span> result<br>&#125;<br><span class="hljs-keyword">val</span> list = asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-comment">//------å¦‚æœè¦ä¼ é€’æ•°ç»„ä¹Ÿæ˜¯å¯ä»¥çš„</span><br><span class="hljs-keyword">val</span> a  = arrayOf(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)<br><span class="hljs-keyword">val</span> list = asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,*a)<br><span class="hljs-comment">//åœ¨æ•°ç»„å‰é¢åŠ &quot;*&quot;</span><br></code></pre></td></tr></table></figure><h4 id="å±€éƒ¨å‡½æ•°ï¼š"><a href="#å±€éƒ¨å‡½æ•°ï¼š" class="headerlink" title="å±€éƒ¨å‡½æ•°ï¼š"></a>å±€éƒ¨å‡½æ•°ï¼š</h4><p>Kotlin æ”¯æŒå±€éƒ¨å‡½æ•°ï¼Œå³ä¸€ä¸ªå‡½æ•°åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨(ç¡®å®å¾ˆå¤šé«˜çº§è¯­è¨€éƒ½æ”¯æŒï¼‰ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//å®˜æ–¹ç»™çš„dfsç¤ºä¾‹</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dfs</span><span class="hljs-params">(graph: <span class="hljs-type">Graph</span>)</span></span> &#123;<br>    <span class="hljs-keyword">val</span> visited = HashSet&lt;Vertex&gt;()<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dfs</span><span class="hljs-params">(current: <span class="hljs-type">Vertex</span>)</span></span> &#123;<br>        <span class="hljs-keyword">if</span> (!visited.add(current)) <span class="hljs-keyword">return</span><br>        <span class="hljs-keyword">for</span> (v <span class="hljs-keyword">in</span> current.neighbors)<br>            dfs(v)<br>    &#125;<br><br>    dfs(graph.vertices[<span class="hljs-number">0</span>])<br>&#125;<br></code></pre></td></tr></table></figure><p>å¹¶ä¸”è¿™ä¸ªæ˜¯é—­åŒ…çš„ï¼ˆæ”¯æŒå±€éƒ¨å‡½æ•°çš„è¯­è¨€åº”è¯¥éƒ½é€šç”¨ï¼‰å¯ä»¥å‚è€ƒç½‘ç»œä¸Šå¤§éƒ¨åˆ†å…³äºjsçš„é—­åŒ…</p><p>å¤–éƒ¨æ— æ³•ç›´æ¥è°ƒç”¨å†…éƒ¨å‡½æ•°</p><h4 id="æˆå‘˜å‡½æ•°ï¼š"><a href="#æˆå‘˜å‡½æ•°ï¼š" class="headerlink" title="æˆå‘˜å‡½æ•°ï¼š"></a>æˆå‘˜å‡½æ•°ï¼š</h4><p>å°±æ˜¯å®šä¹‰åœ¨ç±»é‡Œé¢çš„å‡½æ•°ï¼ˆä¸å°±æ˜¯æ–¹æ³•å—</p><h4 id="å†…è”å‡½æ•°ï¼š"><a href="#å†…è”å‡½æ•°ï¼š" class="headerlink" title="å†…è”å‡½æ•°ï¼š"></a>å†…è”å‡½æ•°ï¼š</h4><p>è¢«inlineæ ‡è®°çš„å‡½æ•°å°±æ˜¯å†…è”å‡½æ•°,å…¶åŸç†å°±æ˜¯:åœ¨ç¼–è¯‘æ—¶æœŸ,æŠŠè°ƒç”¨è¿™ä¸ªå‡½æ•°çš„åœ°æ–¹ç”¨è¿™ä¸ªå‡½æ•°çš„æ–¹æ³•ä½“è¿›è¡Œæ›¿æ¢</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">method</span><span class="hljs-params">( body: () -&gt; <span class="hljs-type">T</span>)</span></span>: T &#123;<br>        <br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> body()<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>           <br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>å¯¹æ­¤æ–¹æ³•åœ¨mainä¸­è°ƒç”¨ç”±kotlinå­—èŠ‚ç è½¬javaå¾—åˆ°çš„æ˜¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TetsKt</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>      method((Function0)<span class="hljs-keyword">null</span>.INSTANCE);<br>   &#125;<br><br></code></pre></td></tr></table></figure><p>åŠ äº†inlineæ ‡è®°åæ˜¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TetsKt</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>      <span class="hljs-keyword">boolean</span> var0 = <span class="hljs-keyword">false</span>;<br><br>      <span class="hljs-keyword">try</span> &#123;<br>         <span class="hljs-keyword">int</span> var1 = <span class="hljs-keyword">false</span>;<br>         String var4 = <span class="hljs-string">&quot;æˆ‘æ˜¯bodyçš„æ–¹æ³•ä½“&quot;</span>;<br>      &#125; <span class="hljs-keyword">finally</span> &#123;<br>         ;<br>      &#125;<br>   &#125;<br><br></code></pre></td></tr></table></figure><p>å¯è§inlineä½¿å¾—å‡½æ•°æ•´ä½“è¢«ç§»åŠ¨äº†è¿‡æ¥</p><p>åœ¨ç¼–è¯‘æ—¶æœŸå°±ä¼šæŠŠä¸‹é¢çš„å†…å®¹æ›¿æ¢åˆ°è°ƒç”¨è¯¥æ–¹æ³•çš„åœ°æ–¹,è¿™æ ·å°±ä¼šå‡å°‘æ–¹æ³•å‹æ ˆ,å‡ºæ ˆ,è¿›è€Œå‡å°‘èµ„æºæ¶ˆè€—;</p><p>nolineå’Œcrosslineæ ‡è®°<a href="https://www.jianshu.com/p/4f29c9724b33">æ›´å¤šå‚è€ƒ</a></p><h4 id="é«˜é˜¶å‡½æ•°ï¼š"><a href="#é«˜é˜¶å‡½æ•°ï¼š" class="headerlink" title="é«˜é˜¶å‡½æ•°ï¼š"></a>é«˜é˜¶å‡½æ•°ï¼š</h4><p>åœ¨<code>Kotlin</code>ä¸­ï¼Œé«˜é˜¶å‡½æ•°å³æŒ‡ï¼šå°†å‡½æ•°ç”¨ä½œä¸€ä¸ªå‡½æ•°çš„å‚æ•°æˆ–è€…è¿”å›å€¼çš„å‡½æ•°</p><p>å¯èƒ½ç±»ä¼¼äºæ•°å­¦ä¸­çš„é«˜æ¬¡ï¼Ÿ</p><p>ä¸ªäººç†è§£æ˜¯åœ¨å‡½æ•°ä¸­ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼ˆé€šå¸¸æ˜¯lambdaè¡¨è¾¾å¼ï¼‰</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">val</span> a = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">val</span> b = <span class="hljs-number">2</span><br>    <span class="hljs-keyword">val</span> sum=&#123;<br>        d:<span class="hljs-built_in">Int</span>,e:<span class="hljs-built_in">Int</span>-&gt;d+e<br>    &#125;<br>    println(add(a,b,sum))<br>    <span class="hljs-comment">//ä¼ é€’ä¸€ä¸ªlambdaè¡¨è¾¾å¼</span><br>    println(add(a,b)&#123;<br>        a,b-&gt;a+b<br>    &#125;)<br>    <span class="hljs-comment">//ç”±äºlambdaè¡¨è¾¾å¼æ˜¯æœ€åä¸€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥&#123;&#125;</span><br>    println(add(a,b,::sumOf))<br>    <span class="hljs-comment">//ï¼šï¼šåˆ›å»ºå‡½æ•°ç±»å‹å¯¹è±¡çš„å¼•ç”¨</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sumOf</span><span class="hljs-params">(a:<span class="hljs-type">Int</span>,b:<span class="hljs-type">Int</span>)</span></span>=a+b<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">add</span><span class="hljs-params">(a:<span class="hljs-type">Int</span>,b:<span class="hljs-type">Int</span>,sum:(<span class="hljs-type">a</span>:<span class="hljs-type">Int</span>,<span class="hljs-type">b</span>:<span class="hljs-type">Int</span>)-&gt;<span class="hljs-type">Int</span>)</span></span>=sum(a,b)<br><br></code></pre></td></tr></table></figure><p><a href="https://rengwuxian.com/kotlin-lambda/">åº·åº·æ‰”ç‰©çº¿å’‹è¯´çš„</a></p><h4 id="åŒ¿åå‡½æ•°ï¼š"><a href="#åŒ¿åå‡½æ•°ï¼š" class="headerlink" title="åŒ¿åå‡½æ•°ï¼š"></a>åŒ¿åå‡½æ•°ï¼š</h4><p>åŒ¿åå‡½æ•°é¡¾åæ€ä¹‰å°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œé‚£è¿™ç§æ²¡æœ‰åå­—çš„å‡½æ•°æˆ‘ä»¬æ€ä¹ˆè°ƒç”¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ— æ³•ç›´æ¥è°ƒç”¨ã€‚åŒ¿åå‡½æ•°å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæˆ–è€…å½“ä½œå®å‚ç›´æ¥ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å½¢å‚ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">(appleBean: <span class="hljs-type">AppleBean</span>)</span></span>: <span class="hljs-built_in">Boolean</span> = appleBean.weight &gt; <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><p>å°±æ˜¯æ²¡æœ‰åå­—ï¼ˆ</p><p>æ­¤å¤–ï¼ŒåŒ¿åå‡½æ•°è¿˜å¯ä»¥èµ‹å€¼ç»™å˜é‡</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> filterWeightFunPredicate =<br>            <span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">(appleBean: <span class="hljs-type">AppleBean</span>)</span></span>: <span class="hljs-built_in">Boolean</span> = appleBean.weight<br></code></pre></td></tr></table></figure><p>å·®ä¸å¤šå’Œlambdaè¡¨è¾¾å¼ç”¨æ³•ä¸€æ ·</p><h4 id="ä½œç”¨åŸŸå‡½æ•°ï¼š"><a href="#ä½œç”¨åŸŸå‡½æ•°ï¼š" class="headerlink" title="ä½œç”¨åŸŸå‡½æ•°ï¼š"></a>ä½œç”¨åŸŸå‡½æ•°ï¼š</h4><p>Kotlin çš„ä½œç”¨åŸŸå‡½æ•°æœ‰äº”ç§ï¼š<code>let</code>ã€<code>run</code>ã€<code>with</code>ã€<code>apply</code> ä»¥åŠ <code>also</code>ã€‚</p><p>è¿™äº›å‡½æ•°åŸºæœ¬ä¸Šåšäº†åŒæ ·çš„äº‹æƒ…ï¼šåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œä¸€ä¸ªä»£ç å—ã€‚</p><p>å…¸å‹ç”¨æ³•ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> adam = Person(<span class="hljs-string">&quot;Adam&quot;</span>).apply &#123; <br>    age = <span class="hljs-number">20</span><br>    city = <span class="hljs-string">&quot;London&quot;</span><br>&#125;<br>println(adam)<br><span class="hljs-comment">//------ä¸ä½¿ç”¨applyçš„è¯</span><br><span class="hljs-keyword">val</span> adam = Person(<span class="hljs-string">&quot;Adam&quot;</span>)<br>adam.age = <span class="hljs-number">20</span><br>adam.city = <span class="hljs-string">&quot;London&quot;</span><br>println(adam)<br></code></pre></td></tr></table></figure><p>è¿™å‡ ç§ç¬¬ä¸€è¡Œä»£ç ç¬¬ä¸‰ç‰ˆçš„è®²çš„å¾ˆæ¸…æ¥šï¼Œè¿™é‡Œåªæ˜¯ç®€å•æåŠä¸€ä¸‹</p><p><a href="https://www.kotlincn.net/docs/reference/scope-functions.html">ä¹Ÿå¯ä»¥çœ‹çœ‹è¿™ä¸ª</a></p><h4 id="æ‰©å±•å‡½æ•°ï¼š"><a href="#æ‰©å±•å‡½æ•°ï¼š" class="headerlink" title="æ‰©å±•å‡½æ•°ï¼š"></a>æ‰©å±•å‡½æ•°ï¼š</h4><p>Kotlinçš„æ‰©å±•å‡½æ•°å¯ä»¥è®©ä½ ä½œä¸ºä¸€ä¸ªç±»æˆå‘˜è¿›è¡Œè°ƒç”¨çš„å‡½æ•°ï¼Œä½†æ˜¯æ˜¯å®šä¹‰åœ¨è¿™ä¸ªç±»çš„å¤–éƒ¨ã€‚è¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰©å±•ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç±»ï¼Œä¸ºå®ƒæ·»åŠ é¢å¤–çš„æ–¹æ³•ã€‚</p><p>ä¾‹å­ï¼š</p><p>å‡å¦‚æˆ‘ä»¬éœ€è¦ä¸ºStringç±»å‹æ·»åŠ ä¸€ä¸ªè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æœ€åä¸€ä¸ªå­—ç¬¦çš„æ–¹æ³•ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><br><span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">lastChar</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Char</span> = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">get</span>(<span class="hljs-keyword">this</span>.length - <span class="hljs-number">1</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">(args: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> &#123;<br>    println(<span class="hljs-string">&quot;Kotlin&quot;</span>.lastChar())<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰©å±•å‡½æ•°ç”¨äºå®‰å“ä¸­ï¼Œå¯ä»¥å¯¹Stringç±»è¿›è¡Œæ‰©å±•ä½¿å¾—æˆ‘ä»¬æ‰“toastæ›´æ–¹ä¾¿ä¸€ç‚¹</p><p>ä¹Ÿå¯ä»¥å¯¹viewè¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ªåŠ¨ç”»å‡½æ•°ç­‰</p><p><a href="https://www.jianshu.com/p/7291c9a1ec1e">æ›´å¤šå†…å®¹</a></p><h3 id="lambdaè¡¨è¾¾å¼åŠå‡½æ•°å¼æ¥å£"><a href="#lambdaè¡¨è¾¾å¼åŠå‡½æ•°å¼æ¥å£" class="headerlink" title="lambdaè¡¨è¾¾å¼åŠå‡½æ•°å¼æ¥å£"></a>lambdaè¡¨è¾¾å¼åŠå‡½æ•°å¼æ¥å£</h3><h4 id="å‡½æ•°å¼ï¼ˆSAMï¼‰æ¥å£"><a href="#å‡½æ•°å¼ï¼ˆSAMï¼‰æ¥å£" class="headerlink" title="å‡½æ•°å¼ï¼ˆSAMï¼‰æ¥å£"></a>å‡½æ•°å¼ï¼ˆSAMï¼‰æ¥å£</h4><p>åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ç§°ä¸º<em>å‡½æ•°å¼æ¥å£</em>æˆ– <em>SAMï¼ˆå•ä¸€æŠ½è±¡æ–¹æ³•ï¼‰</em>æ¥å£ã€‚å‡½æ•°å¼æ¥å£å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æˆå‘˜ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æˆå‘˜ã€‚</p><p>å¯ä»¥ç”¨ <code>fun</code> ä¿®é¥°ç¬¦åœ¨ Kotlin ä¸­å£°æ˜ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-keyword">interface</span> KRunnable &#123;</span><br>   <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invoke</span><span class="hljs-params">()</span></span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="SAMè½¬åŒ–"><a href="#SAMè½¬åŒ–" class="headerlink" title="SAMè½¬åŒ–"></a>SAMè½¬åŒ–</h4><p>ä¾‹å¦‚ï¼Œå‡å®šå­˜åœ¨å‡½æ•°å¼æ¥å£</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-keyword">interface</span> IntPredicate &#123;</span><br>   <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">accept</span><span class="hljs-params">(i: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸ä½¿ç”¨ SAM è½¬æ¢ï¼Œé‚£ä¹ˆä½ éœ€è¦åƒè¿™æ ·ç¼–å†™ä»£ç ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹</span><br><span class="hljs-keyword">val</span> isEven = <span class="hljs-keyword">object</span> : IntPredicate &#123;<br>   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">accept</span><span class="hljs-params">(i: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> &#123;<br>       <span class="hljs-keyword">return</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨lambdaè½¬æ¢å</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> isEven = IntPredicate &#123; it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#125;<br></code></pre></td></tr></table></figure><p>lambdaåŒ¿åå†…éƒ¨ç±»å®é”¤ç¡®ä¿¡</p><h4 id="Lambdaè¡¨è¾¾å¼"><a href="#Lambdaè¡¨è¾¾å¼" class="headerlink" title="Lambdaè¡¨è¾¾å¼"></a>Lambdaè¡¨è¾¾å¼</h4><p>ä¸Šæ–‡æåŠä¸å°‘ï¼Œæ­¤å¤„ä¸å†æäº†ï¼Œæ›´å¤šæœ¬æ–‡é«˜é˜¶å‡½æ•°éƒ¨åˆ†</p><h2 id="Kotlinçš„ç©ºå®‰å…¨"><a href="#Kotlinçš„ç©ºå®‰å…¨" class="headerlink" title="Kotlinçš„ç©ºå®‰å…¨"></a>Kotlinçš„ç©ºå®‰å…¨</h2><h3 id><a href="#" class="headerlink" title="?"></a>?</h3><p>kotlinåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ‰€æœ‰å˜é‡éƒ½æ˜¯ä¸å…è®¸ä¸ºç©ºçš„ï¼Œå¿…é¡»ç»™å…¶æŒ‡å®šä¸€ä¸ªå€¼ï¼Œå¦‚æœç»™å®ƒèµ‹å€¼ä¸º nullï¼Œå°±ä¼šæŠ¥é”™ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NullTest</span> </span>&#123;<br>    <span class="hljs-keyword">var</span> str: String = <span class="hljs-literal">null</span><span class="hljs-comment">//å‡ºé”™ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸èƒ½ä¸ºç©º</span><br><br>    <span class="hljs-keyword">var</span> name:String =<span class="hljs-string">&quot;tandeneck&quot;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">assignNull</span><span class="hljs-params">()</span></span>&#123;<br>        name = <span class="hljs-literal">null</span> <span class="hljs-comment">//å‡ºé”™ï¼Œä¸èƒ½èµ‹å€¼ä¸ºç©º</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“ç„¶è¦æƒ³ä»–ä¸ºç©ºåŠ ä¸ªâ€?â€å°±å¯ä»¥äº†</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">var</span> str:String ?=<span class="hljs-literal">null</span><br></code></pre></td></tr></table></figure><h3 id="-1"><a href="#-1" class="headerlink" title="?."></a>?.</h3><p>å½“æˆ‘ä»¬è¦å¯¹ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œåˆ¤ç©ºå¤„ç†ï¼Œå°±å¯ä»¥è¿™æ ·å¹²</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">textView?.textSize = <span class="hljs-number">20f</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå†™æ³•åŒæ ·ä¼šå¯¹å˜é‡åšä¸€æ¬¡éç©ºç¡®è®¤ä¹‹åå†è°ƒç”¨æ–¹æ³•</p><h3 id="-2"><a href="#-2" class="headerlink" title="!!"></a>!!</h3><p>è¿™ä¸ªå«åšéç©ºæ–­è¨€ï¼Œå·®ä¸å¤šæ„æ€æ˜¯æˆ‘è‚¯å®šä»–æ˜¯éç©ºçš„</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">textView!!.textSize = <span class="hljs-number">20f</span><br></code></pre></td></tr></table></figure><h3 id="-3"><a href="#-3" class="headerlink" title="?:"></a>?:</h3><p>Elvis æ“ä½œç¬¦èƒ½å¤Ÿå¤§å¤§ç®€åŒ– if-else è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> length1: <span class="hljs-built_in">Int</span> = <span class="hljs-keyword">if</span> (b != <span class="hljs-literal">null</span>) b.length <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">val</span> length2: <span class="hljs-built_in">Int</span> = b?.length ?: <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="as"><a href="#as" class="headerlink" title="as?"></a>as?</h3><p>Kotlin å¯ä»¥ä½¿ç”¨ as å…³é”®å­—æ¥è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¦‚æœå¯¹è±¡ä¸æ˜¯ç›®æ ‡ç±»å‹ï¼Œé‚£ä¹ˆç±»å‹è½¬æ¢å¯èƒ½ä¼šå¯¼è‡´ ClassCastExceptionã€‚è¿™æ—¶æˆ‘ä»¬é€‰æ‹© as? ,å¦‚æœå°è¯•è½¬æ¢ä¸æˆåŠŸåˆ™ä¼šè¿”å› nullï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;string&quot;</span><br>    <span class="hljs-keyword">val</span> num: <span class="hljs-built_in">Int</span>? = str <span class="hljs-keyword">as</span>? <span class="hljs-built_in">Int</span><br>    println(num)<br>    <span class="hljs-comment">//è¾“å‡º null</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="let"><a href="#let" class="headerlink" title="?.let{}"></a>?.let{}</h3><p>letå‡½æ•°é™¤äº†å¯ç”¨äºåœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹æ“ä½œå˜é‡å¤–è¿˜å¯ä»¥ç”¨ä½œåšåˆ¤nullæ“ä½œï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">val</span> str = <span class="hljs-string">&quot;&quot;</span><br>    str?.let &#123; println(it)&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸æ˜¯ç»å¯¹çš„ç©ºæŒ‡é’ˆå®‰å…¨"><a href="#ä¸æ˜¯ç»å¯¹çš„ç©ºæŒ‡é’ˆå®‰å…¨" class="headerlink" title="ä¸æ˜¯ç»å¯¹çš„ç©ºæŒ‡é’ˆå®‰å…¨"></a>ä¸æ˜¯ç»å¯¹çš„ç©ºæŒ‡é’ˆå®‰å…¨</h3><p>Kotlinä¸­å¹¶ä¸æ˜¯ç»å¯¹çš„ç©ºæŒ‡é’ˆå®‰å…¨ï¼Œæœ€å¸¸è§çš„å°±æ˜¯åœ¨Kotlinå»è°ƒJavaä»£ç ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//java</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> static String getMsg() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//kotlin</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    println(Test.getMsg().length)<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ä¼šå¼•å‘ç©ºæŒ‡é’ˆ</p><p>å¯é€šè¿‡åŠ â€?â€æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">Test.getMsg()?.length<br></code></pre></td></tr></table></figure><p>æ¶‰åŠçš„ä¸€äº›åŸç†å¯ä»¥çœ‹çœ‹è¿™ä¸ª-&gt;<a href="https://juejin.cn/post/6844904048987127822">æ›´å¤šæŸ¥çœ‹</a></p><h2 id="é›†åˆå’Œæ•°ç»„"><a href="#é›†åˆå’Œæ•°ç»„" class="headerlink" title="é›†åˆå’Œæ•°ç»„"></a>é›†åˆå’Œæ•°ç»„</h2><h3 id="æ•°ç»„ï¼š"><a href="#æ•°ç»„ï¼š" class="headerlink" title="æ•°ç»„ï¼š"></a>æ•°ç»„ï¼š</h3><p>æ•°ç»„åœ¨ä¸Šæ–‡ä¸­ç®€å•çš„æåŠåˆ°äº†åˆ›å»ºï¼Œå’Œå…¶ä»–è¯­è¨€ç›¸åŒå¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è¿›è¡Œè®¿é—®ï¼Œæ•°ç»„åŒ…å«ä¸€ä¸‹å‡ ç§ç±»å‹åŠåˆ›å»ºæ–¹æ³•</p><table><thead><tr><th>intArrayOf()æ•´å‹</th></tr></thead><tbody><tr><td>longArrayOf()é•¿æ•´å‹</td></tr><tr><td>floatArrayOf()å•ç²¾åº¦</td></tr><tr><td>doubleArrayOf()åŒç²¾åº¦</td></tr><tr><td>booleanArrayOf()å¸ƒå°”å‹</td></tr></tbody></table><p>åˆ›å»ºé»˜è®¤å€¼ä¸ºnullçš„æ•°ç»„</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">arrayOfNulls&lt;<span class="hljs-built_in">Int</span>&gt;(<span class="hljs-number">6</span>)<br></code></pre></td></tr></table></figure><p>åˆ›å»ºç©ºæ•°ç»„</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">emptyArray&lt;<span class="hljs-built_in">Int</span>&gt;()<br></code></pre></td></tr></table></figure><p>ä¸‰ç»´æ•°ç»„ï¼ˆ</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> arrB = Array(<span class="hljs-number">3</span>)&#123;Array(<span class="hljs-number">3</span>)&#123;IntArray(<span class="hljs-number">3</span>)&#125;&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ä¸‹æ ‡æˆ–è€…set()å‡½æ•°æ¥ä¿®æ”¹å€¼ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">intArr[index] = <span class="hljs-number">0</span> <span class="hljs-comment">//ä¸javaä¸€æ ·ï¼Œå¯ä»¥è¿™æ ·ä¿®æ”¹æ•°æ®</span><br>intArr.<span class="hljs-keyword">set</span>(index,<span class="hljs-number">1</span>) <span class="hljs-comment">//kotlinå¯ä»¥é€šè¿‡setå‡½æ•°è¿›è¡Œä¿®æ”¹æ•°æ®</span><br></code></pre></td></tr></table></figure><h3 id="é›†åˆï¼š"><a href="#é›†åˆï¼š" class="headerlink" title="é›†åˆï¼š"></a>é›†åˆï¼š</h3><p>Kotlinçš„é›†åˆåˆ†ç±»ï¼š</p><ul><li>å¯å˜é›†åˆç±»ï¼ˆMutableï¼‰</li><li>ä¸å¯å˜é›†åˆç±»ï¼ˆImmutableï¼‰ã€‚</li></ul><p>é›†åˆç±»å­˜æ”¾çš„éƒ½æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œéå¯¹è±¡æœ¬èº«ï¼Œæˆ‘ä»¬é€šå¸¸è¯´çš„é›†åˆä¸­çš„å¯¹è±¡æŒ‡çš„æ˜¯é›†åˆä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚é›†åˆç±»å‹ä¸»è¦æœ‰List(åˆ—è¡¨)ï¼ŒSet(é›†)ï¼ŒMap(æ˜ å°„)ã€‚</p><h4 id="Setï¼š"><a href="#Setï¼š" class="headerlink" title="Setï¼š"></a>Setï¼š</h4><table><thead><tr><th>ç‰¹æ€§ï¼šæ— åºä¸é‡å¤ï¼Œå¤§å°å›ºå®šï¼Œå…ƒç´ ç±»å‹ä¸å¯å˜</th></tr></thead><tbody><tr><td>å®šä¹‰ï¼šSet&lt;æ³›å‹&gt;æˆ–setOf(å…ƒç´ 1ï¼Œå…ƒç´ 2ï¼Œâ€¦ï¼Œå…ƒç´ n)</td></tr><tr><td>ä¸»è¦æ–¹æ³•ï¼šäº¤ã€å·®ã€å¹¶ã€è¡¥</td></tr></tbody></table><p>åˆ›å»ºå¹¶è¾“å‡ºé›†åˆå†…å®¹</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">var</span> languages = setOf(<span class="hljs-string">&quot;Java&quot;</span>, <span class="hljs-string">&quot;Kotlin&quot;</span>, <span class="hljs-string">&quot;Python&quot;</span>)<br><span class="hljs-keyword">for</span> (language <span class="hljs-keyword">in</span> languages) &#123;<br>    println(language)<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨foreachæ¥éå†</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">languages.forEach &#123; println(it) &#125;<br></code></pre></td></tr></table></figure><h4 id="Map"><a href="#Map" class="headerlink" title="Map:"></a>Map:</h4><p>åªè¯»Mapã€‚<br>å¯å˜çš„MutableMap(MutableMapã€HashMapã€LinkedHashMap)ã€‚</p><p>åˆ›å»ºmapå¹¶è¾“å‡º:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">val</span> map = mapOf(<span class="hljs-string">&quot;hello&quot;</span> to <span class="hljs-string">&quot;world&quot;</span>,<span class="hljs-string">&quot;1&quot;</span> to <span class="hljs-string">&quot;2&quot;</span>)<br>    println(map)<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="list"><a href="#list" class="headerlink" title="list:"></a>list:</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">listOf&lt;T&gt;()<span class="hljs-comment">//åˆ›å»ºå›ºå®šå…ƒç´ ä¸ªæ•°çš„list</span><br>mutableListOf&lt;T&gt;()<span class="hljs-comment">//åˆ›å»ºå¯è¯»å¯ä¿®æ”¹çš„é›†åˆ</span><br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">list.forEachIndexed &#123; index, value -&gt;<br>        println(<span class="hljs-string">&quot;<span class="hljs-variable">$index</span> <span class="hljs-variable">$value</span>&quot;</span>)<br>    &#125;<br><span class="hljs-comment">//ä½¿ç”¨è¿™ç§éå†å¸¦ä¸‹æ ‡çš„</span><br><span class="hljs-comment">//ä¹Ÿå¯ä»¥ä½¿ç”¨foreach</span><br></code></pre></td></tr></table></figure><p>å¢åˆ æŸ¥æ”¹æ›´å¤š<a href="http://www.kotlincn.net/docs/reference/collections-overview.html">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p><h2 id="åç¨‹ä¸flow"><a href="#åç¨‹ä¸flow" class="headerlink" title="åç¨‹ä¸flow"></a>åç¨‹ä¸flow</h2>]]></content>
    
    
    <categories>
      
      <category>kotlin</category>
      
    </categories>
    
    
    <tags>
      
      <tag>kotlinè¯­è¨€åŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ å…¥é—¨ã€Š2ã€‹ç¥ç»ç½‘ç»œ</title>
    <link href="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    <url>/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<h3 id="ç¥ç»ç½‘ç»œä¸æ„ŸçŸ¥æœº"><a href="#ç¥ç»ç½‘ç»œä¸æ„ŸçŸ¥æœº" class="headerlink" title="ç¥ç»ç½‘ç»œä¸æ„ŸçŸ¥æœº"></a>ç¥ç»ç½‘ç»œä¸æ„ŸçŸ¥æœº</h3><p>ç¥ç»ç½‘ç»œä¸æ„ŸçŸ¥æœºæœ‰å¾ˆå¤šçš„å…±åŒç‚¹ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ç€ä¸€äº›å·®å¼‚</p><ol><li>æ„ŸçŸ¥æœºè™½ç„¶æ‹¥æœ‰å³ä½¿æ˜¯å¤æ‚å‡½æ•°ä¹Ÿæœ‰è¡¨ç¤ºä»–çš„å¯èƒ½æ€§ï¼Œç†è®ºæ”¯æ’‘æ¥ç€æ•°å­—ç”µè·¯ä¸‰é—¨ç»„åˆèƒ½è¡¨è¾¾å‡ºå¤æ‚çš„ç”µè·¯é€»è¾‘</li><li>ä½†æ˜¯ï¼Œæ„ŸçŸ¥æœºè®¾ç½®æƒå€¼çš„å·¥ä½œéœ€è¦ç”±äººå·¥æ¥ç¡®å®šã€‚</li><li>ç¥ç»ç½‘ç»œçš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œä»–å¯ä»¥é€šè¿‡è‡ªåŠ¨åœ°ä»æ•°æ®ä¸­å­¦ä¹ åˆ°åˆé€‚çš„æƒé‡å‚æ•°</li></ol><h3 id="ç¥ç»ç½‘ç»œç¤ºæ„å›¾ï¼š"><a href="#ç¥ç»ç½‘ç»œç¤ºæ„å›¾ï¼š" class="headerlink" title="ç¥ç»ç½‘ç»œç¤ºæ„å›¾ï¼š"></a>ç¥ç»ç½‘ç»œç¤ºæ„å›¾ï¼š</h3><p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/8uynp06sti.png"></p><p>æœ€å·¦è¾¹ç§°ä¸ºè¾“å…¥å±‚ï¼Œä¸­é—´ç§°ä¸ºä¸­é—´å±‚ï¼ˆæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºéšè—å±‚ã€éšè—å±‚çš„ç¥ç»å…ƒè‚‰çœ¼æ— æ³•çœ‹è§ã€‘ï¼‰ï¼Œæœ€å³è¾¹ç§°ä¸ºè¾“å‡ºå±‚</p><ol><li>æœ‰çš„ä¹¦æè¿°ä¼šå°†å…¶ç§°ä¸º3å±‚ç½‘ç»œï¼Œç†ç”±æ˜¯æ„æˆç½‘ç»œçš„å±‚æ•°</li><li>æœ‰çš„ä¹¦ä¼šå°†å…¶æè¿°ä¸º2å±‚ç½‘ç»œï¼Œç†ç”±æ˜¯æ‹¥æœ‰æƒé‡çš„å±‚æ•°ï¼ˆè¾“å…¥å±‚ï¼Œè¾“å‡ºå±‚ï¼Œä¸­é—´å±‚æ•°é‡-1ï¼‰</li></ol><h3 id="æ¿€æ´»å‡½æ•°ç™»åœº"><a href="#æ¿€æ´»å‡½æ•°ç™»åœº" class="headerlink" title="æ¿€æ´»å‡½æ•°ç™»åœº"></a>æ¿€æ´»å‡½æ•°ç™»åœº</h3><p>åœ¨æ„ŸçŸ¥æœºçš„y = xå‡½æ•°åŸºç¡€ä¸Šè¿›è¡Œäº†ä½¿ç”¨æ¿€æ´»å‡½æ•°hæ¥è¿›è¡Œç®€åŒ–è¡¨ç¤ºè¿™ç§åˆ†æƒ…å†µçš„åŠ¨ä½œï¼Œ</p><p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/v2-56822c1d68fc828df3f7a498ebbb4d8b_720w.jpg"></p><p>æ¿€æ´»å‡½æ•°å¦‚åŒæŠ½è±¡åŒ–çš„ç”Ÿç‰©å­¦ä¸Šçš„ç¥ç»å…ƒä¹‹é—´ä¼ è¾“ä½¿ç”¨çš„æŸç§ç”ŸåŒ–ä¿¡å·ï¼ˆæ¶‰åŠè½´çªæ ‘çªä¹‹é—´ä¿¡å·çš„ä¼ é€’ï¼‰ï¼Œè¿™é‡Œè¡¨è¾¾çš„å°±æ˜¯å¦‚åŒæˆ‘ä»¬å¸¸è¯†æ‰€çŸ¥é“çš„é‚£æ ·ï¼Œå½“åŒ–å­¦é‡è¾¾åˆ°ä¸€å®šæµ“åº¦æ—¶ï¼Œç¥ç»å…ƒä¹‹é—´ä¿¡å·ä¼ é€’æ‰æœ‰æ•ˆï¼Œæ‰€ä»¥è¿™é‡Œçš„æ¿€æ´»å‡½æ•°å°±èµ·åˆ°äº†æ§åˆ¶è¿™ç§åŒ–å­¦ä¼ é€’çš„ä¸€ä¸ªé˜€</p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/640.png" style="zoom:67%;"><h3 id="å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°"><a href="#å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°" class="headerlink" title="å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°"></a>å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°</h3><h4 id="sigmoidå‡½æ•°"><a href="#sigmoidå‡½æ•°" class="headerlink" title="sigmoidå‡½æ•°"></a>sigmoidå‡½æ•°</h4><p>Sigmoidå‡½æ•°æ˜¯ä¸€ä¸ªåœ¨<a href="https://baike.baidu.com/item/%E7%94%9F%E7%89%A9%E5%AD%A6/1358">ç”Ÿç‰©å­¦</a>ä¸­å¸¸è§çš„<a href="https://baike.baidu.com/item/S%E5%9E%8B%E5%87%BD%E6%95%B0/19178062">Så‹å‡½æ•°</a>ï¼Œä¹Ÿç§°ä¸º<a href="https://baike.baidu.com/item/S%E5%9E%8B%E7%94%9F%E9%95%BF%E6%9B%B2%E7%BA%BF/5581189">Så‹ç”Ÿé•¿æ›²çº¿</a>ã€‚ [1] åœ¨ä¿¡æ¯ç§‘å­¦ä¸­ï¼Œç”±äºå…¶å•å¢ä»¥åŠåå‡½æ•°å•å¢ç­‰æ€§è´¨ï¼ŒSigmoidå‡½æ•°å¸¸è¢«ç”¨ä½œ<a href="https://baike.baidu.com/item/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/16600562">ç¥ç»ç½‘ç»œ</a>çš„<a href="https://baike.baidu.com/item/%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0/2520792">æ¿€æ´»å‡½æ•°</a>ï¼Œå°†å˜é‡æ˜ å°„åˆ°0,1ä¹‹é—´ã€‚</p><p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/1285295-20180727154358729-854643533.png"></p><p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/d009b3de9c82d158dfb4e7218a0a19d8bc3e426f.jpg"></p><p>ä½¿ç”¨python æè¿°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sigmoid</span>(<span class="hljs-params">x</span>):</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> + np.exp(-x))<br></code></pre></td></tr></table></figure><h4 id="é˜¶è·ƒå‡½æ•°"><a href="#é˜¶è·ƒå‡½æ•°" class="headerlink" title="é˜¶è·ƒå‡½æ•°"></a>é˜¶è·ƒå‡½æ•°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">step_function</span>(<span class="hljs-params">x</span>):</span><br>    <span class="hljs-keyword">return</span> np.array(x &gt; <span class="hljs-number">0</span>, dtype=np.<span class="hljs-built_in">int</span>)<br></code></pre></td></tr></table></figure><p>å›¾ç‰‡ç»˜åˆ¶ï¼š</p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20211003110403947.png" alt="image-20211003110403947" style="zoom:67%;"><p>ä¸¤è€…éƒ½æ˜¯éçº¿æ€§å‡½æ•°</p><p>ç¥ç»ç½‘ç»œçš„æ¿€æ´»å‡½æ•°å¿…é¡»æ˜¯éçº¿æ€§å‡½æ•°ï¼Œå¦åˆ™åŠ æ·±ç¥ç»ç½‘ç»œçš„å±‚æ•°å°†å¤±å»æ„ä¹‰</p><h4 id="ReLUå‡½æ•°"><a href="#ReLUå‡½æ•°" class="headerlink" title="ReLUå‡½æ•°"></a>ReLUå‡½æ•°</h4><p>å…¶åœ¨è¾“å…¥å¤§äº0çš„æ—¶å€™ç›´æ¥è¾“å‡ºè¯¥å€¼ï¼Œåœ¨è¾“å…¥å°äºç­‰äº0æ—¶ï¼Œè¾“å‡º0</p><p>ä½¿ç”¨pythonå®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">relu</span>(<span class="hljs-params">x</span>):</span><br>    <span class="hljs-keyword">return</span> np.maximum(<span class="hljs-number">0</span>, x)<br></code></pre></td></tr></table></figure><h3 id="ç¥ç»ç½‘ç»œçš„å†…ç§¯"><a href="#ç¥ç»ç½‘ç»œçš„å†…ç§¯" class="headerlink" title="ç¥ç»ç½‘ç»œçš„å†…ç§¯"></a>ç¥ç»ç½‘ç»œçš„å†…ç§¯</h3><p>ä½¿ç”¨numpyçŸ©é˜µæ¥å®ç°ç¥ç»ç½‘ç»œ</p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/20181219152354924.png" style="zoom: 33%;"><table><thead><tr><th>X</th><th>W</th><th>Y</th></tr></thead><tbody><tr><td>2</td><td>2x3</td><td>3</td></tr></tbody></table><p>å…¶ä¸­Wä¸ºæƒé‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">X = np.array([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])<br><br>W = np.array([[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>]])<br><br>Y = np.dot(X,W)<br><br><span class="hljs-built_in">print</span>(Y)<br></code></pre></td></tr></table></figure><p><img src="/2021/10/03/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A2%E3%80%8B%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/image-20211004203927701.png" alt="image-20211004203927701"></p><h3 id="ä¸‰å±‚ç¥ç»ç½‘ç»œçš„å®ç°"><a href="#ä¸‰å±‚ç¥ç»ç½‘ç»œçš„å®ç°" class="headerlink" title="ä¸‰å±‚ç¥ç»ç½‘ç»œçš„å®ç°"></a>ä¸‰å±‚ç¥ç»ç½‘ç»œçš„å®ç°</h3>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¥ç»ç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>c++æ±‚æ–æ³¢æ‹‰è¥¿æ•°åˆ—</title>
    <link href="/2021/10/02/c++%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B/"/>
    <url>/2021/10/02/c++%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h3 id="ä½¿ç”¨c-æ¨¡æ¿å…ƒç¼–ç¨‹æ±‚æ–æ³¢æ‹‰è¥¿æ•°åˆ—"><a href="#ä½¿ç”¨c-æ¨¡æ¿å…ƒç¼–ç¨‹æ±‚æ–æ³¢æ‹‰è¥¿æ•°åˆ—" class="headerlink" title="ä½¿ç”¨c++æ¨¡æ¿å…ƒç¼–ç¨‹æ±‚æ–æ³¢æ‹‰è¥¿æ•°åˆ—"></a>ä½¿ç”¨c++æ¨¡æ¿å…ƒç¼–ç¨‹æ±‚æ–æ³¢æ‹‰è¥¿æ•°åˆ—</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">int</span> num&gt;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">fib</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-class"><span class="hljs-keyword">enum</span> &#123;</span>result=fib&lt;num<span class="hljs-number">-1</span>&gt;::result+fib&lt;num<span class="hljs-number">-2</span>&gt;::result&#125;;<br>&#125;;<br><br><span class="hljs-keyword">template</span>&lt;&gt;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">fib</span>&lt;</span><span class="hljs-number">0</span>&gt;<br>&#123;<br>    <span class="hljs-class"><span class="hljs-keyword">enum</span> &#123;</span>result=<span class="hljs-number">1</span>&#125;;<br>&#125;;<br><br><span class="hljs-keyword">template</span>&lt;&gt;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">fib</span>&lt;</span><span class="hljs-number">1</span>&gt;<br>&#123;<br>    <span class="hljs-class"><span class="hljs-keyword">enum</span>&#123;</span> result=<span class="hljs-number">1</span>&#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨constexpr-å…³é”®å­—æ±‚"><a href="#ä½¿ç”¨constexpr-å…³é”®å­—æ±‚" class="headerlink" title="ä½¿ç”¨constexpr å…³é”®å­—æ±‚"></a>ä½¿ç”¨constexpr å…³é”®å­—æ±‚</h3><p>constexpr  å…è®¸ç¼–ç¨‹è€…ä¿è¯å‡½æ•°æˆ–å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯ç¼–è¯‘æ—¶å¸¸é‡</p><p>åœ¨æ­¤å¤„æ—¶éƒ½æ˜¯å…è®¸åœ¨ç¼–è¯‘æœŸå¯¹å…¶è¿›è¡Œæ±‚å€¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// C++11</span><br><span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">int</span> <span class="hljs-title">factorial_Cpp11</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> n == <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : n * <span class="hljs-built_in">factorial_Cpp11</span>(n - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">// C++14</span><br><span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">int</span> <span class="hljs-title">factorial_Cpp14</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> result = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)<br>        result *= i;<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•å­¦ä¹ ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>cpp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ±‚ç´ æ•°</title>
    <link href="/2021/10/02/%E6%B1%82%E7%B4%A0%E6%95%B0/"/>
    <url>/2021/10/02/%E6%B1%82%E7%B4%A0%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="æ±‚ç´ æ•°ï¼š"><a href="#æ±‚ç´ æ•°ï¼š" class="headerlink" title="æ±‚ç´ æ•°ï¼š"></a>æ±‚ç´ æ•°ï¼š</h2><h3 id="æœ´ç´ ç®—æ³•æ±‚ç´ æ•°ï¼š"><a href="#æœ´ç´ ç®—æ³•æ±‚ç´ æ•°ï¼š" class="headerlink" title="æœ´ç´ ç®—æ³•æ±‚ç´ æ•°ï¼š"></a>æœ´ç´ ç®—æ³•æ±‚ç´ æ•°ï¼š</h3><p>ç®—æ³•æè¿°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cmath&gt;</span></span><br><span class="hljs-comment">//c++ä½¿ç”¨cmath cä½¿ç”¨math.h</span><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPrime</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br> <br><span class="hljs-keyword">int</span> i,sqr = <span class="hljs-built_in">sqrt</span>((<span class="hljs-keyword">double</span>)n);<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">2</span>; i&lt;=sqr; ++i)<br>&#123;<br><span class="hljs-keyword">if</span> ( (n%i) == <span class="hljs-number">0</span> )<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è°ƒç”¨æ–¹å¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">100</span>; i &lt; <span class="hljs-number">200</span>; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isPrime</span>(i))<br>        cout&lt;&lt;i&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŸƒå¼ç­›é€‰æ³•åŠæ±‚ç´ æ•°çš„åŸºæœ¬åŸç†ï¼š"><a href="#åŸƒå¼ç­›é€‰æ³•åŠæ±‚ç´ æ•°çš„åŸºæœ¬åŸç†ï¼š" class="headerlink" title="åŸƒå¼ç­›é€‰æ³•åŠæ±‚ç´ æ•°çš„åŸºæœ¬åŸç†ï¼š"></a>åŸƒå¼ç­›é€‰æ³•åŠæ±‚ç´ æ•°çš„åŸºæœ¬åŸç†ï¼š</h3><p>ç­›æ³•æ±‚ç´ æ•°çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šæŠŠä»2åˆ°Nçš„ä¸€ç»„<a href="https://baike.baidu.com/item/%E6%AD%A3%E6%95%B4%E6%95%B0">æ­£æ•´æ•°</a>ä»å°åˆ°å¤§æŒ‰é¡ºåºæ’åˆ—ã€‚ä»ä¸­ä¾æ¬¡åˆ é™¤2çš„å€æ•°ã€3çš„å€æ•°ã€5çš„å€æ•°ï¼Œç›´åˆ°æ ¹å·Nçš„å€æ•°ä¸ºæ­¢ï¼Œå‰©ä½™çš„å³ä¸º2~Nä¹‹é—´çš„æ‰€æœ‰ç´ æ•°</p><h4 id="ä½¿ç”¨c-æ¥æè¿°è¿™ä¸€æ“ä½œï¼š"><a href="#ä½¿ç”¨c-æ¥æè¿°è¿™ä¸€æ“ä½œï¼š" class="headerlink" title="ä½¿ç”¨c++æ¥æè¿°è¿™ä¸€æ“ä½œï¼š"></a>ä½¿ç”¨c++æ¥æè¿°è¿™ä¸€æ“ä½œï¼š</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> range 2000</span><br><span class="hljs-keyword">bool</span> IsPrime[range + <span class="hljs-number">1</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initPrime</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> IsPrime[])</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> i, j;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt;= range; ++i)<br>        IsPrime[i] = <span class="hljs-literal">true</span>;<br>    IsPrime[<span class="hljs-number">0</span>] = IsPrime[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">2</span>; i &lt;= range; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (IsPrime[i]) &#123;<br>            <span class="hljs-keyword">for</span> (j = <span class="hljs-number">2</span> * i; j &lt;= range; j += i)<br>                IsPrime[j]=<span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ä¸º<em>O</em>(<em>N<strong>l</strong>o<strong>g</strong>l<strong>o</strong>g**N</em>)</p><h3 id="æ¬§å¼ç´ æ•°ç­›åŠå…¶åŸç†ï¼š"><a href="#æ¬§å¼ç´ æ•°ç­›åŠå…¶åŸç†ï¼š" class="headerlink" title="æ¬§å¼ç´ æ•°ç­›åŠå…¶åŸç†ï¼š"></a>æ¬§å¼ç´ æ•°ç­›åŠå…¶åŸç†ï¼š</h3><p>åœ¨åŸƒå¼åŸºç¡€ä¸Šå¢åŠ æ“ä½œï¼šæ¯ä¸€ä¸ªè¢«ç­›æ‰çš„æ•°éƒ½å¿…é¡»æ˜¯è¢«å®ƒçš„æœ€å°è´¨å› å­ç­›æ‰ï¼Œ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">if</span>(i % prime[j] == <span class="hljs-number">0</span>)<span class="hljs-comment">//ç¡®ä¿æ˜¯æœ€å°è´¨å› æ•°</span><br>&#123;<br>    <span class="hljs-keyword">break</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initPrime_ou</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> isPrime[])</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> prime[range];<br>    <span class="hljs-keyword">int</span> h = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> i, j;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt;= range; ++i)<br>        IsPrime[i] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">2</span>; i &lt;= range; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (isPrime[i]) prime[h++] = i;<br>        <span class="hljs-keyword">for</span> (j  = <span class="hljs-number">0</span>; j &lt; h &amp;&amp; i*prime[j]&lt;=range; ++j) &#123;<br>            isPrime[i*prime[j]] =<span class="hljs-literal">false</span>; <span class="hljs-comment">//ç­›å»içš„å€æ•°</span><br>            <span class="hljs-keyword">if</span> (i%prime[j]==<span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>; <span class="hljs-comment">//ä¿è¯æ¯ä¸ªåˆæ•°è¢«ä»–çš„æœ€å°è´¨å› æ•°ç­›å»ï¼ˆå»é‡</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•å­¦ä¹ ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ±‚ç´ æ•°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ å…¥é—¨ã€Š1ã€‹æ„ŸçŸ¥æœº</title>
    <link href="/2021/10/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A1%E3%80%8B%E6%84%9F%E7%9F%A5%E6%9C%BA/"/>
    <url>/2021/10/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A1%E3%80%8B%E6%84%9F%E7%9F%A5%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="æ„ŸçŸ¥æœºæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ„ŸçŸ¥æœºæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ„ŸçŸ¥æœºæ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ„ŸçŸ¥æœºæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æ„ŸçŸ¥æœº(Perceptron)åœ¨1957å¹´ç”±Rosenblattæå‡ºï¼Œæ˜¯ç¥ç»ç½‘ç»œå’Œæ”¯æŒå‘é‡æœºçš„åŸºç¡€ã€‚</p><p>æ„ŸçŸ¥æœºæ˜¯ä¸€ç§äºŒç±»åˆ†ç±»çš„çº¿æ€§åˆ†ç±»æ¨¡å‹ï¼Œå…¶è¾“å…¥ä¸ºå®ä¾‹çš„ç‰¹å¾å‘é‡ï¼Œè¾“å‡ºä¸ºå®ä¾‹çš„ç±»åˆ«ï¼Œ+1ä»£è¡¨æ­£ç±»ï¼Œ-1ä»£è¡¨è´Ÿç±»ã€‚æ„ŸçŸ¥æœºå±äºåˆ¤åˆ«æ¨¡å‹ï¼Œå®ƒçš„ç›®æ ‡æ˜¯è¦å°†è¾“å…¥å®ä¾‹é€šè¿‡åˆ†ç¦»è¶…å¹³é¢å°†æ­£è´ŸäºŒç±»åˆ†ç¦»ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯æ¥å—å¤šä¸ªä¿¡å·æ¥è¾“å‡ºä¸€ä¸ªä¿¡å·</p><p><img src="/2021/10/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A1%E3%80%8B%E6%84%9F%E7%9F%A5%E6%9C%BA/20160920193516651.jpg"></p><h3 id="ä»¥ä¸‹å†…å®¹ä¸ºå•å±‚æ„ŸçŸ¥æœºçš„éƒ¨åˆ†ï¼š"><a href="#ä»¥ä¸‹å†…å®¹ä¸ºå•å±‚æ„ŸçŸ¥æœºçš„éƒ¨åˆ†ï¼š" class="headerlink" title="ä»¥ä¸‹å†…å®¹ä¸ºå•å±‚æ„ŸçŸ¥æœºçš„éƒ¨åˆ†ï¼š"></a>ä»¥ä¸‹å†…å®¹ä¸ºå•å±‚æ„ŸçŸ¥æœºçš„éƒ¨åˆ†ï¼š</h3><p>ï¼ˆå› ä¸ºå•å±‚æ„ŸçŸ¥æœºçš„å±€é™æ€§ï¼Œä»–åªæ”¯æŒ ä¸é—¨ï¼Œæˆ–é—¨ï¼Œä¸éé—¨,åŸå› æ˜¯å®ƒåªèƒ½ç”±ä¸€æ¡ç›´çº¿åˆ†å¼€ï¼Œæ›²çº¿æ˜¯æ— æ³•ç”¨æ„ŸçŸ¥æœºè¡¨ç¤ºçš„</p><p>ç”±ç›´çº¿åˆ†å‰²çš„ä¸ºçº¿æ€§ç©ºé—´ï¼Œæ›²çº¿åˆ†å‰²çš„ä¸ºéçº¿æ€§ç©ºé—´</p><h3 id="ç®€å•é€»è¾‘ç”µè·¯"><a href="#ç®€å•é€»è¾‘ç”µè·¯" class="headerlink" title="ç®€å•é€»è¾‘ç”µè·¯"></a>ç®€å•é€»è¾‘ç”µè·¯</h3><h4 id="ä¸é—¨"><a href="#ä¸é—¨" class="headerlink" title="ä¸é—¨"></a>ä¸é—¨</h4><p>ä¸é—¨å¦‚æœç”¨æˆ‘ä»¬å¸¸ç”¨çš„cæ¥æè¿°çš„è¯åº”è¯¥æ˜¯æŒ‡çš„ &amp;&amp;</p><p>å¯¹åº”çš„çœŸå€¼è¡¨ä¸º</p><table><thead><tr><th>A</th><th>B</th><th>Y</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table><p>ä¸‹æ–‡ä¸­ä»ç„¶ä»¥ 0ä¸ºå‡ï¼Œ1ä¸ºçœŸ</p><h5 id="ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸é—¨ï¼š"><a href="#ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸é—¨ï¼š" class="headerlink" title="ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸é—¨ï¼š"></a>ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸é—¨ï¼š</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">AND</span>(<span class="hljs-params">a, b</span>):</span><br>    x = np.array([a, b])<br>    w = np.array([<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>])<br>    b = -<span class="hljs-number">0.7</span><br>    tmp = np.<span class="hljs-built_in">sum</span>(w * x) + b<br>    <span class="hljs-keyword">if</span> tmp &lt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­b ä¸ºåç½®ï¼Œæ˜¯è°ƒæ•´ç¥ç»å…ƒè¢«æ¿€æ´»çš„å®¹æ˜“ç¨‹åº¦ï¼ˆè¾“å‡ºä¿¡å·ä¸º1çš„ç¨‹åº¦ï¼‰</p><h4 id="ä¸éé—¨"><a href="#ä¸éé—¨" class="headerlink" title="ä¸éé—¨"></a>ä¸éé—¨</h4><p>ç®€å•æ¥è¯´å°±æ˜¯ä¸é—¨çš„åé¢</p><p>å¯¹åº”çš„çœŸå€¼è¡¨ä¸ºï¼š</p><table><thead><tr><th>A</th><th>B</th><th>Y</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td></tr></tbody></table><h5 id="ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸éé—¨ï¼š"><a href="#ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸éé—¨ï¼š" class="headerlink" title="ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸éé—¨ï¼š"></a>ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°ä¸éé—¨ï¼š</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">NAND</span>(<span class="hljs-params">a, b</span>):</span><br>    x = np.array([a, b])<br>    w = np.array([-<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.5</span>])<br>    b = <span class="hljs-number">0.7</span><br>    tmp = np.<span class="hljs-built_in">sum</span>(w * x) + b<br>    <span class="hljs-keyword">if</span> tmp &lt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure><h4 id="æˆ–é—¨"><a href="#æˆ–é—¨" class="headerlink" title="æˆ–é—¨"></a>æˆ–é—¨</h4><p>æˆ–é—¨ç”¨é€šå¸¸çš„cæè¿°å°±æ˜¯ ||æ“ä½œ</p><p>å¯¹åº”çš„çœŸå€¼è¡¨ï¼š</p><table><thead><tr><th>A</th><th>B</th><th>Y</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table><h5 id="ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°æˆ–é—¨ï¼š"><a href="#ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°æˆ–é—¨ï¼š" class="headerlink" title="ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°æˆ–é—¨ï¼š"></a>ä½¿ç”¨æ„ŸçŸ¥æœºå®ç°æˆ–é—¨ï¼š</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">OR</span>(<span class="hljs-params">a, b</span>):</span><br>    x = np.array([a, b])<br>    w = np.array([<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>])<br>    b = -<span class="hljs-number">0.2</span><br>    tmp = np.<span class="hljs-built_in">sum</span>(w * x) + b<br>    <span class="hljs-keyword">if</span> tmp &lt;= <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="ä»¥ä¸‹ä¸ºå¤šå±‚æ„ŸçŸ¥æœºå†…å®¹ï¼š"><a href="#ä»¥ä¸‹ä¸ºå¤šå±‚æ„ŸçŸ¥æœºå†…å®¹ï¼š" class="headerlink" title="ä»¥ä¸‹ä¸ºå¤šå±‚æ„ŸçŸ¥æœºå†…å®¹ï¼š"></a>ä»¥ä¸‹ä¸ºå¤šå±‚æ„ŸçŸ¥æœºå†…å®¹ï¼š</h3><h4 id="å¼‚æˆ–é—¨ï¼š"><a href="#å¼‚æˆ–é—¨ï¼š" class="headerlink" title="å¼‚æˆ–é—¨ï¼š"></a>å¼‚æˆ–é—¨ï¼š</h4><p>åˆç§°é€»è¾‘å¼‚æˆ–ç”µè·¯ï¼Œä»…å½“aæˆ–bä¸­çš„ä¸€æ–¹ä¸º1æ—¶ï¼Œæ‰ä¼šè¾“å‡º1ï¼ˆâ€œå¼‚æˆ–â€ä¸ºæ‹’ç»å…¶ä»–çš„æ„æ€ï¼‰</p><p>å…¶çœŸå€¼è¡¨ä¸ºï¼š</p><table><thead><tr><th>A</th><th>B</th><th>Y</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>å¯ä»¥é€šè¿‡ç»„åˆä¸é—¨ï¼Œä¸éé—¨ï¼Œæˆ–é—¨æ¥å®ç°å¼‚æˆ–é—¨</p><p><img src="/2021/10/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8%E3%80%8A1%E3%80%8B%E6%84%9F%E7%9F%A5%E6%9C%BA/12472907-e997d8f579f7c831.webp"></p><table><thead><tr><th>A</th><th>B</th><th>C</th><th>D</th><th>Y</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">XOR</span>(<span class="hljs-params">a, b</span>):</span><br>    s1 = NAND(a, b)<br>    s2 = OR(a, b)<br>    y = AND(s1, s2)<br>    <span class="hljs-keyword">return</span> y<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ„ŸçŸ¥æœº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cppç®€å•ç‰¹æ€§å­¦ä¹ ç¬”è®°</title>
    <link href="/2021/10/01/cpp%E7%AE%80%E5%8D%95%E7%89%B9%E6%80%A7%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/10/01/cpp%E7%AE%80%E5%8D%95%E7%89%B9%E6%80%A7%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>æ ‡ç­¾æµ‹è¯•</p>]]></content>
    
    
    <categories>
      
      <category>cpp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>cpp</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
